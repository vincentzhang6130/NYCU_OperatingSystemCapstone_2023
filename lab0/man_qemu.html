<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Sun Feb 19 13:51:41 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>QEMU</title>

</head>
<body>

<h1 align="center">QEMU</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">qemu - QEMU
User Documentation</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:15%; margin-top: 1em">qemu-system-x86_64 [options] [disk_image]</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The QEMU PC
System emulator simulates the following peripherals:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>i440FX host PCI bridge and PIIX3 PCI to ISA bridge</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Cirrus CLGD 5446 PCI VGA card or dummy VGA card with
Bochs VESA extensions (hardware level, including all non
standard modes).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>PS/2 mouse and keyboard</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>2 PCI IDE interfaces with hard disk and CD-ROM
support</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Floppy disk</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>PCI and ISA network adapters</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Serial ports</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>IPMI BMC, either and internal or external one</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Creative SoundBlaster 16 sound card</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>ENSONIQ AudioPCI ES1370 sound card</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Intel 82801AA AC97 Audio compatible sound card</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Intel HD Audio Controller and HDA codec</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Adlib (OPL2) - Yamaha YM3812 compatible chip</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>Gravis Ultrasound GF1 sound card</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>CS4231A compatible sound card</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>PC speaker</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>PCI UHCI, OHCI, EHCI or XHCI USB controller and a
virtual USB-1.1 hub.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">SMP is
supported with up to 255 CPUs.</p>

<p style="margin-left:11%; margin-top: 1em">QEMU uses the
PC BIOS from the Seabios project and the Plex86/Bochs LGPL
VGA BIOS.</p>

<p style="margin-left:11%; margin-top: 1em">QEMU uses
YM3812 emulation by Tatsuyuki Satoh.</p>

<p style="margin-left:11%; margin-top: 1em">QEMU uses GUS
emulation (GUSEMU32
<i>http://www.deinmeister.de/gusemu/</i>) by Tibor
&quot;TS&quot; Sch&uuml;tz.</p>

<p style="margin-left:11%; margin-top: 1em">Note that, by
default, GUS shares IRQ(7) with parallel ports and so QEMU
must be told to not have parallel ports to have working
GUS.</p>

<pre style="margin-left:15%; margin-top: 1em">qemu-system-x86_64 dos.img -device gus -parallel none</pre>



<p style="margin-left:11%; margin-top: 1em">Alternatively:</p>


<pre style="margin-left:15%; margin-top: 1em">qemu-system-x86_64 dos.img -device gus,irq=5</pre>


<p style="margin-left:11%; margin-top: 1em">Or some other
unclaimed IRQ.</p>

<p style="margin-left:11%; margin-top: 1em">CS4231A is the
chip used in Windows Sound System and GUSMAX products</p>

<p style="margin-left:11%; margin-top: 1em">The PC speaker
audio device can be configured using the pcspk-audiodev
machine property, i.e.</p>

<pre style="margin-left:15%; margin-top: 1em">qemu-system-x86_64 some.img -audiodev &lt;backend&gt;,id=&lt;name&gt; -machine pcspk-audiodev=&lt;name&gt;</pre>


<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">disk_image is a
raw hard disk image for IDE hard disk 0. Some targets do not
need a disk image.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Standard
options</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-h</b></p></td>
<td width="8%"></td>
<td width="32%">


<p style="margin-top: 1em">Display help and exit</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>-version</b></p>

<p style="margin-left:22%;">Display version information and
exit</p>

<p style="margin-left:11%;"><b>-machine
[type=]name[,prop=value[,...]]</b></p>

<p style="margin-left:22%;">Select the emulated machine by
name. Use <b>-machine help</b> to list available
machines.</p>

<p style="margin-left:22%; margin-top: 1em">For
architectures which aim to support live migration
compatibility across releases, each release will introduce a
new versioned machine type. For example, the 2.8.0 release
introduced machine types &quot;pc-i440fx-2.8&quot; and
&quot;pc-q35-2.8&quot; for the x86_64/i686
architectures.</p>

<p style="margin-left:22%; margin-top: 1em">To allow live
migration of guests from QEMU version 2.8.0, to QEMU version
2.9.0, the 2.9.0 version must support the
&quot;pc-i440fx-2.8&quot; and &quot;pc-q35-2.8&quot;
machines too. To allow users live migrating VMs to skip
multiple intermediate releases when upgrading, new releases
of QEMU will support machine types from many previous
versions.</p>

<p style="margin-left:22%; margin-top: 1em">Supported
machine properties are: <b><br>
accel=accels1[:accels2[:...]]</b></p>

<p style="margin-left:32%;">This is used to enable an
accelerator. Depending on the target architecture, kvm, xen,
hax, hvf, nvmm, whpx or tcg can be available. By default,
tcg is used. If there is more than one accelerator
specified, the next one is used if the previous one fails to
initialize.</p>

<p style="margin-left:22%;"><b>vmport=on|off|auto</b></p>

<p style="margin-left:32%;">Enables emulation of VMWare IO
port, for vmmouse etc. auto says to select the value based
on accel. For accel=xen the default is off otherwise the
default is on.</p>


<p style="margin-left:22%;"><b>dump-guest-core=on|off</b></p>

<p style="margin-left:32%;">Include guest memory in a core
dump. The default is on.</p>

<p style="margin-left:22%;"><b>mem-merge=on|off</b></p>

<p style="margin-left:32%;">Enables or disables memory
merge support. This feature, when supported by the host,
de-duplicates identical memory pages among VMs instances
(enabled by default).</p>

<p style="margin-left:22%;"><b>aes-key-wrap=on|off</b></p>

<p style="margin-left:32%;">Enables or disables AES key
wrapping support on s390-ccw hosts. This feature controls
whether AES wrapping keys will be created to allow execution
of AES cryptographic functions. The default is on.</p>

<p style="margin-left:22%;"><b>dea-key-wrap=on|off</b></p>

<p style="margin-left:32%;">Enables or disables DEA key
wrapping support on s390-ccw hosts. This feature controls
whether DEA wrapping keys will be created to allow execution
of DEA cryptographic functions. The default is on.</p>

<p style="margin-left:22%;"><b>nvdimm=on|off</b></p>

<p style="margin-left:32%;">Enables or disables NVDIMM
support. The default is off.</p>

<p style="margin-left:22%;"><b>memory-encryption=</b></p>

<p style="margin-left:32%;">Memory encryption object to
use. The default is none.</p>

<p style="margin-left:22%;"><b>hmat=on|off</b></p>

<p style="margin-left:32%;">Enables or disables ACPI
Heterogeneous Memory Attribute Table (HMAT) support. The
default is off.</p>

<p style="margin-left:22%;"><b>memory-backend='id'</b></p>

<p style="margin-left:32%;">An alternative to legacy
<b>-mem-path</b> and <b>mem-prealloc</b> options. Allows to
use a memory backend as main RAM.</p>

<p style="margin-left:32%; margin-top: 1em">For
example:</p>

<pre style="margin-left:37%; margin-top: 1em">-object memory-backend-file,id=pc.ram,size=512M,mem-path=/hugetlbfs,prealloc=on,share=on
-machine memory-backend=pc.ram
-m 512M</pre>


<p style="margin-left:32%; margin-top: 1em">Migration
compatibility note:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="65%">


<p>as backend id one shall use value of 'default-ram-id',
advertised by machine type (available via
<b>query-machines</b> QMP command), if migration to/from old
QEMU (&lt;5.0) is expected.</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="65%">


<p>for machine types 4.0 and older, user shall use
<b>x-use-canonical-path-for-ramblock-id=off</b> backend
option if migration to/from old QEMU (&lt;5.0) is
expected.</p> </td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">For
example:</p>

<pre style="margin-left:37%; margin-top: 1em">-object memory-backend-ram,id=pc.ram,size=512M,x-use-canonical-path-for-ramblock-id=off
-machine memory-backend=pc.ram
-m 512M</pre>



<p style="margin-left:11%;"><b>sgx-epc.0.memdev=@var{memid}</b></p>

<p style="margin-left:22%;">Define an SGX EPC section.</p>

<p style="margin-left:11%;"><b>-cpu model</b></p>

<p style="margin-left:22%;">Select CPU model (<b>-cpu
help</b> for list and additional feature selection)</p>

<p style="margin-left:11%;"><b>-accel
name[,prop=value[,...]]</b></p>

<p style="margin-left:22%;">This is used to enable an
accelerator. Depending on the target architecture, kvm, xen,
hax, hvf, nvmm, whpx or tcg can be available. By default,
tcg is used. If there is more than one accelerator
specified, the next one is used if the previous one fails to
initialize. <b><br>
igd-passthru=on|off</b></p>

<p style="margin-left:32%;">When Xen is in use, this option
controls whether Intel integrated graphics devices can be
passed through to the guest (default=off)</p>


<p style="margin-left:22%;"><b>kernel-irqchip=on|off|split</b></p>

<p style="margin-left:32%;">Controls KVM in-kernel irqchip
support. The default is full acceleration of the interrupt
controllers. On x86, split irqchip reduces the kernel attack
surface, at a performance cost for non-MSI interrupts.
Disabling the in-kernel irqchip completely is not
recommended except for debugging purposes.</p>

<p style="margin-left:22%;"><b>kvm-shadow-mem=size</b></p>

<p style="margin-left:32%;">Defines the size of the KVM
shadow MMU.</p>

<p style="margin-left:22%;"><b>split-wx=on|off</b></p>

<p style="margin-left:32%;">Controls the use of split w^x
mapping for the TCG code generation buffer. Some operating
systems require this to be enabled, and in such a case this
will default on. On other operating systems, this will
default off, but one may enable this for testing or
debugging.</p>

<p style="margin-left:22%;"><b>tb-size=n</b></p>

<p style="margin-left:32%;">Controls the size (in MiB) of
the TCG translation block cache.</p>

<p style="margin-left:22%;"><b>thread=single|multi</b></p>

<p style="margin-left:32%;">Controls number of TCG threads.
When the TCG is multi-threaded there will be one thread per
vCPU therefore taking advantage of additional host cores.
The default is to enable multi-threading where both the
back-end and front-ends support it and no incompatible TCG
features have been enabled (e.g. icount/replay).</p>

<p style="margin-left:22%;"><b>dirty-ring-size=n</b></p>

<p style="margin-left:32%;">When the KVM accelerator is
used, it controls the size of the per-vCPU dirty page ring
buffer (number of entries for each vCPU). It should be a
value that is power of two, and it should be 1024 or bigger
(but still less than the maximum value that the kernel
supports). 4096 could be a good initial value if you have no
idea which is the best. Set this value to 0 to disable the
feature. By default, this feature is disabled
(dirty-ring-size=0). When enabled, KVM will instead record
dirty pages in a bitmap.</p>

<p style="margin-left:11%;"><b>-smp <br>

[[cpus=]n][,maxcpus=maxcpus][,sockets=sockets][,dies=dies][,cores=cores][,threads=threads]</b></p>

<p style="margin-left:22%;">Simulate a SMP system with
'<b>n</b>' CPUs initially present on the machine type board.
On boards supporting CPU hotplug, the optional
'<b>maxcpus</b>' parameter can be set to enable further CPUs
to be added at runtime. When both parameters are omitted,
the maximum number of CPUs will be calculated from the
provided topology members and the initial CPU count will
match the maximum number. When only one of them is given
then the omitted one will be set to its counterpart's value.
Both parameters may be specified, but the maximum number of
CPUs must be equal to or greater than the initial CPU count.
Both parameters are subject to an upper limit that is
determined by the specific machine type chosen.</p>

<p style="margin-left:22%; margin-top: 1em">To control
reporting of CPU topology information, the number of
sockets, dies per socket, cores per die, and threads per
core can be specified. The sum `` sockets * cores * dies *
threads `` must be equal to the maximum CPU count. CPU
targets may only support a subset of the topology
parameters. Where a CPU target does not support use of a
particular topology parameter, its value should be assumed
to be 1 for the purpose of computing the CPU maximum
count.</p>

<p style="margin-left:22%; margin-top: 1em">Either the
initial CPU count, or at least one of the topology
parameters must be specified. The specified parameters must
be greater than zero, explicit configuration like
&quot;cpus=0&quot; is not allowed. Values for any omitted
parameters will be computed from those which are given.
Historically preference was given to the coarsest topology
parameters when computing missing values (ie sockets
preferred over cores, which were preferred over threads),
however, this behaviour is considered liable to change.
Prior to 6.2 the preference was sockets over cores over
threads. Since 6.2 the preference is cores over sockets over
threads.</p>

<p style="margin-left:11%;"><b>-numa <br>

node[,mem=size][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator]
<br>
-numa <br>

node[,memdev=id][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator]
<br>
-numa dist,src=source,dst=destination,val=distance <br>
-numa
cpu,node-id=node[,socket-id=x][,core-id=y][,thread-id=z]
<br>
-numa <br>

hmat-lb,initiator=node,target=node,hierarchy=hierarchy,data-type=tpye[,latency=lat][,bandwidth=bw]
<br>
-numa <br>

hmat-cache,node-id=node,size=size,level=level[,associativity=str][,policy=str][,line=size]</b></p>

<p style="margin-left:22%;">Define a NUMA node and assign
RAM and VCPUs to it. Set the NUMA distance from a source
node to a destination node. Set the ACPI Heterogeneous
Memory Attributes for the given nodes.</p>

<p style="margin-left:22%; margin-top: 1em">Legacy VCPU
assignment uses '<b>cpus</b>' option where firstcpu and
lastcpu are CPU indexes. Each '<b>cpus</b>' option represent
a contiguous range of CPU indexes (or a single VCPU if
lastcpu is omitted). A non-contiguous set of VCPUs can be
represented by providing multiple '<b>cpus</b>' options. If
'<b>cpus</b>' is omitted on all nodes, VCPUs are
automatically split between them.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the following option assigns VCPUs 0, 1, 2 and 5 to a NUMA
node:</p>

<pre style="margin-left:26%; margin-top: 1em">-numa node,cpus=0-2,cpus=5</pre>


<p style="margin-left:22%; margin-top: 1em">'<b>cpu</b>'
option is a new alternative to '<b>cpus</b>' option which
uses '<b>socket-id|core-id|thread-id</b>' properties to
assign CPU objects to a node using topology layout
properties of CPU. The set of properties is machine
specific, and depends on used machine type/'<b>smp</b>'
options. It could be queried with '<b>hotpluggable-cpus</b>'
monitor command. '<b>node-id</b>' property specifies node to
which CPU object will be assigned, it's required for node to
be declared with '<b>node</b>' option before it's used with
'<b>cpu</b>' option.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<pre style="margin-left:26%; margin-top: 1em">-M pc \
-smp 1,sockets=2,maxcpus=2 \
-numa node,nodeid=0 -numa node,nodeid=1 \
-numa cpu,node-id=0,socket-id=0 -numa cpu,node-id=1,socket-id=1</pre>


<p style="margin-left:22%; margin-top: 1em">Legacy
'<b>mem</b>' assigns a given RAM amount to a node (not
supported for 5.1 and newer machine types). '<b>memdev</b>'
assigns RAM from a given memory backend device to a node. If
'<b>mem</b>' and '<b>memdev</b>' are omitted in all nodes,
RAM is split equally between them.</p>

<p style="margin-left:22%; margin-top: 1em">'<b>mem</b>'
and '<b>memdev</b>' are mutually exclusive. Furthermore, if
one node uses '<b>memdev</b>', all of them have to use
it.</p>


<p style="margin-left:22%; margin-top: 1em">'<b>initiator</b>'
is an additional option that points to an initiator NUMA
node that has best performance (the lowest latency or
largest bandwidth) to this NUMA node. Note that this option
can be set only when the machine property 'hmat' is set to
'on'.</p>

<p style="margin-left:22%; margin-top: 1em">Following
example creates a machine with 2 NUMA nodes, node 0 has CPU.
node 1 has only memory, and its initiator is node 0. Note
that because node 0 has CPU, by default the initiator of
node 0 is itself and must be itself.</p>

<pre style="margin-left:26%; margin-top: 1em">-machine hmat=on \
-m 2G,slots=2,maxmem=4G \
-object memory-backend-ram,size=1G,id=m0 \
-object memory-backend-ram,size=1G,id=m1 \
-numa node,nodeid=0,memdev=m0 \
-numa node,nodeid=1,memdev=m1,initiator=0 \
-smp 2,sockets=2,maxcpus=2  \
-numa cpu,node-id=0,socket-id=0 \
-numa cpu,node-id=0,socket-id=1</pre>


<p style="margin-left:22%; margin-top: 1em">source and
destination are NUMA node IDs. distance is the NUMA distance
from source to destination. The distance from a node to
itself is always 10. If any pair of nodes is given a
distance, then all pairs must be given distances. Although,
when distances are only given in one direction for each pair
of nodes, then the distances in the opposite directions are
assumed to be the same. If, however, an asymmetrical pair of
distances is given for even one node pair, then all node
pairs must be provided distance values for both directions,
even when they are symmetrical. When a node is unreachable
from another node, set the pair's distance to 255.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
-<b>numa</b> option doesn't allocate any of the specified
resources, it just assigns existing resources to NUMA nodes.
This means that one still has to use the <b>-m</b>,
<b>-smp</b> options to allocate RAM and VCPUs
respectively.</p>

<p style="margin-left:22%; margin-top: 1em">Use
'<b>hmat-lb</b>' to set System Locality Latency and
Bandwidth Information between initiator and target NUMA
nodes in ACPI Heterogeneous Attribute Memory Table (HMAT).
Initiator NUMA node can create memory requests, usually it
has one or more processors. Target NUMA node contains
addressable memory.</p>

<p style="margin-left:22%; margin-top: 1em">In
'<b>hmat-lb</b>' option, node are NUMA node IDs. hierarchy
is the memory hierarchy of the target NUMA node: if
hierarchy is 'memory', the structure represents the memory
performance; if hierarchy is
'first-level|second-level|third-level', this structure
represents aggregated performance of memory side caches for
each domain. type of 'data-type' is type of data represented
by this structure instance: if 'hierarchy' is 'memory',
'data-type' is 'access|read|write' latency or
'access|read|write' bandwidth of the target memory; if
'hierarchy' is 'first-level|second-level|third-level',
'data-type' is 'access|read|write' hit latency or
'access|read|write' hit bandwidth of the target memory side
cache.</p>

<p style="margin-left:22%; margin-top: 1em">lat is latency
value in nanoseconds. bw is bandwidth value, the possible
value and units are NUM[M|G|T], mean that the bandwidth
value are NUM byte per second (or MB/s, GB/s or TB/s
depending on used suffix). Note that if latency or bandwidth
value is 0, means the corresponding latency or bandwidth
information is not provided.</p>

<p style="margin-left:22%; margin-top: 1em">In
'<b>hmat-cache</b>' option, node-id is the NUMA-id of the
memory belongs. size is the size of memory side cache in
bytes. level is the cache level described in this structure,
note that the cache level 0 should not be used with
'<b>hmat-cache</b>' option. associativity is the cache
associativity, the possible value is
'none/direct(direct-mapped)/complex(complex cache
indexing)'. policy is the write policy. line is the cache
Line size in bytes.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the following options describe 2 NUMA nodes. Node 0 has 2
cpus and a ram, node 1 has only a ram. The processors in
node 0 access memory in node 0 with access-latency 5
nanoseconds, access-bandwidth is 200 MB/s; The processors in
NUMA node 0 access memory in NUMA node 1 with access-latency
10 nanoseconds, access-bandwidth is 100 MB/s. And for memory
side cache information, NUMA node 0 and 1 both have 1 level
memory cache, size is 10KB, policy is write-back, the cache
Line size is 8 bytes:</p>

<pre style="margin-left:26%; margin-top: 1em">-machine hmat=on \
-m 2G \
-object memory-backend-ram,size=1G,id=m0 \
-object memory-backend-ram,size=1G,id=m1 \
-smp 2,sockets=2,maxcpus=2 \
-numa node,nodeid=0,memdev=m0 \
-numa node,nodeid=1,memdev=m1,initiator=0 \
-numa cpu,node-id=0,socket-id=0 \
-numa cpu,node-id=0,socket-id=1 \
-numa hmat-lb,initiator=0,target=0,hierarchy=memory,data-type=access-latency,latency=5 \
-numa hmat-lb,initiator=0,target=0,hierarchy=memory,data-type=access-bandwidth,bandwidth=200M \
-numa hmat-lb,initiator=0,target=1,hierarchy=memory,data-type=access-latency,latency=10 \
-numa hmat-lb,initiator=0,target=1,hierarchy=memory,data-type=access-bandwidth,bandwidth=100M \
-numa hmat-cache,node-id=0,size=10K,level=1,associativity=direct,policy=write-back,line=8 \
-numa hmat-cache,node-id=1,size=10K,level=1,associativity=direct,policy=write-back,line=8</pre>


<p style="margin-left:11%;"><b>-add-fd
fd=fd,set=set[,opaque=opaque]</b></p>

<p style="margin-left:22%;">Add a file descriptor to an fd
set. Valid options are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>fd=fd</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>This option defines the file descriptor of which a
duplicate is added to fd set. The file descriptor cannot be
stdin, stdout, or stderr.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>set=set</b></p>

<p style="margin-left:32%;">This option defines the ID of
the fd set to add the file descriptor to.</p>

<p style="margin-left:22%;"><b>opaque=opaque</b></p>

<p style="margin-left:32%;">This option defines a free-form
string that can be used to describe fd.</p>

<p style="margin-left:22%; margin-top: 1em">You can open an
image using pre-opened file descriptors from an fd set:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 \
 -add-fd fd=3,set=2,opaque=&quot;rdwr:/path/to/file&quot; \
 -add-fd fd=4,set=2,opaque=&quot;rdonly:/path/to/file&quot; \
 -drive file=/dev/fdset/2,index=0,media=disk</pre>


<p style="margin-left:11%;"><b>-set
group.id.arg=value</b></p>

<p style="margin-left:22%;">Set parameter arg for item id
of type group</p>

<p style="margin-left:11%;"><b>-global driver.prop=value
<br>
-global driver=driver,property=property,value=value</b></p>

<p style="margin-left:22%;">Set default value of driver's
property prop to value, e.g.:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -global ide-hd.physical_block_size=4096 disk-image.img</pre>


<p style="margin-left:22%; margin-top: 1em">In particular,
you can use this to set driver properties for devices which
are created automatically by the machine model. To create a
device which is not created automatically and set properties
on it, use -<b>device</b>.</p>

<p style="margin-left:22%; margin-top: 1em">-global
driver.prop=value is shorthand for -global
driver=driver,property=prop,value=value. The longhand syntax
works even when driver contains a dot.</p>

<p style="margin-left:11%;"><b>-boot <br>

[order=drives][,once=drives][,menu=on|off][,splash=sp_name][,splash-time=sp_time][,reboot-timeout=rb_timeout][,strict=on|off]</b></p>

<p style="margin-left:22%;">Specify boot order drives as a
string of drive letters. Valid drive letters depend on the
target architecture. The x86 PC uses: a, b (floppy 1 and 2),
c (first hard disk), d (first CD-ROM), n-p (Etherboot from
network adapter 1-4), hard disk boot is the default. To
apply a particular boot order only on the first startup,
specify it via <b>once</b>. Note that the <b>order</b> or
<b>once</b> parameter should not be used together with the
<b>bootindex</b> property of devices, since the firmware
implementations normally do not support both at the same
time.</p>

<p style="margin-left:22%; margin-top: 1em">Interactive
boot menus/prompts can be enabled via <b>menu=on</b> as far
as firmware/BIOS supports them. The default is
non-interactive boot.</p>

<p style="margin-left:22%; margin-top: 1em">A splash
picture could be passed to bios, enabling user to show it as
logo, when option splash=sp_name is given and menu=on, If
firmware/BIOS supports them. Currently Seabios for X86
system support it. limitation: The splash file could be a
jpeg file or a BMP file in 24 BPP format(true color). The
resolution should be supported by the SVGA mode, so the
recommended is 320x240, 640x480, 800x640.</p>

<p style="margin-left:22%; margin-top: 1em">A timeout could
be passed to bios, guest will pause for rb_timeout ms when
boot failed, then reboot. If rb_timeout is '-1', guest will
not reboot, qemu passes '-1' to bios by default. Currently
Seabios for X86 system support it.</p>

<p style="margin-left:22%; margin-top: 1em">Do strict boot
via <b>strict=on</b> as far as firmware/BIOS supports it.
This only effects when boot priority is changed by bootindex
options. The default is non-strict boot.</p>

<pre style="margin-left:26%; margin-top: 1em"># try to boot from network first, then from hard disk
qemu-system-x86_64 -boot order=nc
# boot from CD-ROM first, switch back to default order after reboot
qemu-system-x86_64 -boot once=d
# boot with a splash picture for 5 seconds.
qemu-system-x86_64 -boot menu=on,splash=/root/boot.bmp,splash-time=5000</pre>


<p style="margin-left:22%; margin-top: 1em">Note: The
legacy format '-boot drives' is still supported but its use
is discouraged as it may be removed from future
versions.</p>

<p style="margin-left:11%;"><b>-m
[size=]megs[,slots=n,maxmem=size]</b></p>

<p style="margin-left:22%;">Sets guest startup RAM size to
megs megabytes. Default is 128 MiB. Optionally, a suffix of
&quot;M&quot; or &quot;G&quot; can be used to signify a
value in megabytes or gigabytes respectively. Optional pair
slots, maxmem could be used to set amount of hotpluggable
memory slots and maximum amount of memory. Note that maxmem
must be aligned to the page size.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the following command-line sets the guest startup RAM size
to 1GB, creates 3 slots to hotplug additional memory and
sets the maximum memory the guest can reach to 4GB:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -m 1G,slots=3,maxmem=4G</pre>


<p style="margin-left:22%; margin-top: 1em">If slots and
maxmem are not specified, memory hotplug won't be enabled
and the guest startup RAM will never increase.</p>

<p style="margin-left:11%;"><b>-mem-path path</b></p>

<p style="margin-left:22%;">Allocate guest RAM from a
temporarily created file in path.</p>

<p style="margin-left:11%;"><b>-mem-prealloc</b></p>

<p style="margin-left:22%;">Preallocate memory when using
-mem-path.</p>

<p style="margin-left:11%;"><b>-k language</b></p>

<p style="margin-left:22%;">Use keyboard layout language
(for example <b>fr</b> for French). This option is only
needed where it is not easy to get raw PC keycodes (e.g. on
Macs, with some X11 servers or with a VNC or curses
display). You don't normally need to use it on PC/Linux or
PC/Windows hosts.</p>

<p style="margin-left:22%; margin-top: 1em">The available
layouts are:</p>

<pre style="margin-left:26%; margin-top: 1em">ar  de-ch  es  fo     fr-ca  hu  ja  mk     no  pt-br  sv
da  en-gb  et  fr     fr-ch  is  lt  nl     pl  ru     th
de  en-us  fi  fr-be  hr     it  lv  nl-be  pt  sl     tr</pre>


<p style="margin-left:22%; margin-top: 1em">The default is
<b>en-us</b>.</p>

<p style="margin-left:11%;"><b>-audio-help</b></p>

<p style="margin-left:22%;">Will show the -audiodev
equivalent of the currently specified (deprecated)
environment variables.</p>

<p style="margin-left:11%;"><b>-audiodev
[driver=]driver,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Adds a new audio backend driver
identified by id. There are global and driver specific
properties. Some values can be set differently for input and
output, they're marked with <b>in|out.</b>. You can set the
input's property with <b>in.prop</b> and the output's
property with <b>out.prop</b>. For example:</p>

<pre style="margin-left:26%; margin-top: 1em">-audiodev alsa,id=example,in.frequency=44110,out.frequency=8000
-audiodev alsa,id=example,out.channels=1 # leaves in.channels unspecified</pre>


<p style="margin-left:22%; margin-top: 1em">NOTE: parameter
validation is known to be incomplete, in many cases
specifying an invalid option causes QEMU to print an error
message and continue emulation without sound.</p>

<p style="margin-left:22%; margin-top: 1em">Valid global
options are: <b><br>
id=identifier</b></p>

<p style="margin-left:32%;">Identifies the audio
backend.</p>

<p style="margin-left:22%;"><b>timer-period=period</b></p>

<p style="margin-left:32%;">Sets the timer period used by
the audio subsystem in microseconds. Default is 10000 (10
ms).</p>


<p style="margin-left:22%;"><b>in|out.mixing-engine=on|off</b></p>

<p style="margin-left:32%;">Use QEMU's mixing engine to mix
all streams inside QEMU and convert audio formats when not
supported by the backend. When off, fixed-settings must be
off too. Note that disabling this option means that the
selected backend must support multiple streams and the audio
formats used by the virtual cards, otherwise you'll get no
sound. It's not recommended to disable this option unless
you want to use 5.1 or 7.1 audio, as mixing engine only
supports mono and stereo audio. Default is on.</p>


<p style="margin-left:22%;"><b>in|out.fixed-settings=on|off</b></p>

<p style="margin-left:32%;">Use fixed settings for host
audio. When off, it will change based on how the guest opens
the sound card. In this case you must not specify frequency,
channels or format. Default is on.</p>


<p style="margin-left:22%;"><b>in|out.frequency=frequency</b></p>

<p style="margin-left:32%;">Specify the frequency to use
when using fixed-settings. Default is 44100Hz.</p>


<p style="margin-left:22%;"><b>in|out.channels=channels</b></p>

<p style="margin-left:32%;">Specify the number of channels
to use when using fixed-settings. Default is 2 (stereo).</p>


<p style="margin-left:22%;"><b>in|out.format=format</b></p>

<p style="margin-left:32%;">Specify the sample format to
use when using fixed-settings. Valid values are: <b>s8</b>,
<b>s16</b>, <b>s32</b>, <b>u8</b>, <b>u16</b>, <b>u32</b>,
<b>f32</b>. Default is <b>s16</b>.</p>


<p style="margin-left:22%;"><b>in|out.voices=voices</b></p>

<p style="margin-left:32%;">Specify the number of voices to
use. Default is 1.</p>


<p style="margin-left:22%;"><b>in|out.buffer-length=usecs</b></p>

<p style="margin-left:32%;">Sets the size of the buffer in
microseconds.</p>

<p style="margin-left:11%;"><b>-audiodev
none,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a dummy backend that
discards all outputs. This backend has no backend specific
properties.</p>

<p style="margin-left:11%;"><b>-audiodev
alsa,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates backend using the ALSA.
This backend is only available on Linux.</p>

<p style="margin-left:22%; margin-top: 1em">ALSA specific
options are: <b><br>
in|out.dev=device</b></p>

<p style="margin-left:32%;">Specify the ALSA device to use
for input and/or output. Default is <b>default</b>.</p>


<p style="margin-left:22%;"><b>in|out.period-length=usecs</b></p>

<p style="margin-left:32%;">Sets the period length in
microseconds.</p>


<p style="margin-left:22%;"><b>in|out.try-poll=on|off</b></p>

<p style="margin-left:32%;">Attempt to use poll mode with
the device. Default is on.</p>

<p style="margin-left:22%;"><b>threshold=threshold</b></p>

<p style="margin-left:32%;">Threshold (in microseconds)
when playback starts. Default is 0.</p>

<p style="margin-left:11%;"><b>-audiodev
coreaudio,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a backend using Apple's
Core Audio. This backend is only available on Mac OS and
only supports playback.</p>

<p style="margin-left:22%; margin-top: 1em">Core Audio
specific options are: <b><br>
in|out.buffer-count=count</b></p>

<p style="margin-left:32%;">Sets the count of the
buffers.</p>

<p style="margin-left:11%;"><b>-audiodev
dsound,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a backend using
Microsoft's DirectSound. This backend is only available on
Windows and only supports playback.</p>

<p style="margin-left:22%; margin-top: 1em">DirectSound
specific options are: <b><br>
latency=usecs</b></p>

<p style="margin-left:32%;">Add extra usecs microseconds
latency to playback. Default is 10000 (10 ms).</p>

<p style="margin-left:11%;"><b>-audiodev
oss,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a backend using OSS.
This backend is available on most Unix-like systems.</p>

<p style="margin-left:22%; margin-top: 1em">OSS specific
options are: <b><br>
in|out.dev=device</b></p>

<p style="margin-left:32%;">Specify the file name of the
OSS device to use. Default is <b>/dev/dsp</b>.</p>


<p style="margin-left:22%;"><b>in|out.buffer-count=count</b></p>

<p style="margin-left:32%;">Sets the count of the
buffers.</p>


<p style="margin-left:22%;"><b>in|out.try-poll=on|of</b></p>

<p style="margin-left:32%;">Attempt to use poll mode with
the device. Default is on.</p>

<p style="margin-left:22%;"><b>try-mmap=on|off</b></p>

<p style="margin-left:32%;">Try using memory mapped device
access. Default is off.</p>

<p style="margin-left:22%;"><b>exclusive=on|off</b></p>

<p style="margin-left:32%;">Open the device in exclusive
mode (vmix won't work in this case). Default is off.</p>

<p style="margin-left:22%;"><b>dsp-policy=policy</b></p>

<p style="margin-left:32%;">Sets the timing policy (between
0 and 10, where smaller number means smaller latency but
higher CPU usage). Use -1 to use buffer sizes specified by
<b>buffer</b> and <b>buffer-count</b>. This option is
ignored if you do not have OSS 4. Default is 5.</p>

<p style="margin-left:11%;"><b>-audiodev
pa,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a backend using
PulseAudio. This backend is available on most systems.</p>

<p style="margin-left:22%; margin-top: 1em">PulseAudio
specific options are: <b><br>
server=server</b></p>

<p style="margin-left:32%;">Sets the PulseAudio server to
connect to.</p>

<p style="margin-left:22%;"><b>in|out.name=sink</b></p>

<p style="margin-left:32%;">Use the specified source/sink
for recording/playback.</p>


<p style="margin-left:22%;"><b>in|out.latency=usecs</b></p>

<p style="margin-left:32%;">Desired latency in
microseconds. The PulseAudio server will try to honor this
value but actual latencies may be lower or higher.</p>

<p style="margin-left:11%;"><b>-audiodev
sdl,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a backend using SDL.
This backend is available on most systems, but you should
use your platform's native backend if possible.</p>

<p style="margin-left:22%; margin-top: 1em">SDL specific
options are: <b><br>
in|out.buffer-count=count</b></p>

<p style="margin-left:32%;">Sets the count of the
buffers.</p>

<p style="margin-left:11%;"><b>-audiodev
spice,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a backend that sends
audio through SPICE. This backend requires <b>-spice</b> and
automatically selected in that case, so usually you can
ignore this option. This backend has no backend specific
properties.</p>

<p style="margin-left:11%;"><b>-audiodev
wav,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Creates a backend that writes
audio to a WAV file.</p>

<p style="margin-left:22%; margin-top: 1em">Backend
specific options are: <b><br>
path=path</b></p>

<p style="margin-left:32%;">Write recorded audio into the
specified file. Default is <b>qemu.wav</b>.</p>

<p style="margin-left:11%;"><b>-soundhw card1[,card2,...]
or -soundhw all</b></p>

<p style="margin-left:22%;">Enable audio and selected sound
hardware. Use 'help' to print all available sound hardware.
For example:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -soundhw sb16,adlib disk.img
qemu-system-x86_64 -soundhw es1370 disk.img
qemu-system-x86_64 -soundhw ac97 disk.img
qemu-system-x86_64 -soundhw hda disk.img
qemu-system-x86_64 -soundhw all disk.img
qemu-system-x86_64 -soundhw help</pre>


<p style="margin-left:22%; margin-top: 1em">Note that
Linux's i810_audio OSS kernel (for AC97) module might
require manually specifying clocking.</p>

<pre style="margin-left:26%; margin-top: 1em">modprobe i810_audio clocking=48000</pre>


<p style="margin-left:11%;"><b>-device
driver[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Add device driver. prop=value
sets driver properties. Valid properties depend on the
driver. To get help on possible drivers and properties, use
<b>-device help</b> and <b>-device driver,help</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Some drivers
are:</p>

<p style="margin-left:11%;"><b>-device
ipmi-bmc-sim,id=id[,prop[=value][,...]]</b></p>

<p style="margin-left:22%;">Add an IPMI BMC. This is a
simulation of a hardware management interface processor that
normally sits on a system. It provides a watchdog and the
ability to reset and power control the system. You need to
connect this to an IPMI interface to make it useful</p>

<p style="margin-left:22%; margin-top: 1em">The IPMI slave
address to use for the BMC. The default is 0x20. This
address is the BMC's address on the I2C network of
management controllers. If you don't know what this means,
it is safe to ignore it.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>id=id</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The BMC id for interfaces to use this device.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>slave_addr=val</b></p>

<p style="margin-left:32%;">Define slave address to use for
the BMC. The default is 0x20.</p>

<p style="margin-left:22%;"><b>sdrfile=file</b></p>

<p style="margin-left:32%;">file containing raw Sensor Data
Records (SDR) data. The default is none.</p>

<p style="margin-left:22%;"><b>fruareasize=val</b></p>

<p style="margin-left:32%;">size of a Field Replaceable
Unit (FRU) area. The default is 1024.</p>

<p style="margin-left:22%;"><b>frudatafile=file</b></p>

<p style="margin-left:32%;">file containing raw Field
Replaceable Unit (FRU) inventory data. The default is
none.</p>

<p style="margin-left:22%;"><b>guid=uuid</b></p>

<p style="margin-left:32%;">value for the GUID for the BMC,
in standard UUID format. If this is set, get &quot;Get
GUID&quot; command to the BMC will return it. Otherwise
&quot;Get GUID&quot; will return an error.</p>

<p style="margin-left:11%;"><b>-device
ipmi-bmc-extern,id=id,chardev=id[,slave_addr=val]</b></p>

<p style="margin-left:22%;">Add a connection to an external
IPMI BMC simulator. Instead of locally emulating the BMC
like the above item, instead connect to an external entity
that provides the IPMI services.</p>

<p style="margin-left:22%; margin-top: 1em">A connection is
made to an external BMC simulator. If you do this, it is
strongly recommended that you use the &quot;reconnect=&quot;
chardev option to reconnect to the simulator if the
connection is lost. Note that if this is not used carefully,
it can be a security issue, as the interface has the ability
to send resets, NMIs, and power off the VM. It's best if
QEMU makes a connection to an external simulator running on
a secure port on localhost, so neither the simulator nor
QEMU is exposed to any outside network.</p>

<p style="margin-left:22%; margin-top: 1em">See the
&quot;lanserv/README.vm&quot; file in the OpenIPMI library
for more details on the external interface.</p>

<p style="margin-left:11%;"><b>-device
isa-ipmi-kcs,bmc=id[,ioport=val][,irq=val]</b></p>

<p style="margin-left:22%;">Add a KCS IPMI interafce on the
ISA bus. This also adds a corresponding ACPI and SMBIOS
entries, if appropriate.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>bmc=id</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The BMC to connect to, one of ipmi-bmc-sim or
ipmi-bmc-extern above.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>ioport=val</b></p>

<p style="margin-left:32%;">Define the I/O address of the
interface. The default is 0xca0 for KCS.</p>

<p style="margin-left:22%;"><b>irq=val</b></p>

<p style="margin-left:32%;">Define the interrupt to use.
The default is 5. To disable interrupts, set this to 0.</p>

<p style="margin-left:11%;"><b>-device
isa-ipmi-bt,bmc=id[,ioport=val][,irq=val]</b></p>

<p style="margin-left:22%;">Like the KCS interface, but
defines a BT interface. The default port is 0xe4 and the
default interrupt is 5.</p>

<p style="margin-left:11%;"><b>-device
pci-ipmi-kcs,bmc=id</b></p>

<p style="margin-left:22%;">Add a KCS IPMI interafce on the
PCI bus.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>bmc=id</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The BMC to connect to, one of ipmi-bmc-sim or
ipmi-bmc-extern above.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-device
pci-ipmi-bt,bmc=id</b></p>

<p style="margin-left:22%;">Like the KCS interface, but
defines a BT interface on the PCI bus.</p>

<p style="margin-left:11%;"><b>-device
intel-iommu[,option=...]</b></p>

<p style="margin-left:22%;">This is only supported by
<b>-machine q35</b>, which will enable Intel VT-d emulation
within the guest. It supports below options: <b><br>
intremap=on|off (default: auto)</b></p>

<p style="margin-left:32%;">This enables interrupt
remapping feature. It's required to enable complete x2apic.
Currently it only supports kvm kernel-irqchip modes
<b>off</b> or <b>split</b>, while full kernel-irqchip is not
yet supported. The default value is &quot;auto&quot;, which
will be decided by the mode of kernel-irqchip.</p>

<p style="margin-left:22%;"><b>caching-mode=on|off
(default: off)</b></p>

<p style="margin-left:32%;">This enables caching mode for
the VT-d emulated device. When caching-mode is enabled, each
guest DMA buffer mapping will generate an IOTLB invalidation
from the guest IOMMU driver to the vIOMMU device in a
synchronous way. It is required for <b>-device vfio-pci</b>
to work with the VT-d device, because host assigned devices
requires to setup the DMA mapping on the host before guest
DMA starts.</p>

<p style="margin-left:22%;"><b>device-iotlb=on|off
(default: off)</b></p>

<p style="margin-left:32%;">This enables device-iotlb
capability for the emulated VT-d device. So far virtio/vhost
should be the only real user for this parameter, paired with
ats=on configured for the device.</p>

<p style="margin-left:22%;"><b>aw-bits=39|48 (default:
39)</b></p>

<p style="margin-left:32%;">This decides the address width
of IOVA address space. The address space has 39 bits width
for 3-level IOMMU page tables, and 48 bits for 4-level IOMMU
page tables.</p>

<p style="margin-left:22%; margin-top: 1em">Please also
refer to the wiki page for general scenarios of VT-d
emulation in QEMU:
<i>https://wiki.qemu.org/Features/VT-d</i>.</p>

<p style="margin-left:11%;"><b>-name name</b></p>

<p style="margin-left:22%;">Sets the name of the guest.
This name will be displayed in the SDL window caption. The
name will also be used for the VNC server. Also optionally
set the top visible process name in Linux. Naming of
individual threads can also be enabled on Linux to aid
debugging.</p>

<p style="margin-left:11%;"><b>-uuid uuid</b></p>

<p style="margin-left:22%;">Set system UUID.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Block device
options <br>
-fda file <br>
-fdb file</b></p>

<p style="margin-left:22%;">Use file as floppy disk 0/1
image (see the disk images chapter in the System Emulation
Users Guide).</p>

<p style="margin-left:11%;"><b>-hda file <br>
-hdb file <br>
-hdc file <br>
-hdd file</b></p>

<p style="margin-left:22%;">Use file as hard disk 0, 1, 2
or 3 image (see the disk images chapter in the System
Emulation Users Guide).</p>

<p style="margin-left:11%;"><b>-cdrom file</b></p>

<p style="margin-left:22%;">Use file as CD-ROM image (you
cannot use <b>-hdc</b> and <b>-cdrom</b> at the same time).
You can use the host CD-ROM by using <b>/dev/cdrom</b> as
filename.</p>

<p style="margin-left:11%;"><b>-blockdev
option[,option[,option[,...]]]</b></p>

<p style="margin-left:22%;">Define a new block driver node.
Some of the options apply to all block drivers, other
options are only accepted for a specific block driver. See
below for a list of generic options and options for the most
common block drivers.</p>

<p style="margin-left:22%; margin-top: 1em">Options that
expect a reference to another node (e.g. <b>file</b>) can be
given in two ways. Either you specify the node name of an
already existing node (file=node-name), or you define a new
node inline, adding options for the referenced node after a
dot (file.filename=path,file.aio=native).</p>

<p style="margin-left:22%; margin-top: 1em">A block driver
node created with <b>-blockdev</b> can be used for a guest
device by specifying its node name for the <b>drive</b>
property in a <b>-device</b> argument that defines a block
device. <b><br>
Valid options for any block driver node:</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="10%">


<p><b>driver</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>Specifies the block driver to use for the given
node.</p> </td></tr>
</table>

<p style="margin-left:32%;"><b>node-name</b></p>

<p style="margin-left:43%;">This defines the name of the
block driver node by which it will be referenced later. The
name must be unique, i.e. it must not match the name of a
different block driver node, or (if you use <b>-drive</b> as
well) the ID of a drive.</p>

<p style="margin-left:43%; margin-top: 1em">If no node name
is specified, it is automatically generated. The generated
node name is not intended to be predictable and changes
between QEMU invocations. For the top level, an explicit
node name must be specified.</p>

<p style="margin-left:32%;"><b>read-only</b></p>

<p style="margin-left:43%;">Open the node read-only. Guest
write attempts will fail.</p>

<p style="margin-left:43%; margin-top: 1em">Note that some
block drivers support only read-only access, either
generally or in certain configurations. In this case, the
default value <b>read-only=off</b> does not work and the
option must be specified explicitly.</p>

<p style="margin-left:32%;"><b>auto-read-only</b></p>

<p style="margin-left:43%;">If <b>auto-read-only=on</b> is
set, QEMU may fall back to read-only usage even when
<b>read-only=off</b> is requested, or even switch between
modes as needed, e.g. depending on whether the image file is
writable or whether a writing user is attached to the
node.</p>

<p style="margin-left:32%;"><b>force-share</b></p>

<p style="margin-left:43%;">Override the image locking
system of QEMU by forcing the node to utilize weaker shared
access for permissions where it would normally request
exclusive access. When there is the potential for multiple
instances to have the same file open (whether this
invocation of QEMU is the first or the second instance),
both instances must permit shared access for the second
instance to succeed at opening the file.</p>

<p style="margin-left:43%; margin-top: 1em">Enabling
<b>force-share=on</b> requires <b>read-only=on</b>.</p>

<p style="margin-left:32%;"><b>cache.direct</b></p>

<p style="margin-left:43%;">The host page cache can be
avoided with <b>cache.direct=on</b>. This will attempt to do
disk IO directly to the guest's memory. QEMU may still
perform an internal copy of the data.</p>

<p style="margin-left:32%;"><b>cache.no-flush</b></p>

<p style="margin-left:43%;">In case you don't care about
data integrity over host failures, you can use
<b>cache.no-flush=on</b>. This option tells QEMU that it
never needs to write any data to the disk but can instead
keep things in cache. If anything goes wrong, like your host
losing power, the disk storage getting disconnected
accidentally, etc. your image will most probably be rendered
unusable.</p>

<p style="margin-left:32%;"><b>discard=discard</b></p>

<p style="margin-left:43%;">discard is one of
&quot;ignore&quot; (or &quot;off&quot;) or &quot;unmap&quot;
(or &quot;on&quot;) and controls whether <b>discard</b>
(also known as <b>trim</b> or <b>unmap</b>) requests are
ignored or passed to the filesystem. Some machine types may
not support discard requests.</p>


<p style="margin-left:32%;"><b>detect-zeroes=detect-zeroes</b></p>

<p style="margin-left:43%;">detect-zeroes is
&quot;off&quot;, &quot;on&quot; or &quot;unmap&quot; and
enables the automatic conversion of plain zero writes by the
OS to driver specific optimized zero write commands. You may
even choose &quot;unmap&quot; if discard is set to
&quot;unmap&quot; to allow a zero write to be converted to
an <b>unmap</b> operation.</p>

<p style="margin-left:22%;"><b>Driver-specific options for
file</b></p>

<p style="margin-left:32%;">This is the protocol-level
block driver for accessing regular files. <b><br>
filename</b></p>

<p style="margin-left:43%;">The path to the image file in
the local filesystem</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="5%">


<p><b>aio</b></p></td>
<td width="6%"></td>
<td width="57%">


<p>Specifies the AIO backend (threads/native/io_uring,
default: threads)</p></td></tr>
</table>

<p style="margin-left:32%;"><b>locking</b></p>

<p style="margin-left:43%;">Specifies whether the image
file is protected with Linux OFD / POSIX locks. The default
is to use the Linux Open File Descriptor API if available,
otherwise no lock is applied. (auto/on/off, default:
auto)</p>

<p style="margin-left:32%; margin-top: 1em">Example:</p>

<pre style="margin-left:37%; margin-top: 1em">-blockdev driver=file,node-name=disk,filename=disk.img</pre>


<p style="margin-left:22%;"><b>Driver-specific options for
raw</b></p>

<p style="margin-left:32%;">This is the image format block
driver for raw images. It is usually stacked on top of a
protocol level block driver such as <b>file</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="6%">


<p><b>file</b></p></td>
<td width="5%"></td>
<td width="57%">


<p>Reference to or definition of the data source block
driver node (e.g. a <b>file</b> driver node)</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">Example 1:</p>

<pre style="margin-left:37%; margin-top: 1em">-blockdev driver=file,node-name=disk_file,filename=disk.img
-blockdev driver=raw,node-name=disk,file=disk_file</pre>


<p style="margin-left:32%; margin-top: 1em">Example 2:</p>

<pre style="margin-left:37%; margin-top: 1em">-blockdev driver=raw,node-name=disk,file.driver=file,file.filename=disk.img</pre>


<p style="margin-left:22%;"><b>Driver-specific options for
qcow2</b></p>

<p style="margin-left:32%;">This is the image format block
driver for qcow2 images. It is usually stacked on top of a
protocol level block driver such as <b>file</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="6%">


<p><b>file</b></p></td>
<td width="5%"></td>
<td width="57%">


<p>Reference to or definition of the data source block
driver node (e.g. a <b>file</b> driver node)</p></td></tr>
</table>

<p style="margin-left:32%;"><b>backing</b></p>

<p style="margin-left:43%;">Reference to or definition of
the backing file block device (default is taken from the
image file). It is allowed to pass <b>null</b> here in order
to disable the default backing file.</p>

<p style="margin-left:32%;"><b>lazy-refcounts</b></p>

<p style="margin-left:43%;">Whether to enable the lazy
refcounts feature (on/off; default is taken from the image
file)</p>

<p style="margin-left:32%;"><b>cache-size</b></p>

<p style="margin-left:43%;">The maximum total size of the
L2 table and refcount block caches in bytes (default: the
sum of l2-cache-size and refcount-cache-size)</p>

<p style="margin-left:32%;"><b>l2-cache-size</b></p>

<p style="margin-left:43%;">The maximum size of the L2
table cache in bytes (default: if cache-size is not
specified - 32M on Linux platforms, and 8M on non-Linux
platforms; otherwise, as large as possible within the
cache-size, while permitting the requested or the minimal
refcount cache size)</p>

<p style="margin-left:32%;"><b>refcount-cache-size</b></p>

<p style="margin-left:43%;">The maximum size of the
refcount block cache in bytes (default: 4 times the cluster
size; or if cache-size is specified, the part of it which is
not used for the L2 cache)</p>


<p style="margin-left:32%;"><b>cache-clean-interval</b></p>

<p style="margin-left:43%;">Clean unused entries in the L2
and refcount caches. The interval is in seconds. The default
value is 600 on supporting platforms, and 0 on other
platforms. Setting it to 0 disables this feature.</p>


<p style="margin-left:32%;"><b>pass-discard-request</b></p>

<p style="margin-left:43%;">Whether discard requests to the
qcow2 device should be forwarded to the data source (on/off;
default: on if discard=unmap is specified, off
otherwise)</p>


<p style="margin-left:32%;"><b>pass-discard-snapshot</b></p>

<p style="margin-left:43%;">Whether discard requests for
the data source should be issued when a snapshot operation
(e.g. deleting a snapshot) frees clusters in the qcow2 file
(on/off; default: on)</p>

<p style="margin-left:32%;"><b>pass-discard-other</b></p>

<p style="margin-left:43%;">Whether discard requests for
the data source should be issued on other occasions where a
cluster gets freed (on/off; default: off)</p>

<p style="margin-left:32%;"><b>overlap-check</b></p>

<p style="margin-left:43%;">Which overlap checks to perform
for writes to the image (none/constant/cached/all; default:
cached). For details or finer granularity control refer to
the QAPI documentation of <b>blockdev-add</b>.</p>

<p style="margin-left:32%; margin-top: 1em">Example 1:</p>

<pre style="margin-left:37%; margin-top: 1em">-blockdev driver=file,node-name=my_file,filename=/tmp/disk.qcow2
-blockdev driver=qcow2,node-name=hda,file=my_file,overlap-check=none,cache-size=16777216</pre>


<p style="margin-left:32%; margin-top: 1em">Example 2:</p>

<pre style="margin-left:37%; margin-top: 1em">-blockdev driver=qcow2,node-name=disk,file.driver=http,file.filename=http://example.com/image.qcow2</pre>


<p style="margin-left:22%;"><b>Driver-specific options for
other drivers</b></p>

<p style="margin-left:32%;">Please refer to the QAPI
documentation of the <b>blockdev-add</b> QMP command.</p>

<p style="margin-left:11%;"><b>-drive
option[,option[,option[,...]]]</b></p>

<p style="margin-left:22%;">Define a new drive. This
includes creating a block driver node (the backend) as well
as a guest device, and is mostly a shortcut for defining the
corresponding <b>-blockdev</b> and <b>-device</b>
options.</p>

<p style="margin-left:22%; margin-top: 1em"><b>-drive</b>
accepts all options that are accepted by <b>-blockdev</b>.
In addition, it knows the following options: <b><br>
file=file</b></p>

<p style="margin-left:32%;">This option defines which disk
image (see the disk images chapter in the System Emulation
Users Guide) to use with this drive. If the filename
contains comma, you must double it (for instance,
&quot;file=my,,file&quot; to use file
&quot;my,file&quot;).</p>

<p style="margin-left:32%; margin-top: 1em">Special files
such as iSCSI devices can be specified using protocol
specific URLs. See the section for &quot;Device URL
Syntax&quot; for more information.</p>

<p style="margin-left:22%;"><b>if=interface</b></p>

<p style="margin-left:32%;">This option defines on which
type on interface the drive is connected. Available types
are: ide, scsi, sd, mtd, floppy, pflash, virtio, none.</p>

<p style="margin-left:22%;"><b>bus=bus,unit=unit</b></p>

<p style="margin-left:32%;">These options define where is
connected the drive by defining the bus number and the unit
id.</p>

<p style="margin-left:22%;"><b>index=index</b></p>

<p style="margin-left:32%;">This option defines where is
connected the drive by using an index in the list of
available connectors of a given interface type.</p>

<p style="margin-left:22%;"><b>media=media</b></p>

<p style="margin-left:32%;">This option defines the type of
the media: disk or cdrom.</p>

<p style="margin-left:22%;"><b>snapshot=snapshot</b></p>

<p style="margin-left:32%;">snapshot is &quot;on&quot; or
&quot;off&quot; and controls snapshot mode for the given
drive (see <b>-snapshot</b>).</p>

<p style="margin-left:22%;"><b>cache=cache</b></p>

<p style="margin-left:32%;">cache is &quot;none&quot;,
&quot;writeback&quot;, &quot;unsafe&quot;,
&quot;directsync&quot; or &quot;writethrough&quot; and
controls how the host cache is used to access block data.
This is a shortcut that sets the <b>cache.direct</b> and
<b>cache.no-flush</b> options (as in <b>-blockdev</b>), and
additionally <b>cache.writeback</b>, which provides a
default for the <b>write-cache</b> option of block guest
devices (as in <b>-device</b>). The modes correspond to the
following settings:</p>

<p style="margin-left:32%; margin-top: 1em">The default
mode is <b>cache=writeback</b>.</p>

<p style="margin-left:22%;"><b>aio=aio</b></p>

<p style="margin-left:32%;">aio is &quot;threads&quot;,
&quot;native&quot;, or &quot;io_uring&quot; and selects
between pthread based disk I/O, native Linux AIO, or Linux
io_uring API.</p>

<p style="margin-left:22%;"><b>format=format</b></p>

<p style="margin-left:32%;">Specify which disk format will
be used rather than detecting the format. Can be used to
specify format=raw to avoid interpreting an untrusted format
header.</p>


<p style="margin-left:22%;"><b>werror=action,rerror=action</b></p>

<p style="margin-left:32%;">Specify which action to take on
write and read errors. Valid actions are: &quot;ignore&quot;
(ignore the error and try to continue), &quot;stop&quot;
(pause QEMU), &quot;report&quot; (report the error to the
guest), &quot;enospc&quot; (pause QEMU only if the host disk
is full; report the error to the guest otherwise). The
default setting is <b>werror=enospc</b> and
<b>rerror=report</b>.</p>


<p style="margin-left:22%;"><b>copy-on-read=copy-on-read</b></p>

<p style="margin-left:32%;">copy-on-read is &quot;on&quot;
or &quot;off&quot; and enables whether to copy read backing
file sectors into the image file.</p>


<p style="margin-left:22%;"><b>bps=b,bps_rd=r,bps_wr=w</b></p>

<p style="margin-left:32%;">Specify bandwidth throttling
limits in bytes per second, either for all request types or
for reads or writes only. Small values can lead to timeouts
or hangs inside the guest. A safe minimum for disks is 2
MB/s.</p>


<p style="margin-left:22%;"><b>bps_max=bm,bps_rd_max=rm,bps_wr_max=wm</b></p>

<p style="margin-left:32%;">Specify bursts in bytes per
second, either for all request types or for reads or writes
only. Bursts allow the guest I/O to spike above the limit
temporarily.</p>


<p style="margin-left:22%;"><b>iops=i,iops_rd=r,iops_wr=w</b></p>

<p style="margin-left:32%;">Specify request rate limits in
requests per second, either for all request types or for
reads or writes only.</p>


<p style="margin-left:22%;"><b>iops_max=bm,iops_rd_max=rm,iops_wr_max=wm</b></p>

<p style="margin-left:32%;">Specify bursts in requests per
second, either for all request types or for reads or writes
only. Bursts allow the guest I/O to spike above the limit
temporarily.</p>

<p style="margin-left:22%;"><b>iops_size=is</b></p>

<p style="margin-left:32%;">Let every is bytes of a request
count as a new request for iops throttling purposes. Use
this option to prevent guests from circumventing iops limits
by sending fewer but larger requests.</p>

<p style="margin-left:22%;"><b>group=g</b></p>

<p style="margin-left:32%;">Join a throttling quota group
with given name g. All drives that are members of the same
group are accounted for together. Use this option to prevent
guests from circumventing throttling limits by using many
small disks instead of a single larger disk.</p>

<p style="margin-left:22%; margin-top: 1em">By default, the
<b>cache.writeback=on</b> mode is used. It will report data
writes as completed as soon as the data is present in the
host page cache. This is safe as long as your guest OS makes
sure to correctly flush disk caches where needed. If your
guest OS does not handle volatile disk write caches
correctly and your host crashes or loses power, then the
guest may experience data corruption.</p>

<p style="margin-left:22%; margin-top: 1em">For such
guests, you should consider using
<b>cache.writeback=off</b>. This means that the host page
cache will be used to read and write data, but write
notification will be sent to the guest only after QEMU has
made sure to flush each write to the disk. Be aware that
this has a major impact on performance.</p>

<p style="margin-left:22%; margin-top: 1em">When using the
<b>-snapshot</b> option, unsafe caching is always used.</p>

<p style="margin-left:22%; margin-top: 1em">Copy-on-read
avoids accessing the same backing file sectors repeatedly
and is useful when the backing file is over a slow network.
By default copy-on-read is off.</p>

<p style="margin-left:22%; margin-top: 1em">Instead of
<b>-cdrom</b> you can use:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -drive file=file,index=2,media=cdrom</pre>


<p style="margin-left:22%; margin-top: 1em">Instead of
<b>-hda</b>, <b>-hdb</b>, <b>-hdc</b>, <b>-hdd</b>, you can
use:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -drive file=file,index=0,media=disk
qemu-system-x86_64 -drive file=file,index=1,media=disk
qemu-system-x86_64 -drive file=file,index=2,media=disk
qemu-system-x86_64 -drive file=file,index=3,media=disk</pre>


<p style="margin-left:22%; margin-top: 1em">You can open an
image using pre-opened file descriptors from an fd set:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 \
 -add-fd fd=3,set=2,opaque=&quot;rdwr:/path/to/file&quot; \
 -add-fd fd=4,set=2,opaque=&quot;rdonly:/path/to/file&quot; \
 -drive file=/dev/fdset/2,index=0,media=disk</pre>


<p style="margin-left:22%; margin-top: 1em">You can connect
a CDROM to the slave of ide0:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -drive file=file,if=ide,index=1,media=cdrom</pre>


<p style="margin-left:22%; margin-top: 1em">If you don't
specify the &quot;file=&quot; argument, you define an empty
drive:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -drive if=ide,index=1,media=cdrom</pre>


<p style="margin-left:22%; margin-top: 1em">Instead of
<b>-fda</b>, <b>-fdb</b>, you can use:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -drive file=file,index=0,if=floppy
qemu-system-x86_64 -drive file=file,index=1,if=floppy</pre>


<p style="margin-left:22%; margin-top: 1em">By default,
interface is &quot;ide&quot; and index is automatically
incremented:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -drive file=a -drive file=b&quot;</pre>


<p style="margin-left:22%; margin-top: 1em">is interpreted
like:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -hda a -hdb b</pre>


<p style="margin-left:11%;"><b>-mtdblock file</b></p>

<p style="margin-left:22%;">Use file as on-board Flash
memory image.</p>

<p style="margin-left:11%;"><b>-sd file</b></p>

<p style="margin-left:22%;">Use file as SecureDigital card
image.</p>

<p style="margin-left:11%;"><b>-pflash file</b></p>

<p style="margin-left:22%;">Use file as a parallel flash
image.</p>

<p style="margin-left:11%;"><b>-snapshot</b></p>

<p style="margin-left:22%;">Write to temporary files
instead of disk image files. In this case, the raw disk
image you use is not written back. You can however force the
write back by pressing C-a s (see the disk images chapter in
the System Emulation Users Guide).</p>

<p style="margin-left:11%;"><b>-fsdev
local,id=id,path=path,security_model=security_model <br>

[,writeout=writeout][,readonly=on][,fmode=fmode][,dmode=dmode]
<br>
[,throttling.option=value[,throttling.option=value[,...]]]
<br>
-fsdev
proxy,id=id,socket=socket[,writeout=writeout][,readonly=on]
<br>
-fsdev
proxy,id=id,sock_fd=sock_fd[,writeout=writeout][,readonly=on]
<br>
-fsdev synth,id=id[,readonly=on]</b></p>

<p style="margin-left:22%;">Define a new file system
device. Valid options are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>local</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Accesses to the filesystem are done by QEMU.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>proxy</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Accesses to the filesystem are done by
virtfs-proxy-helper(1).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>synth</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Synthetic filesystem, only used by QTests.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>id=id</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Specifies identifier for this device.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>path=path</b></p>

<p style="margin-left:32%;">Specifies the export path for
the file system device. Files under this path will be
available to the 9p client on the guest.</p>


<p style="margin-left:22%;"><b>security_model=security_model</b></p>

<p style="margin-left:32%;">Specifies the security model to
be used for this export path. Supported security models are
&quot;passthrough&quot;, &quot;mapped-xattr&quot;,
&quot;mapped-file&quot; and &quot;none&quot;. In
&quot;passthrough&quot; security model, files are stored
using the same credentials as they are created on the guest.
This requires QEMU to run as root. In
&quot;mapped-xattr&quot; security model, some of the file
attributes like uid, gid, mode bits and link target are
stored as file attributes. For &quot;mapped-file&quot; these
attributes are stored in the hidden .virtfs_metadata
directory. Directories exported by this security model
cannot interact with other unix tools. &quot;none&quot;
security model is same as passthrough except the sever won't
report failures if it fails to set file attributes like
ownership. Security model is mandatory only for local
fsdriver. Other fsdrivers (like proxy) don't take security
model as a parameter.</p>

<p style="margin-left:22%;"><b>writeout=writeout</b></p>

<p style="margin-left:32%;">This is an optional argument.
The only supported value is &quot;immediate&quot;. This
means that host page cache will be used to read and write
data but write notification will be sent to the guest only
when the data has been reported as written by the storage
subsystem.</p>

<p style="margin-left:22%;"><b>readonly=on</b></p>

<p style="margin-left:32%;">Enables exporting 9p share as a
readonly mount for guests. By default read-write access is
given.</p>

<p style="margin-left:22%;"><b>socket=socket</b></p>

<p style="margin-left:32%;">Enables proxy filesystem driver
to use passed socket file for communicating with
virtfs-proxy-helper(1).</p>

<p style="margin-left:22%;"><b>sock_fd=sock_fd</b></p>

<p style="margin-left:32%;">Enables proxy filesystem driver
to use passed socket descriptor for communicating with
virtfs-proxy-helper(1). Usually a helper like libvirt will
create socketpair and pass one of the fds as sock_fd.</p>

<p style="margin-left:22%;"><b>fmode=fmode</b></p>

<p style="margin-left:32%;">Specifies the default mode for
newly created files on the host. Works only with security
models &quot;mapped-xattr&quot; and
&quot;mapped-file&quot;.</p>

<p style="margin-left:22%;"><b>dmode=dmode</b></p>

<p style="margin-left:32%;">Specifies the default mode for
newly created directories on the host. Works only with
security models &quot;mapped-xattr&quot; and
&quot;mapped-file&quot;.</p>


<p style="margin-left:22%;"><b>throttling.bps-total=b,throttling.bps-read=r,throttling.bps-write=w</b></p>

<p style="margin-left:32%;">Specify bandwidth throttling
limits in bytes per second, either for all request types or
for reads or writes only.</p>


<p style="margin-left:22%;"><b>throttling.bps-total-max=bm,bps-read-max=rm,bps-write-max=wm</b></p>

<p style="margin-left:32%;">Specify bursts in bytes per
second, either for all request types or for reads or writes
only. Bursts allow the guest I/O to spike above the limit
temporarily.</p>


<p style="margin-left:22%;"><b>throttling.iops-total=i,throttling.iops-read=r,
<br>
throttling.iops-write=w</b></p>

<p style="margin-left:32%;">Specify request rate limits in
requests per second, either for all request types or for
reads or writes only.</p>


<p style="margin-left:22%;"><b>throttling.iops-total-max=im,throttling.iops-read-max=irm,
<br>
throttling.iops-write-max=iwm</b></p>

<p style="margin-left:32%;">Specify bursts in requests per
second, either for all request types or for reads or writes
only. Bursts allow the guest I/O to spike above the limit
temporarily.</p>


<p style="margin-left:22%;"><b>throttling.iops-size=is</b></p>

<p style="margin-left:32%;">Let every is bytes of a request
count as a new request for iops throttling purposes.</p>

<p style="margin-left:22%; margin-top: 1em">-fsdev option
is used along with -device driver
&quot;virtio-9p-...&quot;.</p>

<p style="margin-left:11%;"><b>-device
virtio-9p-type,fsdev=id,mount_tag=mount_tag</b></p>

<p style="margin-left:22%;">Options for virtio-9p-...
driver are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>type</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Specifies the variant to be used. Supported values are
&quot;pci&quot;, &quot;ccw&quot; or &quot;device&quot;,
depending on the machine type.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>fsdev=id</b></p>

<p style="margin-left:32%;">Specifies the id value
specified along with -fsdev option.</p>

<p style="margin-left:22%;"><b>mount_tag=mount_tag</b></p>

<p style="margin-left:32%;">Specifies the tag name to be
used by the guest to mount this export point.</p>

<p style="margin-left:11%;"><b>-virtfs
local,path=path,mount_tag=mount_tag <br>

,security_model=security_model[,writeout=writeout][,readonly=on]
<br>
[,fmode=fmode][,dmode=dmode][,multidevs=multidevs] <br>
-virtfs proxy,socket=socket,mount_tag=mount_tag <br>
[,writeout=writeout][,readonly=on] <br>
-virtfs proxy,sock_fd=sock_fd,mount_tag=mount_tag <br>
[,writeout=writeout][,readonly=on] <br>
-virtfs synth,mount_tag=mount_tag</b></p>

<p style="margin-left:22%;">Define a new virtual filesystem
device and expose it to the guest using a virtio-9p-device
(a.k.a. 9pfs), which essentially means that a certain
directory on host is made directly accessible by guest as a
pass-through file system by using the 9P network protocol
for communication between host and guests, if desired even
accessible, shared by several guests simultaniously.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<b>-virtfs</b> is actually just a convenience shortcut for
its generalized form <b>-fsdev -device
virtio-9p-pci</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The general
form of pass-through file system options are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>local</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Accesses to the filesystem are done by QEMU.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>proxy</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Accesses to the filesystem are done by
virtfs-proxy-helper(1).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>synth</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Synthetic filesystem, only used by QTests.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>id=id</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Specifies identifier for the filesystem device</p></td></tr>
</table>

<p style="margin-left:22%;"><b>path=path</b></p>

<p style="margin-left:32%;">Specifies the export path for
the file system device. Files under this path will be
available to the 9p client on the guest.</p>


<p style="margin-left:22%;"><b>security_model=security_model</b></p>

<p style="margin-left:32%;">Specifies the security model to
be used for this export path. Supported security models are
&quot;passthrough&quot;, &quot;mapped-xattr&quot;,
&quot;mapped-file&quot; and &quot;none&quot;. In
&quot;passthrough&quot; security model, files are stored
using the same credentials as they are created on the guest.
This requires QEMU to run as root. In
&quot;mapped-xattr&quot; security model, some of the file
attributes like uid, gid, mode bits and link target are
stored as file attributes. For &quot;mapped-file&quot; these
attributes are stored in the hidden .virtfs_metadata
directory. Directories exported by this security model
cannot interact with other unix tools. &quot;none&quot;
security model is same as passthrough except the sever won't
report failures if it fails to set file attributes like
ownership. Security model is mandatory only for local
fsdriver. Other fsdrivers (like proxy) don't take security
model as a parameter.</p>

<p style="margin-left:22%;"><b>writeout=writeout</b></p>

<p style="margin-left:32%;">This is an optional argument.
The only supported value is &quot;immediate&quot;. This
means that host page cache will be used to read and write
data but write notification will be sent to the guest only
when the data has been reported as written by the storage
subsystem.</p>

<p style="margin-left:22%;"><b>readonly=on</b></p>

<p style="margin-left:32%;">Enables exporting 9p share as a
readonly mount for guests. By default read-write access is
given.</p>

<p style="margin-left:22%;"><b>socket=socket</b></p>

<p style="margin-left:32%;">Enables proxy filesystem driver
to use passed socket file for communicating with
virtfs-proxy-helper(1). Usually a helper like libvirt will
create socketpair and pass one of the fds as sock_fd.</p>

<p style="margin-left:22%;"><b>sock_fd</b></p>

<p style="margin-left:32%;">Enables proxy filesystem driver
to use passed 'sock_fd' as the socket descriptor for
interfacing with virtfs-proxy-helper(1).</p>

<p style="margin-left:22%;"><b>fmode=fmode</b></p>

<p style="margin-left:32%;">Specifies the default mode for
newly created files on the host. Works only with security
models &quot;mapped-xattr&quot; and
&quot;mapped-file&quot;.</p>

<p style="margin-left:22%;"><b>dmode=dmode</b></p>

<p style="margin-left:32%;">Specifies the default mode for
newly created directories on the host. Works only with
security models &quot;mapped-xattr&quot; and
&quot;mapped-file&quot;.</p>

<p style="margin-left:22%;"><b>mount_tag=mount_tag</b></p>

<p style="margin-left:32%;">Specifies the tag name to be
used by the guest to mount this export point.</p>

<p style="margin-left:22%;"><b>multidevs=multidevs</b></p>

<p style="margin-left:32%;">Specifies how to deal with
multiple devices being shared with a 9p export. Supported
behaviours are either &quot;remap&quot;, &quot;forbid&quot;
or &quot;warn&quot;. The latter is the default behaviour on
which virtfs 9p expects only one device to be shared with
the same export, and if more than one device is shared and
accessed via the same 9p export then only a warning message
is logged (once) by qemu on host side. In order to avoid
file ID collisions on guest you should either create a
separate virtfs export for each device to be shared with
guests (recommended way) or you might use &quot;remap&quot;
instead which allows you to share multiple devices with only
one export instead, which is achieved by remapping the
original inode numbers from host to guest in a way that
would prevent such collisions. Remapping inodes in such use
cases is required because the original device IDs from host
are never passed and exposed on guest. Instead all files of
an export shared with virtfs always share the same device id
on guest. So two files with identical inode numbers but from
actually different devices on host would otherwise cause a
file ID collision and hence potential misbehaviours on
guest. &quot;forbid&quot; on the other hand assumes like
&quot;warn&quot; that only one device is shared by the same
export, however it will not only log a warning message but
also deny access to additional devices on guest. Note though
that &quot;forbid&quot; does currently not block all
possible file access operations (e.g. readdir() would still
return entries from other devices).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>-iscsi</b></p></td>
<td width="2%"></td>
<td width="53%">


<p>Configure iSCSI session parameters.</p></td>
<td width="25%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>USB
convenience options</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>-usb</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">Enable USB emulation on machine
types with an on-board USB host controller (if not enabled
by default). Note that on-board USB host controllers may not
support USB 3.0. In this case <b>-device qemu-xhci</b> can
be used instead on machines with PCI.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-usbdevice devname</b></p>

<p style="margin-left:22%;">Add the USB device devname, and
enable an on-board USB controller if possible and necessary
(just like it can be done via <b>-machine usb=on</b>). Note
that this option is mainly intended for the user's
convenience only. More fine-grained control can be achieved
by selecting a USB host controller (if necessary) and the
desired USB device via the <b>-device</b> option instead.
For example, instead of using <b>-usbdevice mouse</b> it is
possible to use <b>-device qemu-xhci -device usb-mouse</b>
to connect the USB mouse to a USB 3.0 controller instead (at
least on machines that support PCI and do not have an USB
controller enabled by default yet). For more details, see
the chapter about Connecting USB devices in the System
Emulation Users Guide. Possible devices for devname are:
<b><br>
braille</b></p>

<p style="margin-left:32%;">Braille device. This will use
BrlAPI to display the braille output on a real or fake
device (i.e. it also creates a corresponding <b>braille</b>
chardev automatically beside the <b>usb-braille</b> USB
device).</p>

<p style="margin-left:22%;"><b>keyboard</b></p>

<p style="margin-left:32%;">Standard USB keyboard. Will
override the PS/2 keyboard (if present).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>mouse</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Virtual Mouse. This will override the PS/2 mouse
emulation when activated.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>tablet</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Pointer device that uses absolute coordinates (like a
touchscreen). This means QEMU is able to report the mouse
position without having to grab the mouse. Also overrides
the PS/2 mouse emulation when activated.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>wacom-tablet</b></p>

<p style="margin-left:32%;">Wacom PenPartner USB
tablet.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Display
options <br>
-display type</b></p>

<p style="margin-left:22%;">Select type of display to use.
This option is a replacement for the old style
-sdl/-curses/... options. Use <b>-display help</b> to list
the available display types. Valid values for type are
<b><br>
spice-app[,gl=on|off]</b></p>

<p style="margin-left:32%;">Start QEMU as a Spice server
and launch the default Spice client application. The Spice
server will redirect the serial consoles and QEMU monitors.
(Since 4.0)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>sdl</b></p></td>
<td width="6%"></td>
<td width="68%">


<p>Display video output via SDL (usually in a separate
graphics window; see the SDL documentation for other
possibilities). Valid parameters are:</p></td></tr>
</table>


<p style="margin-left:32%; margin-top: 1em"><b>grab-mod=&lt;mods&gt;</b>
: Used to select the modifier keys for toggling the mouse
grabbing in conjunction with the &quot;g&quot; key.
<b>&lt;mods&gt;</b> can be either <b>lshift-lctrl-lalt</b>
or <b>rctrl</b>.</p>


<p style="margin-left:32%; margin-top: 1em"><b>alt_grab=on|off</b>
: Use Control+Alt+Shift-g to toggle mouse grabbing. This
parameter is deprecated - use <b>grab-mod</b> instead.</p>


<p style="margin-left:32%; margin-top: 1em"><b>ctrl_grab=on|off</b>
: Use Right-Control-g to toggle mouse grabbing. This
parameter is deprecated - use <b>grab-mod</b> instead.</p>


<p style="margin-left:32%; margin-top: 1em"><b>gl=on|off|core|es</b>
: Use OpenGL for displaying</p>


<p style="margin-left:32%; margin-top: 1em"><b>show-cursor=on|off</b>
: Force showing the mouse cursor</p>


<p style="margin-left:32%; margin-top: 1em"><b>window-close=on|off</b>
: Allow to quit qemu with window close button</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>gtk</b></p></td>
<td width="6%"></td>
<td width="68%">


<p style="margin-top: 1em">Display video output in a GTK
window. This interface provides drop-down menus and other UI
elements to configure and control the VM during runtime.
Valid parameters are:</p></td></tr>
</table>


<p style="margin-left:32%; margin-top: 1em"><b>full-screen=on|off</b>
: Start in fullscreen mode</p>


<p style="margin-left:32%; margin-top: 1em"><b>gl=on|off</b>
: Use OpenGL for displaying</p>


<p style="margin-left:32%; margin-top: 1em"><b>grab-on-hover=on|off</b>
: Grab keyboard input on mouse hover</p>


<p style="margin-left:32%; margin-top: 1em"><b>show-cursor=on|off</b>
: Force showing the mouse cursor</p>


<p style="margin-left:32%; margin-top: 1em"><b>window-close=on|off</b>
: Allow to quit qemu with window close button</p>


<p style="margin-left:22%;"><b>curses[,charset=&lt;encoding&gt;]</b></p>

<p style="margin-left:32%;">Display video output via
curses. For graphics device models which support a text
mode, QEMU can display this output using a curses/ncurses
interface. Nothing is displayed when the graphics device is
in graphical mode or if the graphics device does not support
a text mode. Generally only the VGA device models support
text mode. The font charset used by the guest can be
specified with the <b>charset</b> option, for example
<b>charset=CP850</b> for IBM CP850 encoding. The default is
<b>CP437</b>.</p>


<p style="margin-left:22%;"><b>egl-headless[,rendernode=&lt;file&gt;]</b></p>

<p style="margin-left:32%;">Offload all OpenGL operations
to a local DRI device. For any graphical display, this
display needs to be paired with either VNC or SPICE
displays.</p>

<p style="margin-left:22%;"><b>vnc=&lt;display&gt;</b></p>

<p style="margin-left:32%;">Start a VNC server on display
&lt;display&gt;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Do not display video output. The guest will still see an
emulated graphics card, but its output will not be displayed
to the QEMU user. This option differs from the -nographic
option in that it only affects what is done with video
output; -nographic also changes the destination of the
serial and parallel port data.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-nographic</b></p>

<p style="margin-left:22%;">Normally, if QEMU is compiled
with graphical window support, it displays output such as
guest graphics, guest console, and the QEMU monitor in a
window. With this option, you can totally disable graphical
output so that QEMU is a simple command line application.
The emulated serial port is redirected on the console and
muxed with the monitor (unless redirected elsewhere
explicitly). Therefore, you can still use QEMU to debug a
Linux kernel with a serial console. Use C-a h for help on
switching between the console and monitor.</p>

<p style="margin-left:11%;"><b>-curses</b></p>

<p style="margin-left:22%;">Normally, if QEMU is compiled
with graphical window support, it displays output such as
guest graphics, guest console, and the QEMU monitor in a
window. With this option, QEMU can display the VGA output
when in text mode using a curses/ncurses interface. Nothing
is displayed in graphical mode.</p>

<p style="margin-left:11%;"><b>-alt-grab</b></p>

<p style="margin-left:22%;">Use Ctrl-Alt-Shift to grab
mouse (instead of Ctrl-Alt). Note that this also affects the
special keys (for fullscreen, monitor-mode switching, etc).
This option is deprecated - please use <b>-display
sdl,grab-mod=lshift-lctrl-lalt</b> instead.</p>

<p style="margin-left:11%;"><b>-ctrl-grab</b></p>

<p style="margin-left:22%;">Use Right-Ctrl to grab mouse
(instead of Ctrl-Alt). Note that this also affects the
special keys (for fullscreen, monitor-mode switching, etc).
This option is deprecated - please use <b>-display
sdl,grab-mod=rctrl</b> instead.</p>

<p style="margin-left:11%;"><b>-no-quit</b></p>

<p style="margin-left:22%;">Disable window close capability
(SDL and GTK only). This option is deprecated, please use
<b>-display ...,window-close=off</b> instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>-sdl</b></p></td>
<td width="5%"></td>
<td width="16%">


<p>Enable SDL.</p></td>
<td width="62%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>-spice
option[,option[,...]]</b></p>

<p style="margin-left:22%;">Enable the spice remote desktop
protocol. Valid options are <b><br>
port=&lt;nr&gt;</b></p>

<p style="margin-left:32%;">Set the TCP port spice is
listening on for plaintext channels.</p>

<p style="margin-left:22%;"><b>addr=&lt;addr&gt;</b></p>

<p style="margin-left:32%;">Set the IP address spice is
listening on. Default is any address.</p>

<p style="margin-left:22%;"><b>ipv4=on|off; ipv6=on|off;
unix=on|off</b></p>

<p style="margin-left:32%;">Force using the specified IP
version.</p>


<p style="margin-left:22%;"><b>password=&lt;string&gt;</b></p>

<p style="margin-left:32%;">Set the password you need to
authenticate.</p>

<p style="margin-left:32%; margin-top: 1em">This option is
deprecated and insecure because it leaves the password
visible in the process listing. Use <b>password-secret</b>
instead.</p>


<p style="margin-left:22%;"><b>password-secret=&lt;secret-id&gt;</b></p>

<p style="margin-left:32%;">Set the ID of the <b>secret</b>
object containing the password you need to authenticate.</p>

<p style="margin-left:22%;"><b>sasl=on|off</b></p>

<p style="margin-left:32%;">Require that the client use
SASL to authenticate with the spice. The exact choice of
authentication method used is controlled from the system /
user's SASL configuration file for the 'qemu' service. This
is typically found in /etc/sasl2/qemu.conf. If running QEMU
as an unprivileged user, an environment variable
SASL_CONF_PATH can be used to make it search alternate
locations for the service config. While some SASL auth
methods can also provide data encryption (eg GSSAPI), it is
recommended that SASL always be combined with the 'tls' and
'x509' settings to enable use of SSL and server
certificates. This ensures a data encryption preventing
compromise of authentication credentials.</p>


<p style="margin-left:22%;"><b>disable-ticketing=on|off</b></p>

<p style="margin-left:32%;">Allow client connects without
authentication.</p>


<p style="margin-left:22%;"><b>disable-copy-paste=on|off</b></p>

<p style="margin-left:32%;">Disable copy paste between the
client and the guest.</p>


<p style="margin-left:22%;"><b>disable-agent-file-xfer=on|off</b></p>

<p style="margin-left:32%;">Disable spice-vdagent based
file-xfer between the client and the guest.</p>

<p style="margin-left:22%;"><b>tls-port=&lt;nr&gt;</b></p>

<p style="margin-left:32%;">Set the TCP port spice is
listening on for encrypted channels.</p>


<p style="margin-left:22%;"><b>x509-dir=&lt;dir&gt;</b></p>

<p style="margin-left:32%;">Set the x509 file directory.
Expects same filenames as -vnc $display,x509=$dir</p>

<p style="margin-left:22%;"><b>x509-key-file=&lt;file&gt;;
x509-key-password=&lt;file&gt;; <br>
x509-cert-file=&lt;file&gt;; x509-cacert-file=&lt;file&gt;;
<br>
x509-dh-key-file=&lt;file&gt;</b></p>

<p style="margin-left:32%;">The x509 file names can also be
configured individually.</p>


<p style="margin-left:22%;"><b>tls-ciphers=&lt;list&gt;</b></p>

<p style="margin-left:32%;">Specify which ciphers to
use.</p>


<p style="margin-left:22%;"><b>tls-channel=[main|display|cursor|inputs|record|playback];
<br>

plaintext-channel=[main|display|cursor|inputs|record|playback]</b></p>

<p style="margin-left:32%;">Force specific channel to be
used with or without TLS encryption. The options can be
specified multiple times to configure multiple channels. The
special name &quot;default&quot; can be used to set the
default mode. For channels which are not explicitly forced
into one mode the spice client is allowed to pick
tls/plaintext as he pleases.</p>


<p style="margin-left:22%;"><b>image-compression=[auto_glz|auto_lz|quic|glz|lz|off]</b></p>

<p style="margin-left:32%;">Configure image compression
(lossless). Default is auto_glz.</p>


<p style="margin-left:22%;"><b>jpeg-wan-compression=[auto|never|always];
<br>
zlib-glz-wan-compression=[auto|never|always]</b></p>

<p style="margin-left:32%;">Configure wan image compression
(lossy for slow links). Default is auto.</p>


<p style="margin-left:22%;"><b>streaming-video=[off|all|filter]</b></p>

<p style="margin-left:32%;">Configure video stream
detection. Default is off.</p>


<p style="margin-left:22%;"><b>agent-mouse=[on|off]</b></p>

<p style="margin-left:32%;">Enable/disable passing mouse
events via vdagent. Default is on.</p>


<p style="margin-left:22%;"><b>playback-compression=[on|off]</b></p>

<p style="margin-left:32%;">Enable/disable audio stream
compression (using celt 0.5.1). Default is on.</p>


<p style="margin-left:22%;"><b>seamless-migration=[on|off]</b></p>

<p style="margin-left:32%;">Enable/disable spice seamless
migration. Default is off.</p>

<p style="margin-left:22%;"><b>gl=[on|off]</b></p>

<p style="margin-left:32%;">Enable/disable OpenGL context.
Default is off.</p>


<p style="margin-left:22%;"><b>rendernode=&lt;file&gt;</b></p>

<p style="margin-left:32%;">DRM render node for OpenGL
rendering. If not specified, it will pick the first
available. (Since 2.9)</p>

<p style="margin-left:11%;"><b>-portrait</b></p>

<p style="margin-left:22%;">Rotate graphical output 90 deg
left (only PXA LCD).</p>

<p style="margin-left:11%;"><b>-rotate deg</b></p>

<p style="margin-left:22%;">Rotate graphical output some
deg left (only PXA LCD).</p>

<p style="margin-left:11%;"><b>-vga type</b></p>

<p style="margin-left:22%;">Select type of VGA card to
emulate. Valid values for type are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>cirrus</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Cirrus Logic GD5446 Video card. All Windows versions
starting from Windows 95 should recognize and use this
graphic card. For optimal performances, use 16 bit color
depth in the guest and the host OS. (This card was the
default before QEMU 2.2)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>std</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Standard VGA card with Bochs VBE extensions. If your
guest OS supports the VESA 2.0 VBE extensions (e.g. Windows
XP) and if you want to use high resolution modes (&gt;=
1280x1024x16) then you should use this option. (This card is
the default since QEMU 2.2)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>vmware</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>VMWare SVGA-II compatible adapter. Use it if you have
sufficiently recent XFree86/XOrg server or Windows guest
with a driver for this card.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>qxl</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>QXL paravirtual graphic card. It is VGA compatible
(including VESA 2.0 VBE support). Works best with qxl guest
drivers installed though. Recommended choice when using the
spice protocol.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>tcx</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>(sun4m only) Sun TCX framebuffer. This is the default
framebuffer for sun4m machines and offers both 8-bit and
24-bit colour depths at a fixed resolution of 1024x768.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>cg3</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>(sun4m only) Sun cgthree framebuffer. This is a simple
8-bit framebuffer for sun4m machines available in both
1024x768 (OpenBIOS) and 1152x900 (OBP) resolutions aimed at
people wishing to run older Solaris versions.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>virtio</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Virtio VGA card.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>none</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Disable VGA card.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-full-screen</b></p>

<p style="margin-left:22%;">Start in full screen.</p>

<p style="margin-left:11%;"><b>-g</b>
<i>width</i><b>x</b><i>height</i><b>[x</b><i>depth</i><b>]</b></p>

<p style="margin-left:22%;">Set the initial graphical
resolution and depth (PPC, SPARC only).</p>

<p style="margin-left:22%; margin-top: 1em">For PPC the
default is 800x600x32.</p>

<p style="margin-left:22%; margin-top: 1em">For SPARC with
the TCX graphics device, the default is 1024x768x8 with the
option of 1024x768x24. For cgthree, the default is
1024x768x8 with the option of 1152x900x8 for people who wish
to use OBP.</p>

<p style="margin-left:11%;"><b>-vnc
display[,option[,option[,...]]]</b></p>

<p style="margin-left:22%;">Normally, if QEMU is compiled
with graphical window support, it displays output such as
guest graphics, guest console, and the QEMU monitor in a
window. With this option, you can have QEMU listen on VNC
display display and redirect the VGA display over the VNC
session. It is very useful to enable the usb tablet device
when using this option (option <b>-device usb-tablet</b>).
When using the VNC display, you must use the <b>-k</b>
parameter to set the keyboard layout if you are not using
en-us. Valid syntax for the display is</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>to=L</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>With this option, QEMU will try next available VNC
displays, until the number L, if the origianlly defined
&quot;-vnc display&quot; is not available, e.g. port
5900+display is already used by another application. By
default, to=0.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>host:d</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>TCP connections will only be allowed from host on
display d. By convention the TCP port is 5900+d. Optionally,
host can be omitted in which case the server will accept
connections from any host.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>unix:path</b></p>

<p style="margin-left:32%;">Connections will be allowed
over UNIX domain sockets where path is the location of a
unix socket to listen for connections on.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>VNC is initialized but not started. The monitor
<b>change</b> command can be used to later start the VNC
server.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Following the
display value there may be one or more option flags
separated by commas. Valid options are <b><br>
reverse=on|off</b></p>

<p style="margin-left:32%;">Connect to a listening VNC
client via a &quot;reverse&quot; connection. The client is
specified by the display. For reverse network connections
(host:d,``reverse``), the d argument is a TCP port number,
not a display number.</p>

<p style="margin-left:22%;"><b>websocket=on|off</b></p>

<p style="margin-left:32%;">Opens an additional TCP
listening port dedicated to VNC Websocket connections. If a
bare websocket option is given, the Websocket port is
5700+display. An alternative port can be specified with the
syntax <b>websocket</b>=port.</p>

<p style="margin-left:32%; margin-top: 1em">If host is
specified connections will only be allowed from this host.
It is possible to control the websocket listen address
independently, using the syntax
<b>websocket</b>=host:port.</p>

<p style="margin-left:32%; margin-top: 1em">If no TLS
credentials are provided, the websocket connection runs in
unencrypted mode. If TLS credentials are provided, the
websocket connection requires encrypted client
connections.</p>

<p style="margin-left:22%;"><b>password=on|off</b></p>

<p style="margin-left:32%;">Require that password based
authentication is used for client connections.</p>

<p style="margin-left:32%; margin-top: 1em">The password
must be set separately using the <b>set_password</b> command
in the QEMU monitor. The syntax to change your password is:
<b>set_password &lt;protocol&gt; &lt;password&gt;</b> where
&lt;protocol&gt; could be either &quot;vnc&quot; or
&quot;spice&quot;.</p>

<p style="margin-left:32%; margin-top: 1em">If you would
like to change &lt;protocol&gt; password expiration, you
should use <b>expire_password &lt;protocol&gt;
&lt;expiration-time&gt;</b> where expiration time could be
one of the following options: now, never, +seconds or UNIX
time of expiration, e.g. +60 to make password expire in 60
seconds, or 1335196800 to make password expire on &quot;Mon
Apr 23 12:00:00 EDT 2012&quot; (UNIX time for this date and
time).</p>

<p style="margin-left:32%; margin-top: 1em">You can also
use keywords &quot;now&quot; or &quot;never&quot; for the
expiration time to allow &lt;protocol&gt; password to expire
immediately or never expire.</p>


<p style="margin-left:22%;"><b>password-secret=&lt;secret-id&gt;</b></p>

<p style="margin-left:32%;">Require that password based
authentication is used for client connections, using the
password provided by the <b>secret</b> object identified by
<b>secret-id</b>.</p>

<p style="margin-left:22%;"><b>tls-creds=ID</b></p>

<p style="margin-left:32%;">Provides the ID of a set of TLS
credentials to use to secure the VNC server. They will apply
to both the normal VNC server socket and the websocket
socket (if enabled). Setting TLS credentials will cause the
VNC server socket to enable the VeNCrypt auth mechanism. The
credentials should have been previously created using the
<b>-object tls-creds</b> argument.</p>

<p style="margin-left:22%;"><b>tls-authz=ID</b></p>

<p style="margin-left:32%;">Provides the ID of the QAuthZ
authorization object against which the client's x509
distinguished name will validated. This object is only
resolved at time of use, so can be deleted and recreated on
the fly while the VNC server is active. If missing, it will
default to denying access.</p>

<p style="margin-left:22%;"><b>sasl=on|off</b></p>

<p style="margin-left:32%;">Require that the client use
SASL to authenticate with the VNC server. The exact choice
of authentication method used is controlled from the system
/ user's SASL configuration file for the 'qemu' service.
This is typically found in /etc/sasl2/qemu.conf. If running
QEMU as an unprivileged user, an environment variable
SASL_CONF_PATH can be used to make it search alternate
locations for the service config. While some SASL auth
methods can also provide data encryption (eg GSSAPI), it is
recommended that SASL always be combined with the 'tls' and
'x509' settings to enable use of SSL and server
certificates. This ensures a data encryption preventing
compromise of authentication credentials. See the VNC
security section in the System Emulation Users Guide for
details on using SASL authentication.</p>

<p style="margin-left:22%;"><b>sasl-authz=ID</b></p>

<p style="margin-left:32%;">Provides the ID of the QAuthZ
authorization object against which the client's SASL
username will validated. This object is only resolved at
time of use, so can be deleted and recreated on the fly
while the VNC server is active. If missing, it will default
to denying access.</p>

<p style="margin-left:22%;"><b>acl=on|off</b></p>

<p style="margin-left:32%;">Legacy method for enabling
authorization of clients against the x509 distinguished name
and SASL username. It results in the creation of two
<b>authz-list</b> objects with IDs of <b>vnc.username</b>
and <b>vnc.x509dname</b>. The rules for these objects must
be configured with the HMP ACL commands.</p>

<p style="margin-left:32%; margin-top: 1em">This option is
deprecated and should no longer be used. The new
<b>sasl-authz</b> and <b>tls-authz</b> options are a
replacement.</p>

<p style="margin-left:22%;"><b>lossy=on|off</b></p>

<p style="margin-left:32%;">Enable lossy compression
methods (gradient, JPEG, ...). If this option is set, VNC
client may receive lossy framebuffer updates depending on
its encoding settings. Enabling this option can save a lot
of bandwidth at the expense of quality.</p>

<p style="margin-left:22%;"><b>non-adaptive=on|off</b></p>

<p style="margin-left:32%;">Disable adaptive encodings.
Adaptive encodings are enabled by default. An adaptive
encoding will try to detect frequently updated screen
regions, and send updates in these regions using a lossy
encoding (like JPEG). This can be really helpful to save
bandwidth when playing videos. Disabling adaptive encodings
restores the original static behavior of encodings like
Tight.</p>


<p style="margin-left:22%;"><b>share=[allow-exclusive|force-shared|ignore]</b></p>

<p style="margin-left:32%;">Set display sharing policy.
'allow-exclusive' allows clients to ask for exclusive
access. As suggested by the rfb spec this is implemented by
dropping other connections. Connecting multiple clients in
parallel requires all clients asking for a shared session
(vncviewer: -shared switch). This is the default.
'force-shared' disables exclusive client access. Useful for
shared desktop sessions, where you don't want someone
forgetting specify -shared disconnect everybody else.
'ignore' completely ignores the shared flag and allows
everybody connect unconditionally. Doesn't conform to the
rfb spec but is traditional QEMU behavior.</p>

<p style="margin-left:22%;"><b>key-delay-ms</b></p>

<p style="margin-left:32%;">Set keyboard delay, for key
down and key up events, in milliseconds. Default is 10.
Keyboards are low-bandwidth devices, so this slowdown can
help the device and guest to keep up and not lose events in
case events are arriving in bulk. Possible causes for the
latter are flaky network connections, or scripts for
automated testing.</p>

<p style="margin-left:22%;"><b>audiodev=audiodev</b></p>

<p style="margin-left:32%;">Use the specified audiodev when
the VNC client requests audio transmission. When not using
an -audiodev argument, this option must be omitted,
otherwise is must be present and specify a valid
audiodev.</p>


<p style="margin-left:22%;"><b>power-control=on|off</b></p>

<p style="margin-left:32%;">Permit the remote client to
issue shutdown, reboot or reset power control requests.</p>

<p style="margin-left:11%; margin-top: 1em"><b>i386 target
only <br>
-win2k-hack</b></p>

<p style="margin-left:22%;">Use it when installing Windows
2000 to avoid a disk full bug. After Windows 2000 is
installed, you no longer need this option (this option slows
down the IDE transfers).</p>

<p style="margin-left:11%;"><b>-no-fd-bootchk</b></p>

<p style="margin-left:22%;">Disable boot signature checking
for floppy disks in BIOS. May be needed to boot from old
floppy disks.</p>

<p style="margin-left:11%;"><b>-no-acpi</b></p>

<p style="margin-left:22%;">Disable ACPI (Advanced
Configuration and Power Interface) support. Use it if your
guest OS complains about ACPI problems (PC target machine
only).</p>

<p style="margin-left:11%;"><b>-no-hpet</b></p>

<p style="margin-left:22%;">Disable HPET support.</p>

<p style="margin-left:11%;"><b>-acpitable <br>

[sig=str][,rev=n][,oem_id=str][,oem_table_id=str][,oem_rev=n]
<br>

[,asl_compiler_id=str][,asl_compiler_rev=n][,data=file1[:file2]...]</b></p>

<p style="margin-left:22%;">Add ACPI table with specified
header fields and context from specified files. For file=,
take whole ACPI table from the specified files, including
all ACPI headers (possible overridden by other options). For
data=, only data portion of the table is used, all header
information is specified in the command line. If a SLIC
table is supplied to QEMU, then the SLIC's oem_id and
oem_table_id fields will override the same in the RSDT and
the FADT (a.k.a. FACP), in order to ensure the field matches
required by the Microsoft SLIC spec and the ACPI spec.</p>

<p style="margin-left:11%;"><b>-smbios file=binary</b></p>

<p style="margin-left:22%;">Load SMBIOS entry from binary
file.</p>

<p style="margin-left:11%;"><b>-smbios <br>

type=0[,vendor=str][,version=str][,date=str][,release=%d.%d][,uefi=on|off]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 0
fields</p>

<p style="margin-left:11%;"><b>-smbios <br>

type=1[,manufacturer=str][,product=str][,version=str][,serial=str][,uuid=uuid][,sku=str][,family=str]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 1
fields</p>

<p style="margin-left:11%;"><b>-smbios <br>

type=2[,manufacturer=str][,product=str][,version=str][,serial=str][,asset=str][,location=str]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 2
fields</p>

<p style="margin-left:11%;"><b>-smbios <br>

type=3[,manufacturer=str][,version=str][,serial=str][,asset=str][,sku=str]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 3
fields</p>

<p style="margin-left:11%;"><b>-smbios <br>

type=4[,sock_pfx=str][,manufacturer=str][,version=str][,serial=str][,asset=str][,part=str]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 4
fields</p>

<p style="margin-left:11%;"><b>-smbios
type=11[,value=str][,path=filename]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 11
fields</p>

<p style="margin-left:22%; margin-top: 1em">This argument
can be repeated multiple times, and values are added in the
order they are parsed. Applications intending to use OEM
strings data are encouraged to use their application name as
a prefix for the value string. This facilitates passing
information for multiple applications concurrently.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>value=str</b> syntax provides the string data inline,
while the <b>path=filename</b> syntax loads data from a file
on disk. Note that the file is not permitted to contain any
NUL bytes.</p>

<p style="margin-left:22%; margin-top: 1em">Both the
<b>value</b> and <b>path</b> options can be repeated
multiple times and will be added to the SMBIOS table in the
order in which they appear.</p>

<p style="margin-left:22%; margin-top: 1em">Note that on
the x86 architecture, the total size of all SMBIOS tables is
limited to 65535 bytes. Thus the OEM strings data is not
suitable for passing large amounts of data into the guest.
Instead it should be used as a indicator to inform the guest
where to locate the real data set, for example, by
specifying the serial ID of a block device.</p>

<p style="margin-left:22%; margin-top: 1em">An example
passing three strings is</p>

<pre style="margin-left:26%; margin-top: 1em">-smbios type=11,value=cloud-init:ds=nocloud-net;s=http://10.10.0.1:8000/,\
                value=anaconda:method=http://dl.fedoraproject.org/pub/fedora/linux/releases/25/x86_64/os,\
                path=/some/file/with/oemstringsdata.txt</pre>


<p style="margin-left:22%; margin-top: 1em">In the guest OS
this is visible with the <b>dmidecode</b> command</p>

<pre style="margin-left:32%; margin-top: 1em">$ dmidecode -t 11
Handle 0x0E00, DMI type 11, 5 bytes
OEM Strings
     String 1: cloud-init:ds=nocloud-net;s=http://10.10.0.1:8000/
     String 2: anaconda:method=http://dl.fedoraproject.org/pub/fedora/linux/releases/25/x86_64/os
     String 3: myapp:some extra data</pre>


<p style="margin-left:11%;"><b>-smbios <br>

type=17[,loc_pfx=str][,bank=str][,manufacturer=str][,serial=str][,asset=str][,part=str][,speed=%d]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 17
fields</p>

<p style="margin-left:11%;"><b>-smbios
type=41[,designation=str][,kind=str][,instance=%d][,pcidev=str]</b></p>

<p style="margin-left:22%;">Specify SMBIOS type 41
fields</p>

<p style="margin-left:22%; margin-top: 1em">This argument
can be repeated multiple times. Its main use is to allow
network interfaces be created as <b>enoX</b> on Linux, with
X being the instance number, instead of the name depending
on the interface position on the PCI bus.</p>

<p style="margin-left:22%; margin-top: 1em">Here is an
example of use:</p>

<pre style="margin-left:26%; margin-top: 1em">-netdev user,id=internet \
-device virtio-net-pci,mac=50:54:00:00:00:42,netdev=internet,id=internet-dev \
-smbios type=41,designation='Onboard LAN',instance=1,kind=ethernet,pcidev=internet-dev</pre>


<p style="margin-left:22%; margin-top: 1em">In the guest
OS, the device should then appear as <b>eno1</b>:</p>


<p style="margin-left:22%; margin-top: 1em">..parsed-literal:</p>


<pre style="margin-left:26%; margin-top: 1em">$ ip -brief l
lo               UNKNOWN        00:00:00:00:00:00 &lt;LOOPBACK,UP,LOWER_UP&gt;
eno1             UP             50:54:00:00:00:42 &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</pre>


<p style="margin-left:22%; margin-top: 1em">Currently, the
PCI device has to be attached to the root bus.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Network
options <br>
-nic <br>

[tap|bridge|user|l2tpv3|vde|netmap|vhost-user|socket][,...][,mac=macaddr][,model=mn]</b></p>

<p style="margin-left:22%;">This option is a shortcut for
configuring both the on-board (default) guest NIC hardware
and the host network backend in one go. The host backend
options are the same as with the corresponding
<b>-netdev</b> options below. The guest NIC model can be set
with <b>model=modelname</b>. Use <b>model=help</b> to list
the available device types. The hardware MAC address can be
set with <b>mac=macaddr</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The following
two example do exactly the same, to show how <b>-nic</b> can
be used to shorten the command line length:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -netdev user,id=n1,ipv6=off -device e1000,netdev=n1,mac=52:54:98:76:54:32
qemu-system-x86_64 -nic user,ipv6=off,model=e1000,mac=52:54:98:76:54:32</pre>


<p style="margin-left:11%;"><b>-nic none</b></p>

<p style="margin-left:22%;">Indicate that no network
devices should be configured. It is used to override the
default configuration (default NIC with &quot;user&quot;
host network backend) which is activated if no other
networking options are provided.</p>

<p style="margin-left:11%;"><b>-netdev
user,id=id[,option][,option][,...]</b></p>

<p style="margin-left:22%;">Configure user mode host
network backend which requires no administrator privilege to
run. Valid options are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>id=id</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Assign symbolic name for use in monitor commands.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>ipv4=on|off and
ipv6=on|off</b></p>

<p style="margin-left:32%;">Specify that either IPv4 or
IPv6 must be enabled. If neither is specified both protocols
are enabled.</p>

<p style="margin-left:22%;"><b>net=addr[/mask]</b></p>

<p style="margin-left:32%;">Set IP network address the
guest will see. Optionally specify the netmask, either in
the form a.b.c.d or as number of valid top-most bits.
Default is 10.0.2.0/24.</p>

<p style="margin-left:22%;"><b>host=addr</b></p>

<p style="margin-left:32%;">Specify the guest-visible
address of the host. Default is the 2nd IP in the guest
network, i.e. x.x.x.2.</p>

<p style="margin-left:22%;"><b>ipv6-net=addr[/int]</b></p>

<p style="margin-left:32%;">Set IPv6 network address the
guest will see (default is fec0::/64). The network prefix is
given in the usual hexadecimal IPv6 address notation. The
prefix size is optional, and is given as the number of valid
top-most bits (default is 64).</p>

<p style="margin-left:22%;"><b>ipv6-host=addr</b></p>

<p style="margin-left:32%;">Specify the guest-visible IPv6
address of the host. Default is the 2nd IPv6 in the guest
network, i.e. xxxx::2.</p>

<p style="margin-left:22%;"><b>restrict=on|off</b></p>

<p style="margin-left:32%;">If this option is enabled, the
guest will be isolated, i.e. it will not be able to contact
the host and no guest IP packets will be routed over the
host to the outside. This option does not affect any
explicitly set forwarding rules.</p>

<p style="margin-left:22%;"><b>hostname=name</b></p>

<p style="margin-left:32%;">Specifies the client hostname
reported by the built-in DHCP server.</p>

<p style="margin-left:22%;"><b>dhcpstart=addr</b></p>

<p style="margin-left:32%;">Specify the first of the 16 IPs
the built-in DHCP server can assign. Default is the 15th to
31st IP in the guest network, i.e. x.x.x.15 to x.x.x.31.</p>

<p style="margin-left:22%;"><b>dns=addr</b></p>

<p style="margin-left:32%;">Specify the guest-visible
address of the virtual nameserver. The address must be
different from the host address. Default is the 3rd IP in
the guest network, i.e. x.x.x.3.</p>

<p style="margin-left:22%;"><b>ipv6-dns=addr</b></p>

<p style="margin-left:32%;">Specify the guest-visible
address of the IPv6 virtual nameserver. The address must be
different from the host address. Default is the 3rd IP in
the guest network, i.e. xxxx::3.</p>

<p style="margin-left:22%;"><b>dnssearch=domain</b></p>

<p style="margin-left:32%;">Provides an entry for the
domain-search list sent by the built-in DHCP server. More
than one domain suffix can be transmitted by specifying this
option multiple times. If supported, this will cause the
guest to automatically try to append the given domain
suffix(es) in case a domain name can not be resolved.</p>

<p style="margin-left:32%; margin-top: 1em">Example:</p>

<pre style="margin-left:37%; margin-top: 1em">qemu-system-x86_64 -nic user,dnssearch=mgmt.example.org,dnssearch=example.org</pre>


<p style="margin-left:22%;"><b>domainname=domain</b></p>

<p style="margin-left:32%;">Specifies the client domain
name reported by the built-in DHCP server.</p>

<p style="margin-left:22%;"><b>tftp=dir</b></p>

<p style="margin-left:32%;">When using the user mode
network stack, activate a built-in TFTP server. The files in
dir will be exposed as the root of a TFTP server. The TFTP
client on the guest must be configured in binary mode (use
the command <b>bin</b> of the Unix TFTP client).</p>


<p style="margin-left:22%;"><b>tftp-server-name=name</b></p>

<p style="margin-left:32%;">In BOOTP reply, broadcast name
as the &quot;TFTP server name&quot; (RFC2132 option 66).
This can be used to advise the guest to load boot files or
configurations from a different server than the host
address.</p>

<p style="margin-left:22%;"><b>bootfile=file</b></p>

<p style="margin-left:32%;">When using the user mode
network stack, broadcast file as the BOOTP filename. In
conjunction with <b>tftp</b>, this can be used to network
boot a guest from a local directory.</p>

<p style="margin-left:32%; margin-top: 1em">Example (using
pxelinux):</p>

<pre style="margin-left:37%; margin-top: 1em">qemu-system-x86_64 -hda linux.img -boot n -device e1000,netdev=n1 \
    -netdev user,id=n1,tftp=/path/to/tftp/files,bootfile=/pxelinux.0</pre>



<p style="margin-left:22%;"><b>smb=dir[,smbserver=addr]</b></p>

<p style="margin-left:32%;">When using the user mode
network stack, activate a built-in SMB server so that
Windows OSes can access to the host files in <b>dir</b>
transparently. The IP address of the SMB server can be set
to addr. By default the 4th IP in the guest network is used,
i.e. x.x.x.4.</p>

<p style="margin-left:32%; margin-top: 1em">In the guest
Windows OS, the line:</p>

<pre style="margin-left:37%; margin-top: 1em">10.0.2.4 smbserver</pre>


<p style="margin-left:32%; margin-top: 1em">must be added
in the file <b>C:\WINDOWS\LMHOSTS</b> (for windows 9x/Me) or
<b>C:\WINNT\SYSTEM32\DRIVERS\ETC\LMHOSTS</b> (Windows
NT/2000).</p>

<p style="margin-left:32%; margin-top: 1em">Then <b>dir</b>
can be accessed in <b>\\smbserver\qemu</b>.</p>

<p style="margin-left:32%; margin-top: 1em">Note that a
SAMBA server must be installed on the host OS.</p>


<p style="margin-left:22%;"><b>hostfwd=[tcp|udp]:[hostaddr]:hostport-[guestaddr]:guestport</b></p>

<p style="margin-left:32%;">Redirect incoming TCP or UDP
connections to the host port hostport to the guest IP
address guestaddr on guest port guestport. If guestaddr is
not specified, its value is x.x.x.15 (default first address
given by the built-in DHCP server). By specifying hostaddr,
the rule can be bound to a specific host interface. If no
connection type is set, TCP is used. This option can be
given multiple times.</p>

<p style="margin-left:32%; margin-top: 1em">For example, to
redirect host X11 connection from screen 1 to guest screen
0, use the following:</p>

<pre style="margin-left:37%; margin-top: 1em"># on the host
qemu-system-x86_64 -nic user,hostfwd=tcp:127.0.0.1:6001-:6000
# this host xterm should open in the guest X11 server
xterm -display :1</pre>


<p style="margin-left:32%; margin-top: 1em">To redirect
telnet connections from host port 5555 to telnet port on the
guest, use the following:</p>

<pre style="margin-left:37%; margin-top: 1em"># on the host
qemu-system-x86_64 -nic user,hostfwd=tcp::5555-:23
telnet localhost 5555</pre>


<p style="margin-left:32%; margin-top: 1em">Then when you
use on the host <b>telnet localhost 5555</b>, you connect to
the guest telnet server.</p>


<p style="margin-left:22%;"><b>guestfwd=[tcp]:server:port-dev;
<br>
guestfwd=[tcp]:server:port-cmd:command</b></p>

<p style="margin-left:32%;">Forward guest TCP connections
to the IP address server on port port to the character
device dev or to a program executed by cmd:command which
gets spawned for each connection. This option can be given
multiple times.</p>

<p style="margin-left:32%; margin-top: 1em">You can either
use a chardev directly and have that one used throughout
QEMU's lifetime, like in the following example:</p>

<pre style="margin-left:37%; margin-top: 1em"># open 10.10.1.1:4321 on bootup, connect 10.0.2.100:1234 to it whenever
# the guest accesses it
qemu-system-x86_64 -nic user,guestfwd=tcp:10.0.2.100:1234-<i>tcp:10.10.1.1:4321</i></pre>


<p style="margin-left:32%; margin-top: 1em"><i>Or you can
execute a command on every TCP connection established by the
guest, so that QEMU behaves similar to an inetd process for
that virtual server:</i></p>

<pre style="margin-left:37%; margin-top: 1em"># call &quot;netcat 10.10.1.1 4321&quot; on every TCP connection to 10.0.2.100:1234
# and connect the TCP stream to its stdin/stdout
qemu-system-x86_64 -nic  'user,id=n1,guestfwd=tcp:10.0.2.100:1234-cmd:netcat 10.10.1.1 4321'</pre>


<p style="margin-left:11%;"><b>-netdev <br>

tap,id=id[,fd=h][,ifname=name][,script=file][,downscript=dfile][,br=bridge][,helper=helper]</b></p>

<p style="margin-left:22%;">Configure a host TAP network
backend with ID id.</p>

<p style="margin-left:22%; margin-top: 1em">Use the network
script file to configure it and the network script dfile to
deconfigure it. If name is not provided, the OS
automatically provides one. The default network configure
script is <b>/etc/qemu-ifup</b> and the default network
deconfigure script is <b>/etc/qemu-ifdown</b>. Use
<b>script=no</b> or <b>downscript=no</b> to disable script
execution.</p>

<p style="margin-left:22%; margin-top: 1em">If running QEMU
as an unprivileged user, use the network helper to configure
the TAP interface and attach it to the bridge. The default
network helper executable is
<b>/path/to/qemu-bridge-helper</b> and the default bridge
device is <b>br0</b>.</p>

<p style="margin-left:22%; margin-top: 1em"><b>fd</b>=h can
be used to specify the handle of an already opened host TAP
interface.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>
<pre style="margin-left:26%; margin-top: 1em">#launch a QEMU instance with the default network script
qemu-system-x86_64 linux.img -nic tap
#launch a QEMU instance with two NICs, each one connected
#to a TAP device
qemu-system-x86_64 linux.img \
        -netdev tap,id=nd0,ifname=tap0 -device e1000,netdev=nd0 \
        -netdev tap,id=nd1,ifname=tap1 -device rtl8139,netdev=nd1

#launch a QEMU instance with the default network helper to
#connect a TAP device to bridge br0
qemu-system-x86_64 linux.img -device virtio-net-pci,netdev=n1 \
        -netdev tap,id=n1,&quot;helper=/path/to/qemu-bridge-helper&quot;</pre>


<p style="margin-left:11%;"><b>-netdev
bridge,id=id[,br=bridge][,helper=helper]</b></p>

<p style="margin-left:22%;">Connect a host TAP network
interface to a host bridge device.</p>

<p style="margin-left:22%; margin-top: 1em">Use the network
helper helper to configure the TAP interface and attach it
to the bridge. The default network helper executable is
<b>/path/to/qemu-bridge-helper</b> and the default bridge
device is <b>br0</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>
<pre style="margin-left:26%; margin-top: 1em">#launch a QEMU instance with the default network helper to
#connect a TAP device to bridge br0
qemu-system-x86_64 linux.img -netdev bridge,id=n1 -device virtio-net,netdev=n1

#launch a QEMU instance with the default network helper to
#connect a TAP device to bridge qemubr0
qemu-system-x86_64 linux.img -netdev bridge,br=qemubr0,id=n1 -device virtio-net,netdev=n1</pre>


<p style="margin-left:11%;"><b>-netdev
socket,id=id[,fd=h][,listen=[host]:port][,connect=host:port]</b></p>

<p style="margin-left:22%;">This host network backend can
be used to connect the guest's network to another QEMU
virtual machine using a TCP socket connection. If
<b>listen</b> is specified, QEMU waits for incoming
connections on port (host is optional). <b>connect</b> is
used to connect to another QEMU instance using the
<b>listen</b> option. <b>fd</b>=h specifies an already
opened TCP socket.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<pre style="margin-left:26%; margin-top: 1em"># launch a first QEMU instance
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,listen=:1234
# connect the network of this instance to the network of the first instance
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n2,mac=52:54:00:12:34:57 \
                 -netdev socket,id=n2,connect=127.0.0.1:1234</pre>


<p style="margin-left:11%;"><b>-netdev
socket,id=id[,fd=h][,mcast=maddr:port[,localaddr=addr]]</b></p>

<p style="margin-left:22%;">Configure a socket host network
backend to share the guest's network traffic with another
QEMU virtual machines using a UDP multicast socket,
effectively making a bus for every QEMU with same multicast
address maddr and port. NOTES:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>1.</p></td>
<td width="1%"></td>
<td width="74%">


<p>Several QEMU can be running on different hosts and share
same bus (assuming correct multicast setup for these
hosts).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>2.</p></td>
<td width="1%"></td>
<td width="74%">


<p>mcast support is compatible with User Mode Linux
(argument <b>ethN=mcast</b>), see
<i>http://user-mode-linux.sf.net</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>3.</p></td>
<td width="1%"></td>
<td width="74%">


<p>Use <b>fd=h</b> to specify an already opened UDP
multicast socket.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<pre style="margin-left:26%; margin-top: 1em"># launch one QEMU instance
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,mcast=230.0.0.1:1234
# launch another QEMU instance on same &quot;bus&quot;
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n2,mac=52:54:00:12:34:57 \
                 -netdev socket,id=n2,mcast=230.0.0.1:1234
# launch yet another QEMU instance on same &quot;bus&quot;
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n3,mac=52:54:00:12:34:58 \
                 -netdev socket,id=n3,mcast=230.0.0.1:1234</pre>


<p style="margin-left:22%; margin-top: 1em">Example (User
Mode Linux compat.):</p>

<pre style="margin-left:26%; margin-top: 1em"># launch QEMU instance (note mcast address selected is UML's default)
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,mcast=239.192.168.1:1102
# launch UML
/path/to/linux ubd0=/path/to/root_fs eth0=mcast</pre>


<p style="margin-left:22%; margin-top: 1em">Example (send
packets from host's 1.2.3.4):</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,mcast=239.192.168.1:1102,localaddr=1.2.3.4</pre>


<p style="margin-left:11%;"><b>-netdev <br>

l2tpv3,id=id,src=srcaddr,dst=dstaddr[,srcport=srcport][,dstport=dstport],txsession=txsession[,rxsession=rxsession][,ipv6=on|off][,udp=on|off][,cookie64][,counter][,pincounter][,txcookie=txcookie][,rxcookie=rxcookie][,offset=offset]</b></p>

<p style="margin-left:22%;">Configure a L2TPv3 pseudowire
host network backend. L2TPv3 (RFC3931) is a popular protocol
to transport Ethernet (and other Layer 2) data frames
between two systems. It is present in routers, firewalls and
the Linux kernel (from version 3.3 onwards).</p>

<p style="margin-left:22%; margin-top: 1em">This transport
allows a VM to communicate to another VM, router or firewall
directly. <b><br>
src=srcaddr</b></p>

<p style="margin-left:32%;">source address (mandatory)</p>

<p style="margin-left:22%;"><b>dst=dstaddr</b></p>

<p style="margin-left:32%;">destination address
(mandatory)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>udp</b></p></td>
<td width="6%"></td>
<td width="63%">


<p>select udp encapsulation (default is ip).</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>srcport=srcport</b></p>

<p style="margin-left:32%;">source udp port.</p>

<p style="margin-left:22%;"><b>dstport=dstport</b></p>

<p style="margin-left:32%;">destination udp port.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>ipv6</b></p></td>
<td width="4%"></td>
<td width="54%">


<p>force v6, otherwise defaults to v4.</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>rxcookie=rxcookie;
txcookie=txcookie</b></p>

<p style="margin-left:32%;">Cookies are a weak form of
security in the l2tpv3 specification. Their function is
mostly to prevent misconfiguration. By default they are 32
bit.</p>

<p style="margin-left:22%;"><b>cookie64</b></p>

<p style="margin-left:32%;">Set cookie size to 64 bit
instead of the default 32</p>

<p style="margin-left:22%;"><b>counter=off</b></p>

<p style="margin-left:32%;">Force a 'cut-down' L2TPv3 with
no counter as in
draft-mkonstan-l2tpext-keyed-ipv6-tunnel-00</p>

<p style="margin-left:22%;"><b>pincounter=on</b></p>

<p style="margin-left:32%;">Work around broken counter
handling in peer. This may also help on networks which have
packet reorder.</p>

<p style="margin-left:22%;"><b>offset=offset</b></p>

<p style="margin-left:32%;">Add an extra offset between
header and data</p>

<p style="margin-left:22%; margin-top: 1em">For example, to
attach a VM running on host 4.3.2.1 via L2TPv3 to the bridge
br-lan on the remote Linux host 1.2.3.4:</p>
<pre style="margin-left:26%; margin-top: 1em"># Setup tunnel on linux host using raw ip as encapsulation
# on 1.2.3.4
ip l2tp add tunnel remote 4.3.2.1 local 1.2.3.4 tunnel_id 1 peer_tunnel_id 1 \
    encap udp udp_sport 16384 udp_dport 16384
ip l2tp add session tunnel_id 1 name vmtunnel0 session_id \
    0xFFFFFFFF peer_session_id 0xFFFFFFFF
ifconfig vmtunnel0 mtu 1500
ifconfig vmtunnel0 up
brctl addif br-lan vmtunnel0


# on 4.3.2.1
# launch QEMU instance - if your network has reorder or is very lossy add ,pincounter


qemu-system-x86_64 linux.img -device e1000,netdev=n1 \
    -netdev l2tpv3,id=n1,src=4.2.3.1,dst=1.2.3.4,udp,srcport=16384,dstport=16384,rxsession=0xffffffff,txsession=0xffffffff,counter</pre>


<p style="margin-left:11%;"><b>-netdev <br>

vde,id=id[,sock=socketpath][,port=n][,group=groupname][,mode=octalmode]</b></p>

<p style="margin-left:22%;">Configure VDE backend to
connect to PORT n of a vde switch running on host and
listening for incoming connections on socketpath. Use GROUP
groupname and MODE octalmode to change default ownership and
permissions for communication port. This option is only
available if QEMU has been compiled with vde support
enabled.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<pre style="margin-left:26%; margin-top: 1em"># launch vde switch
vde_switch -F -sock /tmp/myswitch
# launch QEMU instance
qemu-system-x86_64 linux.img -nic vde,sock=/tmp/myswitch</pre>


<p style="margin-left:11%;"><b>-netdev
vhost-user,chardev=id[,vhostforce=on|off][,queues=n]</b></p>

<p style="margin-left:22%;">Establish a vhost-user netdev,
backed by a chardev id. The chardev should be a unix domain
socket backed one. The vhost-user uses a specifically
defined protocol to pass vhost ioctl replacement messages to
an application on the other end of the socket. On non-MSIX
guests, the feature can be forced with vhostforce. Use
'queues=n' to specify the number of queues to be created for
multiqueue vhost-user.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<pre style="margin-left:26%; margin-top: 1em">qemu -m 512 -object memory-backend-file,id=mem,size=512M,mem-path=/hugetlbfs,share=on \
     -numa node,memdev=mem \
     -chardev socket,id=chr0,path=/path/to/socket \
     -netdev type=vhost-user,id=net0,chardev=chr0 \
     -device virtio-net-pci,netdev=net0</pre>


<p style="margin-left:11%;"><b>-netdev
vhost-vdpa,vhostdev=/path/to/dev</b></p>

<p style="margin-left:22%;">Establish a vhost-vdpa
netdev.</p>

<p style="margin-left:22%; margin-top: 1em">vDPA device is
a device that uses a datapath which complies with the virtio
specifications with a vendor specific control path. vDPA
devices can be both physically located on the hardware or
emulated by software.</p>

<p style="margin-left:11%;"><b>-netdev
hubport,id=id,hubid=hubid[,netdev=nd]</b></p>

<p style="margin-left:22%;">Create a hub port on the
emulated hub with ID hubid.</p>

<p style="margin-left:22%; margin-top: 1em">The hubport
netdev lets you connect a NIC to a QEMU emulated hub instead
of a single netdev. Alternatively, you can also connect the
hubport to another netdev with ID nd by using the
<b>netdev=nd</b> option.</p>

<p style="margin-left:11%;"><b>-net
nic[,netdev=nd][,macaddr=mac][,model=type] <br>
[,name=name][,addr=addr][,vectors=v]</b></p>

<p style="margin-left:22%;">Legacy option to configure or
create an on-board (or machine default) Network Interface
Card(NIC) and connect it either to the emulated hub with ID
0 (i.e. the default hub), or to the netdev nd. If model is
omitted, then the default NIC model associated with the
machine type is used. Note that the default NIC model may
change in future QEMU releases, so it is highly recommended
to always specify a model. Optionally, the MAC address can
be changed to mac, the device address set to addr (PCI cards
only), and a name can be assigned for use in monitor
commands. Optionally, for PCI cards, you can specify the
number v of MSI-X vectors that the card should have; this
option currently only affects virtio cards; set v = 0 to
disable MSI-X. If no <b>-net</b> option is specified, a
single NIC is created. QEMU can emulate several different
models of network card. Use <b>-net nic,model=help</b> for a
list of available devices for your target.</p>

<p style="margin-left:11%;"><b>-net
user|tap|bridge|socket|l2tpv3|vde[,...][,name=name]</b></p>

<p style="margin-left:22%;">Configure a host network
backend (with the options corresponding to the same
<b>-netdev</b> option) and connect it to the emulated hub 0
(the default hub). Use name to specify the name of the hub
port.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Character
device options</b> <br>
The general form of a character device option is: <b><br>
-chardev backend,id=id[,mux=on|off][,options]</b></p>

<p style="margin-left:22%;">Backend is one of: <b>null</b>,
<b>socket</b>, <b>udp</b>, <b>msmouse</b>, <b>vc</b>,
<b>ringbuf</b>, <b>file</b>, <b>pipe</b>, <b>console</b>,
<b>serial</b>, <b>pty</b>, <b>stdio</b>, <b>braille</b>,
<b>tty</b>, <b>parallel</b>, <b>parport</b>,
<b>spicevmc</b>, <b>spiceport</b>. The specific backend will
determine the applicable options.</p>

<p style="margin-left:22%; margin-top: 1em">Use <b>-chardev
help</b> to print all available chardev backend types.</p>

<p style="margin-left:22%; margin-top: 1em">All devices
must have an id, which can be any string up to 127
characters long. It is used to uniquely identify this device
in other command line directives.</p>

<p style="margin-left:22%; margin-top: 1em">A character
device may be used in multiplexing mode by multiple
front-ends. Specify <b>mux=on</b> to enable this mode. A
multiplexer is a &quot;1:N&quot; device, and here the
&quot;1&quot; end is your specified chardev backend, and the
&quot;N&quot; end is the various parts of QEMU that can talk
to a chardev. If you create a chardev with <b>id=myid</b>
and <b>mux=on</b>, QEMU will create a multiplexer with your
specified ID, and you can then configure multiple front ends
to use that chardev ID for their input/output. Up to four
different front ends can be connected to a single
multiplexed chardev. (Without multiplexing enabled, a
chardev can only be used by a single front end.) For
instance you could use this to allow a single stdio chardev
to be used by two serial ports and the QEMU monitor:</p>

<pre style="margin-left:26%; margin-top: 1em">-chardev stdio,mux=on,id=char0 \
-mon chardev=char0,mode=readline \
-serial chardev:char0 \
-serial chardev:char0</pre>


<p style="margin-left:22%; margin-top: 1em">You can have
more than one multiplexer in a system configuration; for
instance you could have a TCP port multiplexed between UART
0 and UART 1, and stdio multiplexed between the QEMU monitor
and a parallel port:</p>

<pre style="margin-left:26%; margin-top: 1em">-chardev stdio,mux=on,id=char0 \
-mon chardev=char0,mode=readline \
-parallel chardev:char0 \
-chardev tcp,...,mux=on,id=char1 \
-serial chardev:char1 \
-serial chardev:char1</pre>


<p style="margin-left:22%; margin-top: 1em">When you're
using a multiplexed character device, some escape sequences
are interpreted in the input. See the chapter about keys in
the character backend multiplexer in the System Emulation
Users Guide for more details.</p>

<p style="margin-left:22%; margin-top: 1em">Note that some
other command line options may implicitly create multiplexed
character backends; for instance <b>-serial mon:stdio</b>
creates a multiplexed stdio backend connected to the serial
port and the QEMU monitor, and <b>-nographic</b> also
multiplexes the console and the monitor to stdio.</p>

<p style="margin-left:22%; margin-top: 1em">There is
currently no support for multiplexing in the other direction
(where a single QEMU front end takes input and output from
multiple chardevs).</p>

<p style="margin-left:22%; margin-top: 1em">Every backend
supports the <b>logfile</b> option, which supplies the path
to a file to record all data transmitted via the backend.
The <b>logappend</b> option controls whether the log file
will be truncated or appended to when opened.</p>

<p style="margin-left:11%; margin-top: 1em">The available
backends are: <b><br>
-chardev null,id=id</b></p>

<p style="margin-left:22%;">A void device. This device will
not emit any data, and will drop any data it receives. The
null backend does not take any options.</p>

<p style="margin-left:11%;"><b>-chardev socket,id=id[,TCP
options or unix <br>

options][,server=on|off][,wait=on|off][,telnet=on|off][,websocket=on|off][,reconnect=seconds][,tls-creds=id][,tls-authz=id]</b></p>

<p style="margin-left:22%;">Create a two-way stream socket,
which can be either a TCP or a unix socket. A unix socket
will be created if <b>path</b> is specified. Behaviour is
undefined if TCP options are specified for a unix
socket.</p>


<p style="margin-left:22%; margin-top: 1em"><b>server=on|off</b>
specifies that the socket shall be a listening socket.</p>


<p style="margin-left:22%; margin-top: 1em"><b>wait=on|off</b>
specifies that QEMU should not block waiting for a client to
connect to a listening socket.</p>


<p style="margin-left:22%; margin-top: 1em"><b>telnet=on|off</b>
specifies that traffic on the socket should interpret telnet
escape sequences.</p>


<p style="margin-left:22%; margin-top: 1em"><b>websocket=on|off</b>
specifies that the socket uses WebSocket protocol for
communication.</p>


<p style="margin-left:22%; margin-top: 1em"><b>reconnect</b>
sets the timeout for reconnecting on non-server sockets when
the remote end goes away. qemu will delay this many seconds
and then attempt to reconnect. Zero disables reconnecting,
and is the default.</p>


<p style="margin-left:22%; margin-top: 1em"><b>tls-creds</b>
requests enablement of the TLS protocol for encryption, and
specifies the id of the TLS credentials to use for the
handshake. The credentials must be previously created with
the <b>-object tls-creds</b> argument.</p>


<p style="margin-left:22%; margin-top: 1em"><b>tls-auth</b>
provides the ID of the QAuthZ authorization object against
which the client's x509 distinguished name will be
validated. This object is only resolved at time of use, so
can be deleted and recreated on the fly while the chardev
server is active. If missing, it will default to denying
access.</p>

<p style="margin-left:22%; margin-top: 1em">TCP and unix
socket options are given below: <b><br>
TCP options: <br>

port=port[,host=host][,to=to][,ipv4=on|off][,ipv6=on|off][,nodelay=on|off]</b></p>

<p style="margin-left:32%;"><b>host</b> for a listening
socket specifies the local address to be bound. For a
connecting socket species the remote host to connect to.
<b>host</b> is optional for listening sockets. If not
specified it defaults to <b>0.0.0.0</b>.</p>

<p style="margin-left:32%; margin-top: 1em"><b>port</b> for
a listening socket specifies the local port to be bound. For
a connecting socket specifies the port on the remote host to
connect to. <b>port</b> can be given as either a port number
or a service name. <b>port</b> is required.</p>

<p style="margin-left:32%; margin-top: 1em"><b>to</b> is
only relevant to listening sockets. If it is specified, and
<b>port</b> cannot be bound, QEMU will attempt to bind to
subsequent ports up to and including <b>to</b> until it
succeeds. <b>to</b> must be specified as a port number.</p>


<p style="margin-left:32%; margin-top: 1em"><b>ipv4=on|off</b>
and <b>ipv6=on|off</b> specify that either IPv4 or IPv6 must
be used. If neither is specified the socket may use either
protocol.</p>


<p style="margin-left:32%; margin-top: 1em"><b>nodelay=on|off</b>
disables the Nagle algorithm.</p>

<p style="margin-left:22%;"><b>unix options:
path=path[,abstract=on|off][,tight=on|off]</b></p>

<p style="margin-left:32%;"><b>path</b> specifies the local
path of the unix socket. <b>path</b> is required.
<b>abstract=on|off</b> specifies the use of the abstract
socket namespace, rather than the filesystem. Optional,
defaults to false. <b>tight=on|off</b> sets the socket
length of abstract sockets to their minimum, rather than the
full sun_path length. Optional, defaults to true.</p>

<p style="margin-left:11%;"><b>-chardev <br>

udp,id=id[,host=host],port=port[,localaddr=localaddr][,localport=localport][,ipv4=on|off][,ipv6=on|off]</b></p>

<p style="margin-left:22%;">Sends all traffic from the
guest to a remote host over UDP.</p>

<p style="margin-left:22%; margin-top: 1em"><b>host</b>
specifies the remote host to connect to. If not specified it
defaults to <b>localhost</b>.</p>

<p style="margin-left:22%; margin-top: 1em"><b>port</b>
specifies the port on the remote host to connect to.
<b>port</b> is required.</p>


<p style="margin-left:22%; margin-top: 1em"><b>localaddr</b>
specifies the local address to bind to. If not specified it
defaults to <b>0.0.0.0</b>.</p>


<p style="margin-left:22%; margin-top: 1em"><b>localport</b>
specifies the local port to bind to. If not specified any
available local port will be used.</p>


<p style="margin-left:22%; margin-top: 1em"><b>ipv4=on|off</b>
and <b>ipv6=on|off</b> specify that either IPv4 or IPv6 must
be used. If neither is specified the device may use either
protocol.</p>

<p style="margin-left:11%;"><b>-chardev
msmouse,id=id</b></p>

<p style="margin-left:22%;">Forward QEMU's emulated msmouse
events to the guest. <b>msmouse</b> does not take any
options.</p>

<p style="margin-left:11%;"><b>-chardev <br>

vc,id=id[[,width=width][,height=height]][[,cols=cols][,rows=rows]]</b></p>

<p style="margin-left:22%;">Connect to a QEMU text console.
<b>vc</b> may optionally be given a specific size.</p>

<p style="margin-left:22%; margin-top: 1em"><b>width</b>
and <b>height</b> specify the width and height respectively
of the console, in pixels.</p>

<p style="margin-left:22%; margin-top: 1em"><b>cols</b> and
<b>rows</b> specify that the console be sized to fit a text
console with the given dimensions.</p>

<p style="margin-left:11%;"><b>-chardev
ringbuf,id=id[,size=size]</b></p>

<p style="margin-left:22%;">Create a ring buffer with fixed
size <b>size</b>. size must be a power of two and defaults
to <b>64K</b>.</p>

<p style="margin-left:11%;"><b>-chardev
file,id=id,path=path</b></p>

<p style="margin-left:22%;">Log all traffic received from
the guest to a file.</p>

<p style="margin-left:22%; margin-top: 1em"><b>path</b>
specifies the path of the file to be opened. This file will
be created if it does not already exist, and overwritten if
it does. <b>path</b> is required.</p>

<p style="margin-left:11%;"><b>-chardev
pipe,id=id,path=path</b></p>

<p style="margin-left:22%;">Create a two-way connection to
the guest. The behaviour differs slightly between Windows
hosts and other hosts:</p>

<p style="margin-left:22%; margin-top: 1em">On Windows, a
single duplex pipe will be created at
<b>\\.pipe\path</b>.</p>

<p style="margin-left:22%; margin-top: 1em">On other hosts,
2 pipes will be created called <b>path.in</b> and
<b>path.out</b>. Data written to <b>path.in</b> will be
received by the guest. Data written by the guest can be read
from <b>path.out</b>. QEMU will not create these fifos, and
requires them to be present.</p>

<p style="margin-left:22%; margin-top: 1em"><b>path</b>
forms part of the pipe path as described above. <b>path</b>
is required.</p>

<p style="margin-left:11%;"><b>-chardev
console,id=id</b></p>

<p style="margin-left:22%;">Send traffic from the guest to
QEMU's standard output. <b>console</b> does not take any
options.</p>

<p style="margin-left:22%; margin-top: 1em"><b>console</b>
is only available on Windows hosts.</p>

<p style="margin-left:11%;"><b>-chardev
serial,id=id,path=path</b></p>

<p style="margin-left:22%;">Send traffic from the guest to
a serial device on the host.</p>

<p style="margin-left:22%; margin-top: 1em">On Unix hosts
serial will actually accept any tty device, not only serial
lines.</p>

<p style="margin-left:22%; margin-top: 1em"><b>path</b>
specifies the name of the serial device to open.</p>

<p style="margin-left:11%;"><b>-chardev pty,id=id</b></p>

<p style="margin-left:22%;">Create a new pseudo-terminal on
the host and connect to it. <b>pty</b> does not take any
options.</p>

<p style="margin-left:22%; margin-top: 1em"><b>pty</b> is
not available on Windows hosts.</p>

<p style="margin-left:11%;"><b>-chardev
stdio,id=id[,signal=on|off]</b></p>

<p style="margin-left:22%;">Connect to standard input and
standard output of the QEMU process.</p>

<p style="margin-left:22%; margin-top: 1em"><b>signal</b>
controls if signals are enabled on the terminal, that
includes exiting QEMU with the key sequence Control-c. This
option is enabled by default, use <b>signal=off</b> to
disable it.</p>

<p style="margin-left:11%;"><b>-chardev
braille,id=id</b></p>

<p style="margin-left:22%;">Connect to a local BrlAPI
server. <b>braille</b> does not take any options.</p>

<p style="margin-left:11%;"><b>-chardev
tty,id=id,path=path</b></p>

<p style="margin-left:22%;"><b>tty</b> is only available on
Linux, Sun, FreeBSD, NetBSD, OpenBSD and DragonFlyBSD hosts.
It is an alias for <b>serial</b>.</p>

<p style="margin-left:22%; margin-top: 1em"><b>path</b>
specifies the path to the tty. <b>path</b> is required.</p>

<p style="margin-left:11%;"><b>-chardev
parallel,id=id,path=path <br>
-chardev parport,id=id,path=path</b></p>

<p style="margin-left:22%;"><b>parallel</b> is only
available on Linux, FreeBSD and DragonFlyBSD hosts.</p>

<p style="margin-left:22%; margin-top: 1em">Connect to a
local parallel port.</p>

<p style="margin-left:22%; margin-top: 1em"><b>path</b>
specifies the path to the parallel port device. <b>path</b>
is required.</p>

<p style="margin-left:11%;"><b>-chardev
spicevmc,id=id,debug=debug,name=name</b></p>

<p style="margin-left:22%;"><b>spicevmc</b> is only
available when spice support is built in.</p>

<p style="margin-left:22%; margin-top: 1em"><b>debug</b>
debug level for spicevmc</p>

<p style="margin-left:22%; margin-top: 1em"><b>name</b>
name of spice channel to connect to</p>

<p style="margin-left:22%; margin-top: 1em">Connect to a
spice virtual machine channel, such as vdiport.</p>

<p style="margin-left:11%;"><b>-chardev
spiceport,id=id,debug=debug,name=name</b></p>

<p style="margin-left:22%;"><b>spiceport</b> is only
available when spice support is built in.</p>

<p style="margin-left:22%; margin-top: 1em"><b>debug</b>
debug level for spicevmc</p>

<p style="margin-left:22%; margin-top: 1em"><b>name</b>
name of spice port to connect to</p>

<p style="margin-left:22%; margin-top: 1em">Connect to a
spice port, allowing a Spice client to handle the traffic
identified by a name (preferably a fqdn).</p>

<p style="margin-left:11%; margin-top: 1em"><b>TPM device
options</b> <br>
The general form of a TPM device option is: <b><br>
-tpmdev backend,id=id[,options]</b></p>

<p style="margin-left:22%;">The specific backend type will
determine the applicable options. The <b>-tpmdev</b> option
creates the TPM backend and requires a <b>-device</b> option
that specifies the TPM frontend interface model.</p>

<p style="margin-left:22%; margin-top: 1em">Use <b>-tpmdev
help</b> to print all available TPM backend types.</p>

<p style="margin-left:11%; margin-top: 1em">The available
backends are: <b><br>
-tpmdev
passthrough,id=id,path=path,cancel-path=cancel-path</b></p>

<p style="margin-left:22%;">(Linux-host only) Enable access
to the host's TPM using the passthrough driver.</p>

<p style="margin-left:22%; margin-top: 1em"><b>path</b>
specifies the path to the host's TPM device, i.e., on a
Linux host this would be <b>/dev/tpm0</b>. <b>path</b> is
optional and by default <b>/dev/tpm0</b> is used.</p>


<p style="margin-left:22%; margin-top: 1em"><b>cancel-path</b>
specifies the path to the host TPM device's sysfs entry
allowing for cancellation of an ongoing TPM command.
<b>cancel-path</b> is optional and by default QEMU will
search for the sysfs entry to use.</p>

<p style="margin-left:22%; margin-top: 1em">Some notes
about using the host's TPM with the passthrough driver:</p>

<p style="margin-left:22%; margin-top: 1em">The TPM device
accessed by the passthrough driver must not be used by any
other application on the host.</p>

<p style="margin-left:22%; margin-top: 1em">Since the
host's firmware (BIOS/UEFI) has already initialized the TPM,
the VM's firmware (BIOS/UEFI) will not be able to initialize
the TPM again and may therefore not show a TPM-specific menu
that would otherwise allow the user to configure the TPM,
e.g., allow the user to enable/disable or
activate/deactivate the TPM. Further, if TPM ownership is
released from within a VM then the host's TPM will get
disabled and deactivated. To enable and activate the TPM
again afterwards, the host has to be rebooted and the user
is required to enter the firmware's menu to enable and
activate the TPM. If the TPM is left disabled and/or
deactivated most TPM commands will fail.</p>

<p style="margin-left:22%; margin-top: 1em">To create a
passthrough TPM use the following two options:</p>

<pre style="margin-left:26%; margin-top: 1em">-tpmdev passthrough,id=tpm0 -device tpm-tis,tpmdev=tpm0</pre>


<p style="margin-left:22%; margin-top: 1em">Note that the
<b>-tpmdev</b> id is <b>tpm0</b> and is referenced by
<b>tpmdev=tpm0</b> in the device option.</p>

<p style="margin-left:11%;"><b>-tpmdev
emulator,id=id,chardev=dev</b></p>

<p style="margin-left:22%;">(Linux-host only) Enable access
to a TPM emulator using Unix domain socket based chardev
backend.</p>

<p style="margin-left:22%; margin-top: 1em"><b>chardev</b>
specifies the unique ID of a character device backend that
provides connection to the software TPM server.</p>

<p style="margin-left:22%; margin-top: 1em">To create a TPM
emulator backend device with chardev socket backend:</p>

<pre style="margin-left:26%; margin-top: 1em">-chardev socket,id=chrtpm,path=/tmp/swtpm-sock -tpmdev emulator,id=tpm0,chardev=chrtpm -device tpm-tis,tpmdev=tpm0</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Linux/Multiboot
boot specific</b> <br>
When using these options, you can use a given Linux or
Multiboot kernel without installing it in the disk image. It
can be useful for easier testing of various kernels. <b><br>
-kernel bzImage</b></p>

<p style="margin-left:22%;">Use bzImage as kernel image.
The kernel can be either a Linux kernel or in multiboot
format.</p>

<p style="margin-left:11%;"><b>-append cmdline</b></p>

<p style="margin-left:22%;">Use cmdline as kernel command
line</p>

<p style="margin-left:11%;"><b>-initrd file</b></p>

<p style="margin-left:22%;">Use file as initial ram
disk.</p>

<p style="margin-left:11%;"><b>-initrd file1
arg=foo,file2</b></p>

<p style="margin-left:22%;">This syntax is only available
with multiboot.</p>

<p style="margin-left:22%; margin-top: 1em">Use file1 and
file2 as modules and pass arg=foo as parameter to the first
module.</p>

<p style="margin-left:11%;"><b>-dtb file</b></p>

<p style="margin-left:22%;">Use file as a device tree
binary (dtb) image and pass it to the kernel on boot.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Debug/Expert
options <br>
-compat <br>

[deprecated-input=@var{input-policy}][,deprecated-output=@var{output-policy}]</b></p>

<p style="margin-left:22%;">Set policy for handling
deprecated management interfaces (experimental): <b><br>
deprecated-input=accept (default)</b></p>

<p style="margin-left:32%;">Accept deprecated commands and
arguments</p>


<p style="margin-left:22%;"><b>deprecated-input=reject</b></p>

<p style="margin-left:32%;">Reject deprecated commands and
arguments</p>


<p style="margin-left:22%;"><b>deprecated-input=crash</b></p>

<p style="margin-left:32%;">Crash on deprecated commands
and arguments</p>

<p style="margin-left:22%;"><b>deprecated-output=accept
(default)</b></p>

<p style="margin-left:32%;">Emit deprecated command results
and events</p>


<p style="margin-left:22%;"><b>deprecated-output=hide</b></p>

<p style="margin-left:32%;">Suppress deprecated command
results and events</p>

<p style="margin-left:22%; margin-top: 1em">Limitation:
covers only syntactic aspects of QMP.</p>

<p style="margin-left:11%;"><b>-compat <br>

[unstable-input=@var{input-policy}][,unstable-output=@var{output-policy}]</b></p>

<p style="margin-left:22%;">Set policy for handling
unstable management interfaces (experimental): <b><br>
unstable-input=accept (default)</b></p>

<p style="margin-left:32%;">Accept unstable commands and
arguments</p>


<p style="margin-left:22%;"><b>unstable-input=reject</b></p>

<p style="margin-left:32%;">Reject unstable commands and
arguments</p>


<p style="margin-left:22%;"><b>unstable-input=crash</b></p>

<p style="margin-left:32%;">Crash on unstable commands and
arguments</p>

<p style="margin-left:22%;"><b>unstable-output=accept
(default)</b></p>

<p style="margin-left:32%;">Emit unstable command results
and events</p>


<p style="margin-left:22%;"><b>unstable-output=hide</b></p>

<p style="margin-left:32%;">Suppress unstable command
results and events</p>

<p style="margin-left:22%; margin-top: 1em">Limitation:
covers only syntactic aspects of QMP.</p>

<p style="margin-left:11%;"><b>-fw_cfg
[name=]name,file=file</b></p>

<p style="margin-left:22%;">Add named fw_cfg entry with
contents from file file.</p>

<p style="margin-left:11%;"><b>-fw_cfg
[name=]name,string=str</b></p>

<p style="margin-left:22%;">Add named fw_cfg entry with
contents from string str.</p>

<p style="margin-left:22%; margin-top: 1em">The terminating
NUL character of the contents of str will not be included as
part of the fw_cfg item data. To insert contents with
embedded NUL characters, you have to use the file
parameter.</p>

<p style="margin-left:22%; margin-top: 1em">The fw_cfg
entries are passed by QEMU through to the guest.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<pre style="margin-left:26%; margin-top: 1em">-fw_cfg name=opt/com.mycompany/blob,file=./my_blob.bin</pre>


<p style="margin-left:22%; margin-top: 1em">creates an
fw_cfg entry named opt/com.mycompany/blob with contents from
./my_blob.bin.</p>

<p style="margin-left:11%;"><b>-serial dev</b></p>

<p style="margin-left:22%;">Redirect the virtual serial
port to host character device dev. The default device is
<b>vc</b> in graphical mode and <b>stdio</b> in non
graphical mode.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be used several times to simulate up to 4 serial ports.</p>

<p style="margin-left:22%; margin-top: 1em">Use <b>-serial
none</b> to disable all serial ports.</p>

<p style="margin-left:22%; margin-top: 1em">Available
character devices are: <b><br>
vc[:WxH]</b></p>

<p style="margin-left:32%;">Virtual console. Optionally, a
width and height can be given in pixel with</p>

<pre style="margin-left:37%; margin-top: 1em">vc:800x600</pre>


<p style="margin-left:32%; margin-top: 1em">It is also
possible to specify width or height in characters:</p>

<pre style="margin-left:37%; margin-top: 1em">vc:80Cx24C</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>pty</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>[Linux only] Pseudo TTY (a new PTY is automatically
allocated)</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>No device is allocated.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>null</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>void device</p></td></tr>
</table>

<p style="margin-left:22%;"><b>chardev:id</b></p>

<p style="margin-left:32%;">Use a named character device
defined with the <b>-chardev</b> option.</p>

<p style="margin-left:22%;"><b>/dev/XXX</b></p>

<p style="margin-left:32%;">[Linux only] Use host tty, e.g.
<b>/dev/ttyS0</b>. The host serial port parameters are set
according to the emulated ones.</p>

<p style="margin-left:22%;"><b>/dev/parportN</b></p>

<p style="margin-left:32%;">[Linux only, parallel port
only] Use host parallel port N. Currently SPP and EPP
parallel port features can be used.</p>

<p style="margin-left:22%;"><b>file:filename</b></p>

<p style="margin-left:32%;">Write output to filename. No
character can be read.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>stdio</b></p></td>
<td width="3%"></td>
<td width="51%">


<p>[Unix only] standard input/output</p></td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>pipe:filename</b></p>

<p style="margin-left:32%;">name pipe filename</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>COMn</b></p></td>
<td width="4%"></td>
<td width="57%">


<p>[Windows only] Use host serial port n</p></td>
<td width="11%">
</td></tr>
</table>


<p style="margin-left:22%;"><b>udp:[remote_host]:remote_port[@[src_ip]:src_port]</b></p>

<p style="margin-left:32%;">This implements UDP Net
Console. When remote_host or src_ip are not specified they
default to <b>0.0.0.0</b>. When not using a specified
src_port a random port is automatically chosen.</p>

<p style="margin-left:32%; margin-top: 1em">If you just
want a simple readonly console you can use <b>netcat</b> or
<b>nc</b>, by starting QEMU with: <b>-serial udp::4555</b>
and nc as: <b>nc -u -l -p 4555</b>. Any time QEMU writes
something to that port it will appear in the netconsole
session.</p>

<p style="margin-left:32%; margin-top: 1em">If you plan to
send characters back via netconsole or you want to stop and
start QEMU a lot of times, you should have QEMU use the same
source port each time by using something like <b>-serial
udp::4555@:4556</b> to QEMU. Another approach is to use a
patched version of netcat which can listen to a TCP port and
send and receive characters via udp. If you have a patched
version of netcat which activates telnet remote echo and
single char transfer, then you can use the following options
to set up a netcat redirector to allow telnet on port 5555
to access the QEMU port. <b><br>
QEMU Options:</b></p>

<p style="margin-left:43%;">-serial udp::4555@:4556</p>

<p style="margin-left:32%;"><b>netcat options:</b></p>

<p style="margin-left:43%;">-u -P 4555 -L 0.0.0.0:4556 -t
-p 5555 -I -T</p>

<p style="margin-left:32%;"><b>telnet options:</b></p>

<p style="margin-left:43%;">localhost 5555</p>


<p style="margin-left:22%;"><b>tcp:[host]:port[,server=on|off][,wait=on|off][,nodelay=on|off][,reconnect=seconds]</b></p>

<p style="margin-left:32%;">The TCP Net Console has two
modes of operation. It can send the serial I/O to a location
or wait for a connection from a location. By default the TCP
Net Console is sent to host at the port. If you use the
<b>server=on</b> option QEMU will wait for a client socket
application to connect to the port before continuing, unless
the <b>wait=on|off</b> option was specified. The
<b>nodelay=on|off</b> option disables the Nagle buffering
algorithm. The <b>reconnect=on</b> option only applies if
<b>server=no</b> is set, if the connection goes down it will
attempt to reconnect at the given interval. If host is
omitted, 0.0.0.0 is assumed. Only one TCP connection at a
time is accepted. You can use <b>telnet=on</b> to connect to
the corresponding character device. <b><br>
Example to send tcp console to 192.168.0.2 port 4444</b></p>

<p style="margin-left:43%;">-serial
<i>tcp:192.168.0.2:4444</i></p>

<p style="margin-left:32%;"><b>Example to listen and wait
on port 4444 for connection</b></p>

<p style="margin-left:43%;">-serial
<i>tcp::4444,server=on</i></p>

<p style="margin-left:32%;"><b>Example to not wait and
listen on ip 192.168.0.100 port <br>
4444</b></p>

<p style="margin-left:43%;">-serial
<i>tcp:192.168.0.100:4444,server=on,wait=off</i></p>


<p style="margin-left:22%;"><b>telnet:host:port[,server=on|off][,wait=on|off][,nodelay=on|off]</b></p>

<p style="margin-left:32%;">The telnet protocol is used
instead of raw tcp sockets. The options work the same as if
you had specified <b>-serial tcp</b>. The difference is that
the port acts like a telnet server or client using telnet
option negotiation. This will also allow you to send the
MAGIC_SYSRQ sequence if you use a telnet that supports
sending the break sequence. Typically in unix telnet you do
it with Control-] and then type &quot;send break&quot;
followed by pressing the enter key.</p>


<p style="margin-left:22%;"><b>websocket:host:port,server=on[,wait=on|off][,nodelay=on|off]</b></p>

<p style="margin-left:32%;">The WebSocket protocol is used
instead of raw tcp socket. The port acts as a WebSocket
server. Client mode is not supported.</p>


<p style="margin-left:22%;"><b>unix:path[,server=on|off][,wait=on|off][,reconnect=seconds]</b></p>

<p style="margin-left:32%;">A unix domain socket is used
instead of a tcp socket. The option works the same as if you
had specified <b>-serial tcp</b> except the unix domain
socket path is used for connections.</p>

<p style="margin-left:22%;"><b>mon:dev_string</b></p>

<p style="margin-left:32%;">This is a special option to
allow the monitor to be multiplexed onto another serial
port. The monitor is accessed with key sequence of Control-a
and then pressing c. dev_string should be any one of the
serial devices specified above. An example to multiplex the
monitor onto a telnet server listening on port 4444 would
be:</p>

<p style="margin-left:32%; margin-top: 1em"><b>-serial
mon:telnet::4444,server=on,wait=off</b></p>

<p style="margin-left:32%; margin-top: 1em">When the
monitor is multiplexed to stdio in this way, Ctrl+C will not
terminate QEMU any more but will be passed to the guest
instead.</p>

<p style="margin-left:22%;"><b>braille</b></p>

<p style="margin-left:32%;">Braille device. This will use
BrlAPI to display the braille output on a real or fake
device.</p>

<p style="margin-left:22%;"><b>msmouse</b></p>

<p style="margin-left:32%;">Three button serial mouse.
Configure the guest to use Microsoft protocol.</p>

<p style="margin-left:11%;"><b>-parallel dev</b></p>

<p style="margin-left:22%;">Redirect the virtual parallel
port to host device dev (same devices as the serial port).
On Linux hosts, <b>/dev/parportN</b> can be used to use
hardware devices connected on the corresponding host
parallel port.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be used several times to simulate up to 3 parallel
ports.</p>

<p style="margin-left:22%; margin-top: 1em">Use
<b>-parallel none</b> to disable all parallel ports.</p>

<p style="margin-left:11%;"><b>-monitor dev</b></p>

<p style="margin-left:22%;">Redirect the monitor to host
device dev (same devices as the serial port). The default
device is <b>vc</b> in graphical mode and <b>stdio</b> in
non graphical mode. Use <b>-monitor none</b> to disable the
default monitor.</p>

<p style="margin-left:11%;"><b>-qmp dev</b></p>

<p style="margin-left:22%;">Like -monitor but opens in
'control' mode.</p>

<p style="margin-left:11%;"><b>-qmp-pretty dev</b></p>

<p style="margin-left:22%;">Like -qmp but uses pretty JSON
formatting.</p>

<p style="margin-left:11%;"><b>-mon
[chardev=]name[,mode=readline|control][,pretty[=on|off]]</b></p>

<p style="margin-left:22%;">Setup monitor on chardev name.
<b>mode=control</b> configures a QMP monitor (a JSON
RPC-style protocol) and it is not the same as HMP, the human
monitor that has a &quot;(qemu)&quot; prompt. <b>pretty</b>
is only valid when <b>mode=control</b>, turning on JSON
pretty printing to ease human reading and debugging.</p>

<p style="margin-left:11%;"><b>-debugcon dev</b></p>

<p style="margin-left:22%;">Redirect the debug console to
host device dev (same devices as the serial port). The debug
console is an I/O port which is typically port 0xe9; writing
to that I/O port sends output to this device. The default
device is <b>vc</b> in graphical mode and <b>stdio</b> in
non graphical mode.</p>

<p style="margin-left:11%;"><b>-pidfile file</b></p>

<p style="margin-left:22%;">Store the QEMU process PID in
file. It is useful if you launch QEMU from a script.</p>

<p style="margin-left:11%;"><b>-singlestep</b></p>

<p style="margin-left:22%;">Run the emulation in single
step mode.</p>

<p style="margin-left:11%;"><b>--preconfig</b></p>

<p style="margin-left:22%;">Pause QEMU for interactive
configuration before the machine is created, which allows
querying and configuring properties that will affect machine
initialization. Use QMP command 'x-exit-preconfig' to exit
the preconfig state and move to the next state (i.e. run
guest if -S isn't used or pause the second time if -S is
used). This option is experimental.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-S</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Do not start CPU at startup (you must type 'c' in the
monitor).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>-overcommit mem-lock=on|off
<br>
-overcommit cpu-pm=on|off</b></p>

<p style="margin-left:22%;">Run qemu with hints about host
resource overcommit. The default is to assume that host
overcommits all resources.</p>

<p style="margin-left:22%; margin-top: 1em">Locking qemu
and guest memory can be enabled via <b>mem-lock=on</b>
(disabled by default). This works when host memory is not
overcommitted and reduces the worst-case latency for
guest.</p>

<p style="margin-left:22%; margin-top: 1em">Guest ability
to manage power state of host cpus (increasing latency for
other processes on the same host cpu, but decreasing latency
for guest) can be enabled via <b>cpu-pm=on</b> (disabled by
default). This works best when host CPU is not
overcommitted. When used, host estimates of CPU cycle and
power utilization will be incorrect, not taking into account
guest idle time.</p>

<p style="margin-left:11%;"><b>-gdb dev</b></p>

<p style="margin-left:22%;">Accept a gdb connection on
device dev (see the GDB usage chapter in the System
Emulation Users Guide). Note that this option does not pause
QEMU execution -- if you want QEMU to not start the guest
until you connect with gdb and issue a <b>continue</b>
command, you will need to also pass the <b>-S</b> option to
QEMU.</p>

<p style="margin-left:22%; margin-top: 1em">The most usual
configuration is to listen on a local TCP socket:</p>

<pre style="margin-left:26%; margin-top: 1em">-gdb tcp::3117</pre>


<p style="margin-left:22%; margin-top: 1em">but you can
specify other backends; UDP, pseudo TTY, or even stdio are
all reasonable use cases. For example, a stdio connection
allows you to start QEMU from within gdb and establish the
connection via a pipe:</p>

<pre style="margin-left:26%; margin-top: 1em">(gdb) target remote | exec qemu-system-x86_64 -gdb stdio ...</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Shorthand for -gdb <i>tcp::1234</i>, i.e. open a
gdbserver on TCP port 1234 (see the GDB usage chapter in the
System Emulation Users Guide).</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-d item1[,...]</b></p>

<p style="margin-left:22%;">Enable logging of specified
items. Use '-d help' for a list of log items.</p>

<p style="margin-left:11%;"><b>-D logfile</b></p>

<p style="margin-left:22%;">Output log in logfile instead
of to stderr</p>

<p style="margin-left:11%;"><b>-dfilter
range1[,...]</b></p>

<p style="margin-left:22%;">Filter debug output to that
relevant to a range of target addresses. The filter spec can
be either start+size, start-size or start..end where start
end and size are the addresses and sizes required. For
example:</p>

<pre style="margin-left:26%; margin-top: 1em">-dfilter 0x8000..0x8fff,0xffffffc000080000+0x200,0xffffffc000060000-0x1000</pre>


<p style="margin-left:22%; margin-top: 1em">Will dump
output for any code in the 0x1000 sized block starting at
0x8000 and the 0x200 sized block starting at
0xffffffc000080000 and another 0x1000 sized block starting
at 0xffffffc00005f000.</p>

<p style="margin-left:11%;"><b>-seed number</b></p>

<p style="margin-left:22%;">Force the guest to use a
deterministic pseudo-random number generator, seeded with
number. This does not affect crypto routines within the
host.</p>

<p style="margin-left:11%;"><b>-L path</b></p>

<p style="margin-left:22%;">Set the directory for the BIOS,
VGA BIOS and keymaps.</p>

<p style="margin-left:22%; margin-top: 1em">To list all the
data directories, use <b>-L help</b>.</p>

<p style="margin-left:11%;"><b>-bios file</b></p>

<p style="margin-left:22%;">Set the filename for the
BIOS.</p>

<p style="margin-left:11%;"><b>-enable-kvm</b></p>

<p style="margin-left:22%;">Enable KVM full virtualization
support. This option is only available if KVM support is
enabled when compiling.</p>

<p style="margin-left:11%;"><b>-xen-domid id</b></p>

<p style="margin-left:22%;">Specify xen guest domain id
(XEN only).</p>

<p style="margin-left:11%;"><b>-xen-attach</b></p>

<p style="margin-left:22%;">Attach to existing xen domain.
libxl will use this when starting QEMU (XEN only). Restrict
set of available xen operations to specified domain id (XEN
only).</p>

<p style="margin-left:11%;"><b>-no-reboot</b></p>

<p style="margin-left:22%;">Exit instead of rebooting.</p>

<p style="margin-left:11%;"><b>-no-shutdown</b></p>

<p style="margin-left:22%;">Don't exit QEMU on guest
shutdown, but instead only stop the emulation. This allows
for instance switching to monitor to commit changes to the
disk image.</p>

<p style="margin-left:11%;"><b>-action event=action</b></p>

<p style="margin-left:22%;">The action parameter serves to
modify QEMU's default behavior when certain guest events
occur. It provides a generic method for specifying the same
behaviors that are modified by the <b>-no-reboot</b> and
<b>-no-shutdown</b> parameters.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<p style="margin-left:22%; margin-top: 1em"><b>-action
panic=none -action reboot=shutdown,shutdown=pause -watchdog
i6300esb -action watchdog=pause</b></p>

<p style="margin-left:11%;"><b>-loadvm file</b></p>

<p style="margin-left:22%;">Start right away with a saved
state (<b>loadvm</b> in monitor)</p>

<p style="margin-left:11%;"><b>-daemonize</b></p>

<p style="margin-left:22%;">Daemonize the QEMU process
after initialization. QEMU will not detach from standard IO
until it is ready to receive connections on any of its
devices. This option is a useful way for external programs
to launch QEMU without having to cope with initialization
race conditions.</p>

<p style="margin-left:11%;"><b>-option-rom file</b></p>

<p style="margin-left:22%;">Load the contents of file as an
option ROM. This option is useful to load things like
EtherBoot.</p>

<p style="margin-left:11%;"><b>-rtc <br>

[base=utc|localtime|datetime][,clock=host|rt|vm][,driftfix=none|slew]</b></p>

<p style="margin-left:22%;">Specify <b>base</b> as
<b>utc</b> or <b>localtime</b> to let the RTC start at the
current UTC or local time, respectively. <b>localtime</b> is
required for correct date in MS-DOS or Windows. To start at
a specific point in time, provide datetime in the format
<b>2006-06-17T16:01:21</b> or <b>2006-06-17</b>. The default
base is UTC.</p>

<p style="margin-left:22%; margin-top: 1em">By default the
RTC is driven by the host system time. This allows using of
the RTC as accurate reference clock inside the guest,
specifically if the host time is smoothly following an
accurate external reference clock, e.g. via NTP. If you want
to isolate the guest time from the host, you can set
<b>clock</b> to <b>rt</b> instead, which provides a host
monotonic clock if host support it. To even prevent the RTC
from progressing during suspension, you can set <b>clock</b>
to <b>vm</b> (virtual clock). '<b>clock=vm</b>' is
recommended especially in icount mode in order to preserve
determinism; however, note that in icount mode the speed of
the virtual clock is variable and can in general differ from
the host clock.</p>

<p style="margin-left:22%; margin-top: 1em">Enable
<b>driftfix</b> (i386 targets only) if you experience time
drift problems, specifically with Windows' ACPI HAL. This
option will try to figure out how many timer interrupts were
not processed by the Windows guest and will re-inject
them.</p>

<p style="margin-left:11%;"><b>-icount <br>

[shift=N|auto][,align=on|off][,sleep=on|off][,rr=record|replay,rrfile=filename[,rrsnapshot=snapshot]]</b></p>

<p style="margin-left:22%;">Enable virtual instruction
counter. The virtual cpu will execute one instruction every
2^N ns of virtual time. If <b>auto</b> is specified then the
virtual cpu speed will be automatically adjusted to keep
virtual time within a few seconds of real time.</p>

<p style="margin-left:22%; margin-top: 1em">Note that while
this option can give deterministic behavior, it does not
provide cycle accurate emulation. Modern CPUs contain
superscalar out of order cores with complex cache
hierarchies. The number of instructions executed often has
little or no correlation with actual performance.</p>

<p style="margin-left:22%; margin-top: 1em">When the
virtual cpu is sleeping, the virtual time will advance at
default speed unless <b>sleep=on</b> is specified. With
<b>sleep=on</b>, the virtual time will jump to the next
timer deadline instantly whenever the virtual cpu goes to
sleep mode and will not advance if no timer is enabled. This
behavior gives deterministic execution times from the guest
point of view. The default if icount is enabled is
<b>sleep=off</b>. <b>sleep=on</b> cannot be used together
with either <b>shift=auto</b> or <b>align=on</b>.</p>


<p style="margin-left:22%; margin-top: 1em"><b>align=on</b>
will activate the delay algorithm which will try to
synchronise the host clock and the virtual clock. The goal
is to have a guest running at the real frequency imposed by
the shift option. Whenever the guest clock is behind the
host clock and if <b>align=on</b> is specified then we print
a message to the user to inform about the delay. Currently
this option does not work when <b>shift</b> is <b>auto</b>.
Note: The sync algorithm will work for those shift values
for which the guest clock runs ahead of the host clock.
Typically this happens when the shift value is high (how
high depends on the host machine). The default if icount is
enabled is <b>align=off</b>.</p>

<p style="margin-left:22%; margin-top: 1em">When the
<b>rr</b> option is specified deterministic record/replay is
enabled. The <b>rrfile=</b> option must also be provided to
specify the path to the replay log. In record mode data is
written to this file, and in replay mode it is read back. If
the <b>rrsnapshot</b> option is given then it specifies a VM
snapshot name. In record mode, a new VM snapshot with the
given name is created at the start of execution recording.
In replay mode this option specifies the snapshot name used
to load the initial VM state.</p>

<p style="margin-left:11%;"><b>-watchdog model</b></p>

<p style="margin-left:22%;">Create a virtual hardware
watchdog device. Once enabled (by a guest action), the
watchdog must be periodically polled by an agent inside the
guest or else the guest will be restarted. Choose a model
for which your guest has drivers.</p>

<p style="margin-left:22%; margin-top: 1em">The model is
the model of hardware watchdog to emulate. Use <b>-watchdog
help</b> to list available hardware models. Only one
watchdog can be enabled for a guest.</p>

<p style="margin-left:22%; margin-top: 1em">The following
models may be available:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>ib700</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>iBASE 700 is a very simple ISA watchdog with a single
timer.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>i6300esb</b></p>

<p style="margin-left:32%;">Intel 6300ESB I/O controller
hub is a much more featureful PCI-based dual-timer
watchdog.</p>

<p style="margin-left:22%;"><b>diag288</b></p>

<p style="margin-left:32%;">A virtual watchdog for s390x
backed by the diagnose 288 hypercall (currently KVM
only).</p>

<p style="margin-left:11%;"><b>-watchdog-action
action</b></p>

<p style="margin-left:22%;">The action controls what QEMU
will do when the watchdog timer expires. The default is
<b>reset</b> (forcefully reset the guest). Other possible
actions are: <b>shutdown</b> (attempt to gracefully shutdown
the guest), <b>poweroff</b> (forcefully poweroff the guest),
<b>inject-nmi</b> (inject a NMI into the guest),
<b>pause</b> (pause the guest), <b>debug</b> (print a debug
message and continue), or <b>none</b> (do nothing).</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
<b>shutdown</b> action requires that the guest responds to
ACPI signals, which it may not be able to do in the sort of
situations where the watchdog would have expired, and thus
<b>-watchdog-action shutdown</b> is not recommended for
production use.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<p style="margin-left:22%; margin-top: 1em"><b>-watchdog
i6300esb -watchdog-action pause</b>; <b>-watchdog
ib700</b></p>

<p style="margin-left:11%;"><b>-echr
numeric_ascii_value</b></p>

<p style="margin-left:22%;">Change the escape character
used for switching to the monitor when using monitor and
serial sharing. The default is <b>0x01</b> when using the
<b>-nographic</b> option. <b>0x01</b> is equal to pressing
<b>Control-a</b>. You can select a different character from
the ascii control keys where 1 through 26 map to Control-a
through Control-z. For instance you could use the either of
the following to change the escape character to
Control-t.</p>

<p style="margin-left:22%; margin-top: 1em"><b>-echr
0x14</b>; <b>-echr 20</b></p>

<p style="margin-left:11%;"><b>-incoming
tcp:[host]:port[,to=maxport][,ipv4=on|off][,ipv6=on|off]
<br>
-incoming rdma:host:port[,ipv4=on|off][,ipv6=on|off]</b></p>

<p style="margin-left:22%;">Prepare for incoming migration,
listen on a given tcp port.</p>

<p style="margin-left:11%;"><b>-incoming
unix:socketpath</b></p>

<p style="margin-left:22%;">Prepare for incoming migration,
listen on a given unix socket.</p>

<p style="margin-left:11%;"><b>-incoming fd:fd</b></p>

<p style="margin-left:22%;">Accept incoming migration from
a given filedescriptor.</p>

<p style="margin-left:11%;"><b>-incoming
exec:cmdline</b></p>

<p style="margin-left:22%;">Accept incoming migration as an
output from specified external command.</p>

<p style="margin-left:11%;"><b>-incoming defer</b></p>

<p style="margin-left:22%;">Wait for the URI to be
specified via migrate_incoming. The monitor can be used to
change settings (such as migration parameters) prior to
issuing the migrate_incoming to allow the migration to
begin.</p>

<p style="margin-left:11%;"><b>-only-migratable</b></p>

<p style="margin-left:22%;">Only allow migratable devices.
Devices will not be allowed to enter an unmigratable
state.</p>

<p style="margin-left:11%;"><b>-nodefaults</b></p>

<p style="margin-left:22%;">Don't create default devices.
Normally, QEMU sets the default devices like serial port,
parallel port, virtual console, monitor device, VGA adapter,
floppy and CD-ROM drive and others. The <b>-nodefaults</b>
option will disable all those default devices.</p>

<p style="margin-left:11%;"><b>-chroot dir</b></p>

<p style="margin-left:22%;">Immediately before starting
guest execution, chroot to the specified directory.
Especially useful in combination with -runas.</p>

<p style="margin-left:11%;"><b>-runas user</b></p>

<p style="margin-left:22%;">Immediately before starting
guest execution, drop root privileges, switching to the
specified user.</p>

<p style="margin-left:11%;"><b>-prom-env
variable=value</b></p>

<p style="margin-left:22%;">Set OpenBIOS nvram variable to
given value (PPC, SPARC only).</p>
<pre style="margin-left:26%; margin-top: 1em">qemu-system-sparc -prom-env 'auto-boot?=false' \
 -prom-env 'boot-device=sd(0,2,0):d' -prom-env 'boot-args=linux single'

qemu-system-ppc -prom-env 'auto-boot?=false' \
 -prom-env 'boot-device=hd:2,\yaboot' \
 -prom-env 'boot-args=conf=hd:2,\yaboot.conf'</pre>


<p style="margin-left:11%;"><b>-semihosting</b></p>

<p style="margin-left:22%;">Enable semihosting mode (ARM,
M68K, Xtensa, MIPS, Nios II, RISC-V only).</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
allows guest direct access to the host filesystem, so should
only be used with a trusted guest OS.</p>

<p style="margin-left:22%; margin-top: 1em">See the
-semihosting-config option documentation for further
information about the facilities this enables.</p>

<p style="margin-left:11%;"><b>-semihosting-config <br>

[enable=on|off][,target=native|gdb|auto][,chardev=id][,arg=str[,...]]</b></p>

<p style="margin-left:22%;">Enable and configure
semihosting (ARM, M68K, Xtensa, MIPS, Nios II, RISC-V
only).</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
allows guest direct access to the host filesystem, so should
only be used with a trusted guest OS.</p>

<p style="margin-left:22%; margin-top: 1em">On Arm this
implements the standard semihosting API, version 2.0.</p>

<p style="margin-left:22%; margin-top: 1em">On M68K this
implements the &quot;ColdFire GDB&quot; interface used by
libgloss.</p>

<p style="margin-left:22%; margin-top: 1em">Xtensa
semihosting provides basic file IO calls, such as
open/read/write/seek/select. Tensilica baremetal libc for
ISS and linux platform &quot;sim&quot; use this
interface.</p>

<p style="margin-left:22%; margin-top: 1em">On RISC-V this
implements the standard semihosting API, version 0.2.
<b><br>
target=native|gdb|auto</b></p>

<p style="margin-left:32%;">Defines where the semihosting
calls will be addressed, to QEMU (<b>native</b>) or to GDB
(<b>gdb</b>). The default is <b>auto</b>, which means
<b>gdb</b> during debug sessions and <b>native</b>
otherwise.</p>

<p style="margin-left:22%;"><b>chardev=str1</b></p>

<p style="margin-left:32%;">Send the output to a chardev
backend output for native or auto output when not in gdb</p>


<p style="margin-left:22%;"><b>arg=str1,arg=str2,...</b></p>

<p style="margin-left:32%;">Allows the user to pass input
arguments, and can be used multiple times to build up a
list. The old-style <b>-kernel</b>/<b>-append</b> method of
passing a command line is still supported for backward
compatibility. If both the <b>--semihosting-config arg</b>
and the <b>-kernel</b>/<b>-append</b> are specified, the
former is passed to semihosting as it always takes
precedence.</p>

<p style="margin-left:11%;"><b>-old-param</b></p>

<p style="margin-left:22%;">Old param mode (ARM only).</p>

<p style="margin-left:11%;"><b>-sandbox <br>

arg[,obsolete=string][,elevateprivileges=string][,spawn=string][,resourcecontrol=string]</b></p>

<p style="margin-left:22%;">Enable Seccomp mode 2 system
call filter. 'on' will enable syscall filtering and 'off'
will disable it. The default is 'off'. <b><br>
obsolete=string</b></p>

<p style="margin-left:32%;">Enable Obsolete system
calls</p>


<p style="margin-left:22%;"><b>elevateprivileges=string</b></p>

<p style="margin-left:32%;">Disable set*uid|gid system
calls</p>

<p style="margin-left:22%;"><b>spawn=string</b></p>

<p style="margin-left:32%;">Disable *fork and execve</p>


<p style="margin-left:22%;"><b>resourcecontrol=string</b></p>

<p style="margin-left:32%;">Disable process affinity and
schedular priority</p>

<p style="margin-left:11%;"><b>-readconfig file</b></p>

<p style="margin-left:22%;">Read device configuration from
file. This approach is useful when you want to spawn QEMU
process with many command line options but you don't want to
exceed the command line character limit.</p>

<p style="margin-left:11%;"><b>-no-user-config</b></p>

<p style="margin-left:22%;">The <b>-no-user-config</b>
option makes QEMU not load any of the user-provided config
files on sysconfdir.</p>

<p style="margin-left:11%;"><b>-trace
[[enable=]pattern][,events=file][,file=file]</b></p>

<p style="margin-left:22%;">Specify tracing options.</p>


<p style="margin-left:22%; margin-top: 1em"><b>[enable=]PATTERN</b></p>

<p style="margin-left:26%;">Immediately enable events
matching <i>PATTERN</i> (either event name or a globbing
pattern). This option is only available if QEMU has been
compiled with the <b>simple</b>, <b>log</b> or <b>ftrace</b>
tracing backend. To specify multiple events or patterns,
specify the <b>-trace</b> option multiple times.</p>

<p style="margin-left:26%; margin-top: 1em">Use <b>-trace
help</b> to print a list of names of trace points.</p>


<p style="margin-left:22%; margin-top: 1em"><b>events=FILE</b></p>

<p style="margin-left:26%;">Immediately enable events
listed in <i>FILE</i>. The file must contain one event name
(as listed in the <b>trace-events-all</b> file) per line;
globbing patterns are accepted too. This option is only
available if QEMU has been compiled with the <b>simple</b>,
<b>log</b> or <b>ftrace</b> tracing backend.</p>


<p style="margin-left:22%; margin-top: 1em"><b>file=FILE</b></p>

<p style="margin-left:26%;">Log output traces to
<i>FILE</i>. This option is only available if QEMU has been
compiled with the <b>simple</b> tracing backend.</p>

<p style="margin-left:11%;"><b>-plugin
file=file[,argname=argvalue]</b></p>

<p style="margin-left:22%;">Load a plugin. <b><br>
file=file</b></p>

<p style="margin-left:32%;">Load the given plugin from a
shared library file.</p>

<p style="margin-left:22%;"><b>argname=argvalue</b></p>

<p style="margin-left:32%;">Argument passed to the plugin.
(Can be given multiple times.)</p>

<p style="margin-left:11%;"><b>-enable-fips</b></p>

<p style="margin-left:22%;">Enable FIPS 140-2 compliance
mode.</p>

<p style="margin-left:11%;"><b>-msg
[timestamp[=on|off]][,guest-name[=on|off]]</b></p>

<p style="margin-left:22%;">Control error message format.
<b><br>
timestamp=on|off</b></p>

<p style="margin-left:32%;">Prefix messages with a
timestamp. Default is off.</p>

<p style="margin-left:22%;"><b>guest-name=on|off</b></p>

<p style="margin-left:32%;">Prefix messages with guest name
but only if -name guest option is set otherwise the option
is ignored. Default is off.</p>

<p style="margin-left:11%;"><b>-dump-vmstate file</b></p>

<p style="margin-left:22%;">Dump json-encoded vmstate
information for current machine type to file in file</p>


<p style="margin-left:11%;"><b>-enable-sync-profile</b></p>

<p style="margin-left:22%;">Enable synchronization
profiling.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Generic
object creation <br>
-object typename[,prop1=value1,...]</b></p>

<p style="margin-left:22%;">Create a new object of type
typename setting properties in the order they are specified.
Note that the 'id' property must be set. These objects are
placed in the '/objects' path. <b><br>
-object <br>

memory-backend-file,id=id,size=size,mem-path=dir,share=on|off,discard-data=on|off,merge=on|off,dump=on|off,prealloc=on|off,host-nodes=host-nodes,policy=default|preferred|bind|interleave,align=align,readonly=on|off</b></p>

<p style="margin-left:32%;">Creates a memory file backend
object, which can be used to back the guest RAM with huge
pages.</p>

<p style="margin-left:32%; margin-top: 1em">The <b>id</b>
parameter is a unique ID that will be used to reference this
memory region in other parameters, e.g. <b>-numa</b>,
<b>-device nvdimm</b>, etc.</p>

<p style="margin-left:32%; margin-top: 1em">The <b>size</b>
option provides the size of the memory region, and accepts
common suffixes, e.g. <b>500M</b>.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>mem-path</b> provides the path to either a shared memory
or huge page filesystem mount.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>share</b> boolean option determines whether the memory
region is marked as private to QEMU, or shared. The latter
allows a co-operating external process to access the QEMU
memory region.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>share</b> is also required for pvrdma devices due to
limitations in the RDMA API provided by Linux.</p>

<p style="margin-left:32%; margin-top: 1em">Setting
share=on might affect the ability to configure NUMA bindings
for the memory backend under some circumstances, see
Documentation/vm/numa_memory_policy.txt on the Linux kernel
source tree for additional details.</p>

<p style="margin-left:32%; margin-top: 1em">Setting the
<b>discard-data</b> boolean option to on indicates that file
contents can be destroyed when QEMU exits, to avoid
unnecessarily flushing data to the backing file. Note that
<b>discard-data</b> is only an optimization, and QEMU might
not discard file contents if it aborts unexpectedly or is
terminated using SIGKILL.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>merge</b> boolean option enables memory merge, also known
as MADV_MERGEABLE, so that Kernel Samepage Merging will
consider the pages for memory deduplication.</p>

<p style="margin-left:32%; margin-top: 1em">Setting the
<b>dump</b> boolean option to off excludes the memory from
core dumps. This feature is also known as MADV_DONTDUMP.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>prealloc</b> boolean option enables memory
preallocation.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>host-nodes</b> option binds the memory range to a list of
NUMA host nodes.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>policy</b> option sets the NUMA policy to one of the
following values: <b><br>
default</b></p>

<p style="margin-left:43%;">default host policy</p>

<p style="margin-left:32%;"><b>preferred</b></p>

<p style="margin-left:43%;">prefer the given host node list
for allocation</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="6%">


<p><b>bind</b></p></td>
<td width="5%"></td>
<td width="57%">


<p>restrict memory allocation to the given host node
list</p> </td></tr>
</table>

<p style="margin-left:32%;"><b>interleave</b></p>

<p style="margin-left:43%;">interleave memory allocations
across the given host node list</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>align</b> option specifies the base address alignment
when QEMU mmap(2) <b>mem-path</b>, and accepts common
suffixes, eg <b>2M</b>. Some backend store specified by
<b>mem-path</b> requires an alignment different than the
default one used by QEMU, eg the device DAX /dev/dax0.0
requires 2M alignment rather than 4K. In such cases, users
can specify the required alignment via this option.</p>

<p style="margin-left:32%; margin-top: 1em">The <b>pmem</b>
option specifies whether the backing file specified by
<b>mem-path</b> is in host persistent memory that can be
accessed using the SNIA NVM programming model (e.g. Intel
NVDIMM). If <b>pmem</b> is set to 'on', QEMU will take
necessary operations to guarantee the persistence of its own
writes to <b>mem-path</b> (e.g. in vNVDIMM label emulation
and live migration). Also, we will map the backend-file with
MAP_SYNC flag, which ensures the file metadata is in sync
for <b>mem-path</b> in case of host crash or a power
failure. MAP_SYNC requires support from both the host kernel
(since Linux kernel 4.15) and the filesystem of
<b>mem-path</b> mounted with DAX option.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>readonly</b> option specifies whether the backing file is
opened read-only or read-write (default).</p>

<p style="margin-left:22%;"><b>-object <br>

memory-backend-ram,id=id,merge=on|off,dump=on|off,share=on|off,prealloc=on|off,size=size,host-nodes=host-nodes,policy=default|preferred|bind|interleave</b></p>

<p style="margin-left:32%;">Creates a memory backend
object, which can be used to back the guest RAM. Memory
backend objects offer more control than the <b>-m</b> option
that is traditionally used to define guest RAM. Please refer
to <b>memory-backend-file</b> for a description of the
options.</p>

<p style="margin-left:22%;"><b>-object <br>

memory-backend-memfd,id=id,merge=on|off,dump=on|off,share=on|off,prealloc=on|off,size=size,host-nodes=host-nodes,policy=default|preferred|bind|interleave,seal=on|off,hugetlb=on|off,hugetlbsize=size</b></p>

<p style="margin-left:32%;">Creates an anonymous memory
file backend object, which allows QEMU to share the memory
with an external process (e.g. when using vhost-user). The
memory is allocated with memfd and optional sealing. (Linux
only)</p>

<p style="margin-left:32%; margin-top: 1em">The <b>seal</b>
option creates a sealed-file, that will block further
resizing the memory ('on' by default).</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>hugetlb</b> option specify the file to be created resides
in the hugetlbfs filesystem (since Linux 4.14). Used in
conjunction with the <b>hugetlb</b> option, the
<b>hugetlbsize</b> option specify the hugetlb page size on
systems that support multiple hugetlb page sizes (it must be
a power of 2 value supported by the system).</p>

<p style="margin-left:32%; margin-top: 1em">In some
versions of Linux, the <b>hugetlb</b> option is incompatible
with the <b>seal</b> option (requires at least Linux
4.16).</p>

<p style="margin-left:32%; margin-top: 1em">Please refer to
<b>memory-backend-file</b> for a description of the other
options.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>share</b> boolean option is on by default with memfd.</p>

<p style="margin-left:22%;"><b>-object
rng-builtin,id=id</b></p>

<p style="margin-left:32%;">Creates a random number
generator backend which obtains entropy from QEMU builtin
functions. The <b>id</b> parameter is a unique ID that will
be used to reference this entropy backend from the
<b>virtio-rng</b> device. By default, the <b>virtio-rng</b>
device uses this RNG backend.</p>

<p style="margin-left:22%;"><b>-object
rng-random,id=id,filename=/dev/random</b></p>

<p style="margin-left:32%;">Creates a random number
generator backend which obtains entropy from a device on the
host. The <b>id</b> parameter is a unique ID that will be
used to reference this entropy backend from the
<b>virtio-rng</b> device. The <b>filename</b> parameter
specifies which file to obtain entropy from and if omitted
defaults to <b>/dev/urandom</b>.</p>

<p style="margin-left:22%;"><b>-object
rng-egd,id=id,chardev=chardevid</b></p>

<p style="margin-left:32%;">Creates a random number
generator backend which obtains entropy from an external
daemon running on the host. The <b>id</b> parameter is a
unique ID that will be used to reference this entropy
backend from the <b>virtio-rng</b> device. The
<b>chardev</b> parameter is the unique ID of a character
device backend that provides the connection to the RNG
daemon.</p>

<p style="margin-left:22%;"><b>-object <br>

tls-creds-anon,id=id,endpoint=endpoint,dir=/path/to/cred/dir,verify-peer=on|off</b></p>

<p style="margin-left:32%;">Creates a TLS anonymous
credentials object, which can be used to provide TLS support
on network backends. The <b>id</b> parameter is a unique ID
which network backends will use to access the credentials.
The <b>endpoint</b> is either <b>server</b> or <b>client</b>
depending on whether the QEMU network backend that uses the
credentials will be acting as a client or as a server. If
<b>verify-peer</b> is enabled (the default) then once the
handshake is completed, the peer credentials will be
verified, though this is a no-op for anonymous
credentials.</p>

<p style="margin-left:32%; margin-top: 1em">The dir
parameter tells QEMU where to find the credential files. For
server endpoints, this directory may contain a file
dh-params.pem providing diffie-hellman parameters to use for
the TLS server. If the file is missing, QEMU will generate a
set of DH parameters at startup. This is a computationally
expensive operation that consumes random pool entropy, so it
is recommended that a persistent set of parameters be
generated upfront and saved.</p>

<p style="margin-left:22%;"><b>-object <br>

tls-creds-psk,id=id,endpoint=endpoint,dir=/path/to/keys/dir[,username=username]</b></p>

<p style="margin-left:32%;">Creates a TLS Pre-Shared Keys
(PSK) credentials object, which can be used to provide TLS
support on network backends. The <b>id</b> parameter is a
unique ID which network backends will use to access the
credentials. The <b>endpoint</b> is either <b>server</b> or
<b>client</b> depending on whether the QEMU network backend
that uses the credentials will be acting as a client or as a
server. For clients only, <b>username</b> is the username
which will be sent to the server. If omitted it defaults to
&quot;qemu&quot;.</p>

<p style="margin-left:32%; margin-top: 1em">The dir
parameter tells QEMU where to find the keys file. It is
called &quot;dir/keys.psk&quot; and contains
&quot;username:key&quot; pairs. This file can most easily be
created using the GnuTLS <b>psktool</b> program.</p>

<p style="margin-left:32%; margin-top: 1em">For server
endpoints, dir may also contain a file dh-params.pem
providing diffie-hellman parameters to use for the TLS
server. If the file is missing, QEMU will generate a set of
DH parameters at startup. This is a computationally
expensive operation that consumes random pool entropy, so it
is recommended that a persistent set of parameters be
generated up front and saved.</p>

<p style="margin-left:22%;"><b>-object <br>

tls-creds-x509,id=id,endpoint=endpoint,dir=/path/to/cred/dir,priority=priority,verify-peer=on|off,passwordid=id</b></p>

<p style="margin-left:32%;">Creates a TLS anonymous
credentials object, which can be used to provide TLS support
on network backends. The <b>id</b> parameter is a unique ID
which network backends will use to access the credentials.
The <b>endpoint</b> is either <b>server</b> or <b>client</b>
depending on whether the QEMU network backend that uses the
credentials will be acting as a client or as a server. If
<b>verify-peer</b> is enabled (the default) then once the
handshake is completed, the peer credentials will be
verified. With x509 certificates, this implies that the
clients must be provided with valid client certificates
too.</p>

<p style="margin-left:32%; margin-top: 1em">The dir
parameter tells QEMU where to find the credential files. For
server endpoints, this directory may contain a file
dh-params.pem providing diffie-hellman parameters to use for
the TLS server. If the file is missing, QEMU will generate a
set of DH parameters at startup. This is a computationally
expensive operation that consumes random pool entropy, so it
is recommended that a persistent set of parameters be
generated upfront and saved.</p>

<p style="margin-left:32%; margin-top: 1em">For x509
certificate credentials the directory will contain further
files providing the x509 certificates. The certificates must
be stored in PEM format, in filenames ca-cert.pem,
ca-crl.pem (optional), server-cert.pem (only servers),
server-key.pem (only servers), client-cert.pem (only
clients), and client-key.pem (only clients).</p>

<p style="margin-left:32%; margin-top: 1em">For the
server-key.pem and client-key.pem files which contain
sensitive private keys, it is possible to use an encrypted
version by providing the passwordid parameter. This provides
the ID of a previously created <b>secret</b> object
containing the password for decryption.</p>

<p style="margin-left:32%; margin-top: 1em">The priority
parameter allows to override the global default priority
used by gnutls. This can be useful if the system
administrator needs to use a weaker set of crypto priorities
for QEMU without potentially forcing the weakness onto all
applications. Or conversely if one wants wants a stronger
default for QEMU than for all other applications, they can
do this through this parameter. Its format is a gnutls
priority string as described at
<i>https://gnutls.org/manual/html_node/Priority-Strings.html</i>.</p>

<p style="margin-left:22%;"><b>-object
tls-cipher-suites,id=id,priority=priority</b></p>

<p style="margin-left:32%;">Creates a TLS cipher suites
object, which can be used to control the TLS cipher/protocol
algorithms that applications are permitted to use.</p>

<p style="margin-left:32%; margin-top: 1em">The <b>id</b>
parameter is a unique ID which frontends will use to access
the ordered list of permitted TLS cipher suites from the
host.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>priority</b> parameter allows to override the global
default priority used by gnutls. This can be useful if the
system administrator needs to use a weaker set of crypto
priorities for QEMU without potentially forcing the weakness
onto all applications. Or conversely if one wants wants a
stronger default for QEMU than for all other applications,
they can do this through this parameter. Its format is a
gnutls priority string as described at
<i>https://gnutls.org/manual/html_node/Priority-Strings.html</i>.</p>

<p style="margin-left:32%; margin-top: 1em">An example of
use of this object is to control UEFI HTTPS Boot. The
tls-cipher-suites object exposes the ordered list of
permitted TLS cipher suites from the host side to the guest
firmware, via fw_cfg. The list is represented as an array of
IANA_TLS_CIPHER objects. The firmware uses the
IANA_TLS_CIPHER array for configuring guest-side TLS.</p>

<p style="margin-left:32%; margin-top: 1em">In the
following example, the priority at which the host-side
policy is retrieved is given by the <b>priority</b>
property. Given that QEMU uses GNUTLS,
<b>priority=@SYSTEM</b> may be used to refer to
/etc/crypto-policies/back-ends/gnutls.config.</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
    -object tls-cipher-suites,id=mysuite0,priority=@SYSTEM \
    -fw_cfg name=etc/edk2/https/ciphers,gen_id=mysuite0</pre>


<p style="margin-left:22%;"><b>-object <br>

filter-buffer,id=id,netdev=netdevid,interval=t[,queue=all|rx|tx][,status=on|off][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</b></p>

<p style="margin-left:32%;">Interval t can't be 0, this
filter batches the packet delivery: all packets arriving in
a given interval on netdev netdevid are delayed until the
end of the interval. Interval is in microseconds.
<b>status</b> is optional that indicate whether the
netfilter is on (enabled) or off (disabled), the default
status for netfilter will be 'on'.</p>

<p style="margin-left:32%; margin-top: 1em">queue all|rx|tx
is an option that can be applied to any netfilter.</p>

<p style="margin-left:32%; margin-top: 1em"><b>all</b>: the
filter is attached both to the receive and the transmit
queue of the netdev (default).</p>

<p style="margin-left:32%; margin-top: 1em"><b>rx</b>: the
filter is attached to the receive queue of the netdev, where
it will receive packets sent to the netdev.</p>

<p style="margin-left:32%; margin-top: 1em"><b>tx</b>: the
filter is attached to the transmit queue of the netdev,
where it will receive packets sent by the netdev.</p>

<p style="margin-left:32%; margin-top: 1em">position
head|tail|id=&lt;id&gt; is an option to specify where the
filter should be inserted in the filter list. It can be
applied to any netfilter.</p>

<p style="margin-left:32%; margin-top: 1em"><b>head</b>:
the filter is inserted at the head of the filter list,
before any existing filters.</p>

<p style="margin-left:32%; margin-top: 1em"><b>tail</b>:
the filter is inserted at the tail of the filter list,
behind any existing filters (default).</p>


<p style="margin-left:32%; margin-top: 1em"><b>id=&lt;id&gt;</b>:
the filter is inserted before or behind the filter specified
by &lt;id&gt;, see the insert option below.</p>

<p style="margin-left:32%; margin-top: 1em">insert
behind|before is an option to specify where to insert the
new filter relative to the one specified with
position=id=&lt;id&gt;. It can be applied to any
netfilter.</p>

<p style="margin-left:32%; margin-top: 1em"><b>before</b>:
insert before the specified filter.</p>

<p style="margin-left:32%; margin-top: 1em"><b>behind</b>:
insert behind the specified filter (default).</p>

<p style="margin-left:22%;"><b>-object <br>

filter-mirror,id=id,netdev=netdevid,outdev=chardevid,queue=all|rx|tx[,vnet_hdr_support][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</b></p>

<p style="margin-left:32%;">filter-mirror on netdev
netdevid,mirror net packet to chardevchardevid, if it has
the vnet_hdr_support flag, filter-mirror will mirror packet
with vnet_hdr_len.</p>

<p style="margin-left:22%;"><b>-object <br>

filter-redirector,id=id,netdev=netdevid,indev=chardevid,outdev=chardevid,queue=all|rx|tx[,vnet_hdr_support][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</b></p>

<p style="margin-left:32%;">filter-redirector on netdev
netdevid,redirect filter's net packet to chardev
chardevid,and redirect indev's packet to filter.if it has
the vnet_hdr_support flag, filter-redirector will redirect
packet with vnet_hdr_len. Create a filter-redirector we need
to differ outdev id from indev id, id can not be the same.
we can just use indev or outdev, but at least one of indev
or outdev need to be specified.</p>

<p style="margin-left:22%;"><b>-object <br>

filter-rewriter,id=id,netdev=netdevid,queue=all|rx|tx,[vnet_hdr_support][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</b></p>

<p style="margin-left:32%;">Filter-rewriter is a part of
COLO project.It will rewrite tcp packet to secondary from
primary to keep secondary tcp connection,and rewrite tcp
packet to primary from secondary make tcp packet can be
handled by client.if it has the vnet_hdr_support flag, we
can parse packet with vnet header.</p>

<p style="margin-left:32%; margin-top: 1em">usage: colo
secondary: -object
filter-redirector,id=f1,netdev=hn0,queue=tx,indev=red0
-object
filter-redirector,id=f2,netdev=hn0,queue=rx,outdev=red1
-object filter-rewriter,id=rew0,netdev=hn0,queue=all</p>

<p style="margin-left:22%;"><b>-object <br>

filter-dump,id=id,netdev=dev[,file=filename][,maxlen=len][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</b></p>

<p style="margin-left:32%;">Dump the network traffic on
netdev dev to the file specified by filename. At most len
bytes (64k by default) per packet are stored. The file
format is libpcap, so it can be analyzed with tools such as
tcpdump or Wireshark.</p>

<p style="margin-left:22%;"><b>-object <br>

colo-compare,id=id,primary_in=chardevid,secondary_in=chardevid,outdev=chardevid,iothread=id[,vnet_hdr_support][,notify_dev=id][,compare_timeout=@var{ms}][,expired_scan_cycle=@var{ms}][,max_queue_size=@var{size}]</b></p>

<p style="margin-left:32%;">Colo-compare gets packet from
primary_in chardevid and secondary_in, then compare whether
the payload of primary packet and secondary packet are the
same. If same, it will output primary packet to out_dev,
else it will notify COLO-framework to do checkpoint and send
primary packet to out_dev. In order to improve efficiency,
we need to put the task of comparison in another iothread.
If it has the vnet_hdr_support flag, colo compare will
send/recv packet with vnet_hdr_len. The
<i>compare_timeout=@var{ms</i>} determines the maximum time
of the colo-compare hold the packet. The
<i>expired_scan_cycle=@var{ms</i>} is to set the period of
scanning expired primary node network packets. The
<i>max_queue_size=@var{size</i>} is to set the max compare
queue size depend on user environment. If user want to use
Xen COLO, need to add the notify_dev to notify Xen
colo-frame to do checkpoint.</p>

<p style="margin-left:32%; margin-top: 1em">COLO-compare
must be used with the help of filter-mirror,
filter-redirector and filter-rewriter.</p>
<pre style="margin-left:37%; margin-top: 1em">KVM COLO

primary:
-netdev tap,id=hn0,vhost=off,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown
-device e1000,id=e0,netdev=hn0,mac=52:a4:00:12:78:66
-chardev socket,id=mirror0,host=3.3.3.3,port=9003,server=on,wait=off
-chardev socket,id=compare1,host=3.3.3.3,port=9004,server=on,wait=off
-chardev socket,id=compare0,host=3.3.3.3,port=9001,server=on,wait=off
-chardev socket,id=compare0-0,host=3.3.3.3,port=9001
-chardev socket,id=compare_out,host=3.3.3.3,port=9005,server=on,wait=off
-chardev socket,id=compare_out0,host=3.3.3.3,port=9005
-object iothread,id=iothread1
-object filter-mirror,id=m0,netdev=hn0,queue=tx,outdev=mirror0
-object filter-redirector,netdev=hn0,id=redire0,queue=rx,indev=compare_out
-object filter-redirector,netdev=hn0,id=redire1,queue=rx,outdev=compare0
-object colo-compare,id=comp0,primary_in=compare0-0,secondary_in=compare1,outdev=compare_out0,iothread=iothread1

secondary:
-netdev tap,id=hn0,vhost=off,script=/etc/qemu-ifup,down script=/etc/qemu-ifdown
-device e1000,netdev=hn0,mac=52:a4:00:12:78:66
-chardev socket,id=red0,host=3.3.3.3,port=9003
-chardev socket,id=red1,host=3.3.3.3,port=9004
-object filter-redirector,id=f1,netdev=hn0,queue=tx,indev=red0
-object filter-redirector,id=f2,netdev=hn0,queue=rx,outdev=red1


Xen COLO

primary:
-netdev tap,id=hn0,vhost=off,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown
-device e1000,id=e0,netdev=hn0,mac=52:a4:00:12:78:66
-chardev socket,id=mirror0,host=3.3.3.3,port=9003,server=on,wait=off
-chardev socket,id=compare1,host=3.3.3.3,port=9004,server=on,wait=off
-chardev socket,id=compare0,host=3.3.3.3,port=9001,server=on,wait=off
-chardev socket,id=compare0-0,host=3.3.3.3,port=9001
-chardev socket,id=compare_out,host=3.3.3.3,port=9005,server=on,wait=off
-chardev socket,id=compare_out0,host=3.3.3.3,port=9005
-chardev socket,id=notify_way,host=3.3.3.3,port=9009,server=on,wait=off
-object filter-mirror,id=m0,netdev=hn0,queue=tx,outdev=mirror0
-object filter-redirector,netdev=hn0,id=redire0,queue=rx,indev=compare_out
-object filter-redirector,netdev=hn0,id=redire1,queue=rx,outdev=compare0
-object iothread,id=iothread1
-object colo-compare,id=comp0,primary_in=compare0-0,secondary_in=compare1,outdev=compare_out0,notify_dev=nofity_way,iothread=iothread1


secondary:
-netdev tap,id=hn0,vhost=off,script=/etc/qemu-ifup,down script=/etc/qemu-ifdown
-device e1000,netdev=hn0,mac=52:a4:00:12:78:66
-chardev socket,id=red0,host=3.3.3.3,port=9003
-chardev socket,id=red1,host=3.3.3.3,port=9004
-object filter-redirector,id=f1,netdev=hn0,queue=tx,indev=red0
-object filter-redirector,id=f2,netdev=hn0,queue=rx,outdev=red1</pre>


<p style="margin-left:32%; margin-top: 1em">If you want to
know the detail of above command line, you can read the
colo-compare git log.</p>

<p style="margin-left:22%;"><b>-object
cryptodev-backend-builtin,id=id[,queues=queues]</b></p>

<p style="margin-left:32%;">Creates a cryptodev backend
which executes crypto opreation from the QEMU cipher APIS.
The id parameter is a unique ID that will be used to
reference this cryptodev backend from the
<b>virtio-crypto</b> device. The queues parameter is
optional, which specify the queue number of cryptodev
backend, the default of queues is 1.</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
  [...] \
      -object cryptodev-backend-builtin,id=cryptodev0 \
      -device virtio-crypto-pci,id=crypto0,cryptodev=cryptodev0 \
  [...]</pre>


<p style="margin-left:22%;"><b>-object <br>

cryptodev-vhost-user,id=id,chardev=chardevid[,queues=queues]</b></p>

<p style="margin-left:32%;">Creates a vhost-user cryptodev
backend, backed by a chardev chardevid. The id parameter is
a unique ID that will be used to reference this cryptodev
backend from the <b>virtio-crypto</b> device. The chardev
should be a unix domain socket backed one. The vhost-user
uses a specifically defined protocol to pass vhost ioctl
replacement messages to an application on the other end of
the socket. The queues parameter is optional, which specify
the queue number of cryptodev backend for multiqueue
vhost-user, the default of queues is 1.</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
  [...] \
      -chardev socket,id=chardev0,path=/path/to/socket \
      -object cryptodev-vhost-user,id=cryptodev0,chardev=chardev0 \
      -device virtio-crypto-pci,id=crypto0,cryptodev=cryptodev0 \
  [...]</pre>


<p style="margin-left:22%;"><b>-object <br>

secret,id=id,data=string,format=raw|base64[,keyid=secretid,iv=string]
<br>
-object <br>

secret,id=id,file=filename,format=raw|base64[,keyid=secretid,iv=string]</b></p>

<p style="margin-left:32%;">Defines a secret to store a
password, encryption key, or some other sensitive data. The
sensitive data can either be passed directly via the data
parameter, or indirectly via the file parameter. Using the
data parameter is insecure unless the sensitive data is
encrypted.</p>

<p style="margin-left:32%; margin-top: 1em">The sensitive
data can be provided in raw format (the default), or base64.
When encoded as JSON, the raw format only supports valid
UTF-8 characters, so base64 is recommended for sending
binary data. QEMU will convert from which ever format is
provided to the format it needs internally. eg, an RBD
password can be provided in raw format, even though it will
be base64 encoded when passed onto the RBD sever.</p>

<p style="margin-left:32%; margin-top: 1em">For added
protection, it is possible to encrypt the data associated
with a secret using the AES-256-CBC cipher. Use of
encryption is indicated by providing the keyid and iv
parameters. The keyid parameter provides the ID of a
previously defined secret that contains the AES-256
decryption key. This key should be 32-bytes long and be
base64 encoded. The iv parameter provides the random
initialization vector used for encryption of this particular
secret and should be a base64 encrypted string of the
16-byte IV.</p>

<p style="margin-left:32%; margin-top: 1em">The simplest
(insecure) usage is to provide the secret inline</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 -object secret,id=sec0,data=letmein,format=raw</pre>


<p style="margin-left:32%; margin-top: 1em">The simplest
secure usage is to provide the secret via a file</p>

<p style="margin-left:32%; margin-top: 1em"># printf
&quot;letmein&quot; &gt; mypasswd.txt # QEMU_SYSTEM_MACRO
-object secret,id=sec0,file=mypasswd.txt,format=raw</p>

<p style="margin-left:32%; margin-top: 1em">For greater
security, AES-256-CBC should be used. To illustrate usage,
consider the openssl command line tool which can encrypt the
data. Note that when encrypting, the plaintext must be
padded to the cipher block size (32 bytes) using the
standard PKCS#5/6 compatible padding algorithm.</p>

<p style="margin-left:32%; margin-top: 1em">First a master
key needs to be created in base64 encoding:</p>

<pre style="margin-left:37%; margin-top: 1em"># openssl rand -base64 32 &gt; key.b64
# KEY=$(base64 -d key.b64 | hexdump  -v -e '/1 &quot;%02X&quot;')</pre>


<p style="margin-left:32%; margin-top: 1em">Each secret to
be encrypted needs to have a random initialization vector
generated. These do not need to be kept secret</p>

<pre style="margin-left:37%; margin-top: 1em"># openssl rand -base64 16 &gt; iv.b64
# IV=$(base64 -d iv.b64 | hexdump  -v -e '/1 &quot;%02X&quot;')</pre>


<p style="margin-left:32%; margin-top: 1em">The secret to
be defined can now be encrypted, in this case we're telling
openssl to base64 encode the result, but it could be left as
raw bytes if desired.</p>

<pre style="margin-left:37%; margin-top: 1em"># SECRET=$(printf &quot;letmein&quot; |
           openssl enc -aes-256-cbc -a -K $KEY -iv $IV)</pre>


<p style="margin-left:32%; margin-top: 1em">When launching
QEMU, create a master secret pointing to <b>key.b64</b> and
specify that to be used to decrypt the user password. Pass
the contents of <b>iv.b64</b> to the second secret</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
    -object secret,id=secmaster0,format=base64,file=key.b64 \
    -object secret,id=sec0,keyid=secmaster0,format=base64,\
        data=$SECRET,iv=$(&lt;iv.b64)</pre>


<p style="margin-left:22%;"><b>-object <br>

sev-guest,id=id,cbitpos=cbitpos,reduced-phys-bits=val,[sev-device=string,policy=policy,handle=handle,dh-cert-file=file,session-file=file,kernel-hashes=on|off]</b></p>

<p style="margin-left:32%;">Create a Secure Encrypted
Virtualization (SEV) guest object, which can be used to
provide the guest memory encryption support on AMD
processors.</p>

<p style="margin-left:32%; margin-top: 1em">When memory
encryption is enabled, one of the physical address bit (aka
the C-bit) is utilized to mark if a memory page is
protected. The <b>cbitpos</b> is used to provide the C-bit
position. The C-bit position is Host family dependent hence
user must provide this value. On EPYC, the value should be
47.</p>

<p style="margin-left:32%; margin-top: 1em">When memory
encryption is enabled, we loose certain bits in physical
address space. The <b>reduced-phys-bits</b> is used to
provide the number of bits we loose in physical address
space. Similar to C-bit, the value is Host family dependent.
On EPYC, the value should be 5.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>sev-device</b> provides the device file to use for
communicating with the SEV firmware running inside AMD
Secure Processor. The default device is '/dev/sev'. If
hardware supports memory encryption then /dev/sev devices
are created by CCP driver.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>policy</b> provides the guest policy to be enforced by
the SEV firmware and restrict what configuration and
operational commands can be performed on this guest by the
hypervisor. The policy should be provided by the guest owner
and is bound to the guest and cannot be changed throughout
the lifetime of the guest. The default is 0.</p>

<p style="margin-left:32%; margin-top: 1em">If guest
<b>policy</b> allows sharing the key with another SEV guest
then <b>handle</b> can be use to provide handle of the guest
from which to share the key.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>dh-cert-file</b> and <b>session-file</b> provides the
guest owner's Public Diffie-Hillman key defined in SEV spec.
The PDH and session parameters are used for establishing a
cryptographic session with the guest owner to negotiate keys
used for attestation. The file must be encoded in
base64.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>kernel-hashes</b> adds the hashes of given kernel/initrd/
cmdline to a designated guest firmware page for measured
Linux boot with -kernel. The default is off. (Since 6.2)</p>

<p style="margin-left:32%; margin-top: 1em">e.g to launch a
SEV guest</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
    ...... \
    -object sev-guest,id=sev0,cbitpos=47,reduced-phys-bits=5 \
    -machine ...,memory-encryption=sev0 \
    .....</pre>


<p style="margin-left:22%;"><b>-object
authz-simple,id=id,identity=string</b></p>

<p style="margin-left:32%;">Create an authorization object
that will control access to network services.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>identity</b> parameter is identifies the user and its
format depends on the network service that authorization
object is associated with. For authorizing based on TLS x509
certificates, the identity must be the x509 distinguished
name. Note that care must be taken to escape any commas in
the distinguished name.</p>

<p style="margin-left:32%; margin-top: 1em">An example
authorization object to validate a x509 distinguished name
would look like:</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
    ... \
    -object 'authz-simple,id=auth0,identity=CN=laptop.example.com,,O=Example Org,,L=London,,ST=London,,C=GB' \
    ...</pre>


<p style="margin-left:32%; margin-top: 1em">Note the use of
quotes due to the x509 distinguished name containing
whitespace, and escaping of ','.</p>

<p style="margin-left:22%;"><b>-object
authz-listfile,id=id,filename=path,refresh=on|off</b></p>

<p style="margin-left:32%;">Create an authorization object
that will control access to network services.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>filename</b> parameter is the fully qualified path to a
file containing the access control list rules in JSON
format.</p>

<p style="margin-left:32%; margin-top: 1em">An example set
of rules that match against SASL usernames might look
like:</p>

<pre style="margin-left:37%; margin-top: 1em">{
  &quot;rules&quot;: [
     { &quot;match&quot;: &quot;fred&quot;, &quot;policy&quot;: &quot;allow&quot;, &quot;format&quot;: &quot;exact&quot; },
     { &quot;match&quot;: &quot;bob&quot;, &quot;policy&quot;: &quot;allow&quot;, &quot;format&quot;: &quot;exact&quot; },
     { &quot;match&quot;: &quot;danb&quot;, &quot;policy&quot;: &quot;deny&quot;, &quot;format&quot;: &quot;glob&quot; },
     { &quot;match&quot;: &quot;dan*&quot;, &quot;policy&quot;: &quot;allow&quot;, &quot;format&quot;: &quot;exact&quot; },
  ],
  &quot;policy&quot;: &quot;deny&quot;
}</pre>


<p style="margin-left:32%; margin-top: 1em">When checking
access the object will iterate over all the rules and the
first rule to match will have its <b>policy</b> value
returned as the result. If no rules match, then the default
<b>policy</b> value is returned.</p>

<p style="margin-left:32%; margin-top: 1em">The rules can
either be an exact string match, or they can use the simple
UNIX glob pattern matching to allow wildcards to be
used.</p>

<p style="margin-left:32%; margin-top: 1em">If
<b>refresh</b> is set to true the file will be monitored and
automatically reloaded whenever its content changes.</p>

<p style="margin-left:32%; margin-top: 1em">As with the
<b>authz-simple</b> object, the format of the identity
strings being matched depends on the network service, but is
usually a TLS x509 distinguished name, or a SASL
username.</p>

<p style="margin-left:32%; margin-top: 1em">An example
authorization object to validate a SASL username would look
like:</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
    ... \
    -object authz-simple,id=auth0,filename=/etc/qemu/vnc-sasl.acl,refresh=on \
    ...</pre>


<p style="margin-left:22%;"><b>-object
authz-pam,id=id,service=string</b></p>

<p style="margin-left:32%;">Create an authorization object
that will control access to network services.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>service</b> parameter provides the name of a PAM service
to use for authorization. It requires that a file
<b>/etc/pam.d/service</b> exist to provide the configuration
for the <b>account</b> subsystem.</p>

<p style="margin-left:32%; margin-top: 1em">An example
authorization object to validate a TLS x509 distinguished
name would look like:</p>

<pre style="margin-left:37%; margin-top: 1em"># qemu-system-x86_64 \
    ... \
    -object authz-pam,id=auth0,service=qemu-vnc \
    ...</pre>


<p style="margin-left:32%; margin-top: 1em">There would
then be a corresponding config file for PAM at
<b>/etc/pam.d/qemu-vnc</b> that contains:</p>

<pre style="margin-left:37%; margin-top: 1em">account requisite  pam_listfile.so item=user sense=allow \
           file=/etc/qemu/vnc.allow</pre>


<p style="margin-left:32%; margin-top: 1em">Finally the
<b>/etc/qemu/vnc.allow</b> file would contain the list of
x509 distingished names that are permitted access</p>

<pre style="margin-left:37%; margin-top: 1em">CN=laptop.example.com,O=Example Home,L=London,ST=London,C=GB</pre>


<p style="margin-left:22%;"><b>-object <br>

iothread,id=id,poll-max-ns=poll-max-ns,poll-grow=poll-grow,poll-shrink=poll-shrink,aio-max-batch=aio-max-batch</b></p>

<p style="margin-left:32%;">Creates a dedicated event loop
thread that devices can be assigned to. This is known as an
IOThread. By default device emulation happens in vCPU
threads or the main event loop thread. This can become a
scalability bottleneck. IOThreads allow device emulation and
I/O to run on other host CPUs.</p>

<p style="margin-left:32%; margin-top: 1em">The <b>id</b>
parameter is a unique ID that will be used to reference this
IOThread from <b>-device ...,iothread=id</b>. Multiple
devices can be assigned to an IOThread. Note that not all
devices support an <b>iothread</b> parameter.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>query-iothreads</b> QMP command lists IOThreads and
reports their thread IDs so that the user can configure host
CPU pinning/affinity.</p>

<p style="margin-left:32%; margin-top: 1em">IOThreads use
an adaptive polling algorithm to reduce event loop latency.
Instead of entering a blocking system call to monitor file
descriptors and then pay the cost of being woken up when an
event occurs, the polling algorithm spins waiting for events
for a short time. The algorithm's default parameters are
suitable for many cases but can be adjusted based on
knowledge of the workload and/or host device latency.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>poll-max-ns</b> parameter is the maximum number of
nanoseconds to busy wait for events. Polling can be disabled
by setting this value to 0.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>poll-grow</b> parameter is the multiplier used to
increase the polling time when the algorithm detects it is
missing events due to not polling long enough.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>poll-shrink</b> parameter is the divisor used to decrease
the polling time when the algorithm detects it is spending
too long polling without encountering events.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>aio-max-batch</b> parameter is the maximum number of
requests in a batch for the AIO engine, 0 means that the
engine will use its default.</p>

<p style="margin-left:32%; margin-top: 1em">The IOThread
parameters can be modified at run-time using the
<b>qom-set</b> command (where <b>iothread1</b> is the
IOThread's <b>id</b>):</p>

<pre style="margin-left:37%; margin-top: 1em">(qemu) qom-set /objects/iothread1 poll-max-ns 100000</pre>


<p style="margin-left:11%; margin-top: 1em">During the
graphical emulation, you can use special key combinations to
change modes. The default key mappings are shown below, but
if you use <b>-alt-grab</b> then the modifier is
Ctrl-Alt-Shift (instead of Ctrl-Alt) and if you use
<b>-ctrl-grab</b> then the modifier is the right Ctrl key
(instead of Ctrl-Alt): <b><br>
Ctrl-Alt-f</b></p>

<p style="margin-left:22%;">Toggle full screen</p>

<p style="margin-left:11%;"><b>Ctrl-Alt-+</b></p>

<p style="margin-left:22%;">Enlarge the screen</p>

<p style="margin-left:11%;"><b>Ctrl-Alt--</b></p>

<p style="margin-left:22%;">Shrink the screen</p>

<p style="margin-left:11%;"><b>Ctrl-Alt-u</b></p>

<p style="margin-left:22%;">Restore the screen's un-scaled
dimensions</p>

<p style="margin-left:11%;"><b>Ctrl-Alt-n</b></p>

<p style="margin-left:22%;">Switch to virtual console 'n'.
Standard console mappings are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><i>1</i></p></td>
<td width="9%"></td>
<td width="33%">


<p>Target system display</p></td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><i>2</i></p></td>
<td width="9%"></td>
<td width="33%">


<p>Monitor</p></td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><i>3</i></p></td>
<td width="9%"></td>
<td width="33%">


<p>Serial port</p></td>
<td width="35%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>Ctrl-Alt</b></p>

<p style="margin-left:22%;">Toggle mouse and keyboard
grab.</p>

<p style="margin-left:11%; margin-top: 1em">In the virtual
consoles, you can use Ctrl-Up, Ctrl-Down, Ctrl-PageUp and
Ctrl-PageDown to move in the back log.</p>

<p style="margin-left:11%; margin-top: 1em">During
emulation, if you are using a character backend multiplexer
(which is the default if you are using <b>-nographic</b>)
then several commands are available via an escape sequence.
These key sequences all start with an escape character,
which is Ctrl-a by default, but can be changed with
<b>-echr</b>. The list below assumes you're using the
default. <b><br>
Ctrl-a h</b></p>

<p style="margin-left:22%;">Print this help</p>

<p style="margin-left:11%;"><b>Ctrl-a x</b></p>

<p style="margin-left:22%;">Exit emulator</p>

<p style="margin-left:11%;"><b>Ctrl-a s</b></p>

<p style="margin-left:22%;">Save disk data back to file (if
-snapshot)</p>

<p style="margin-left:11%;"><b>Ctrl-a t</b></p>

<p style="margin-left:22%;">Toggle console timestamps</p>

<p style="margin-left:11%;"><b>Ctrl-a b</b></p>

<p style="margin-left:22%;">Send break (magic sysrq in
Linux)</p>

<p style="margin-left:11%;"><b>Ctrl-a c</b></p>

<p style="margin-left:22%;">Rotate between the frontends
connected to the multiplexer (usually this switches between
the monitor and the console)</p>

<p style="margin-left:11%;"><b>Ctrl-a Ctrl-a</b></p>

<p style="margin-left:22%;">Send the escape character to
the frontend</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In addition to
using normal file images for the emulated storage devices,
QEMU can also use networked resources such as iSCSI devices.
These are specified using a special URL syntax.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>iSCSI</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>iSCSI support allows QEMU to access iSCSI resources
directly and use as images for the guest storage. Both disk
and cdrom images are supported.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Syntax for
specifying iSCSI LUNs is
&quot;iscsi://&lt;target-ip&gt;[:&lt;port&gt;]/&lt;target-iqn&gt;/&lt;lun&gt;&quot;</p>

<p style="margin-left:22%; margin-top: 1em">By default qemu
will use the iSCSI initiator-name
'iqn.2008-11.org.linux-kvm[:&lt;name&gt;]' but this can also
be set from the command line or a configuration file.</p>

<p style="margin-left:22%; margin-top: 1em">Since version
QEMU 2.4 it is possible to specify a iSCSI request timeout
to detect stalled requests and force a reestablishment of
the session. The timeout is specified in seconds. The
default is 0 which means no timeout. Libiscsi 1.15.0 or
greater is required for this feature.</p>

<p style="margin-left:22%; margin-top: 1em">Example
(without authentication):</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 -iscsi initiator-name=iqn.2001-04.com.example:my-initiator \
                 -cdrom iscsi://192.0.2.1/iqn.2001-04.com.example/2 \
                 -drive file=iscsi://192.0.2.1/iqn.2001-04.com.example/1</pre>


<p style="margin-left:22%; margin-top: 1em">Example (CHAP
username/password via URL):</p>


<p style="margin-left:26%; margin-top: 1em"><tt>qemu-system-x86_64
-drive
file=iscsi:</tt><i>//user%password@192.0.2.1/iqn.2001-04.com.example/1</i></p>

<p style="margin-left:22%; margin-top: 1em"><i>Example
(CHAP username/password via environment variables):</i></p>

<pre style="margin-left:26%; margin-top: 1em">LIBISCSI_CHAP_USERNAME=&quot;user&quot; \
LIBISCSI_CHAP_PASSWORD=&quot;password&quot; \
qemu-system-x86_64 -drive file=iscsi://192.0.2.1/iqn.2001-04.com.example/1</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>NBD</b></p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">QEMU supports NBD (Network Block
Devices) both using TCP protocol as well as Unix Domain
Sockets. With TCP, the default port is 10809.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Syntax for
specifying a NBD device using TCP, in preferred URI form:
&quot;nbd://&lt;server-ip&gt;[:&lt;port&gt;]/[&lt;export&gt;]&quot;</p>

<p style="margin-left:22%; margin-top: 1em">Syntax for
specifying a NBD device using Unix Domain Sockets; remember
that '?' is a shell glob character and may need quoting:
&quot;nbd+unix:///[&lt;export&gt;]?socket=&lt;domain-socket&gt;&quot;</p>

<p style="margin-left:22%; margin-top: 1em">Older syntax
that is also recognized:
&quot;nbd:&lt;server-ip&gt;:&lt;port&gt;[:exportname=&lt;export&gt;]&quot;</p>

<p style="margin-left:22%; margin-top: 1em">Syntax for
specifying a NBD device using Unix Domain Sockets
&quot;nbd:unix:&lt;domain-socket&gt;[:exportname=&lt;export&gt;]&quot;</p>

<p style="margin-left:22%; margin-top: 1em">Example for
TCP</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 --drive file=nbd:192.0.2.1:30000</pre>


<p style="margin-left:22%; margin-top: 1em">Example for
Unix Domain Sockets</p>

<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 --drive file=nbd:unix:/tmp/nbd-socket</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>SSH</b></p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">QEMU supports SSH (Secure Shell)
access to remote disks.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>


<p style="margin-left:26%; margin-top: 1em"><tt>qemu-system-x86_64
-drive file=ssh:</tt><i>//user@host/path/to/disk.img</i></p>

<pre style="margin-left:26%;">qemu-system-x86_64 -drive file.driver=ssh,file.user=user,file.host=host,file.port=22,file.path=/path/to/disk.img</pre>


<p style="margin-left:22%; margin-top: 1em"><i>Currently
authentication must be done using ssh-agent. Other
authentication methods may be supported in future.</i></p>

<p style="margin-left:11%;"><b>GlusterFS</b></p>

<p style="margin-left:22%;">GlusterFS is a user space
distributed file system. QEMU supports the use of GlusterFS
volumes for hosting VM disk images using TCP, Unix Domain
Sockets and RDMA transport protocols.</p>

<p style="margin-left:22%; margin-top: 1em">Syntax for
specifying a VM disk image on GlusterFS volume is</p>
<pre style="margin-left:26%; margin-top: 1em">URI:
gluster[+type]://[host[:port]]/volume/path[?socket=...][,debug=N][,logfile=...]


JSON:
'json:{&quot;driver&quot;:&quot;qcow2&quot;,&quot;file&quot;:{&quot;driver&quot;:&quot;gluster&quot;,&quot;volume&quot;:&quot;testvol&quot;,&quot;path&quot;:&quot;a.img&quot;,&quot;debug&quot;:N,&quot;logfile&quot;:&quot;...&quot;,&nbsp;
                                 &quot;server&quot;:[{&quot;type&quot;:&quot;tcp&quot;,&quot;host&quot;:&quot;...&quot;,&quot;port&quot;:&quot;...&quot;},&nbsp;
                                           {&quot;type&quot;:&quot;unix&quot;,&quot;socket&quot;:&quot;...&quot;}]}}'</pre>


<p style="margin-left:22%; margin-top: 1em">Example</p>
<pre style="margin-left:26%; margin-top: 1em">URI:
qemu-system-x86_64 --drive file=gluster://192.0.2.1/testvol/a.img,&nbsp;
                               file.debug=9,file.logfile=/var/log/qemu-gluster.log


JSON:
qemu-system-x86_64 'json:{&quot;driver&quot;:&quot;qcow2&quot;,&nbsp;
                          &quot;file&quot;:{&quot;driver&quot;:&quot;gluster&quot;,&nbsp;
                                   &quot;volume&quot;:&quot;testvol&quot;,&quot;path&quot;:&quot;a.img&quot;,&nbsp;
                                   &quot;debug&quot;:9,&quot;logfile&quot;:&quot;/var/log/qemu-gluster.log&quot;,&nbsp;
                                   &quot;server&quot;:[{&quot;type&quot;:&quot;tcp&quot;,&quot;host&quot;:&quot;1.2.3.4&quot;,&quot;port&quot;:24007},&nbsp;
                                             {&quot;type&quot;:&quot;unix&quot;,&quot;socket&quot;:&quot;/var/run/glusterd.socket&quot;}]}}'
qemu-system-x86_64 -drive driver=qcow2,file.driver=gluster,file.volume=testvol,file.path=/path/a.img,&nbsp;
                                      file.debug=9,file.logfile=/var/log/qemu-gluster.log,&nbsp;
                                      file.server.0.type=tcp,file.server.0.host=1.2.3.4,file.server.0.port=24007,&nbsp;
                                      file.server.1.type=unix,file.server.1.socket=/var/run/glusterd.socket</pre>


<p style="margin-left:22%; margin-top: 1em">See also
<i>http://www.gluster.org</i>.</p>

<p style="margin-left:11%;"><b>HTTP/HTTPS/FTP/FTPS</b></p>

<p style="margin-left:22%;">QEMU supports read-only access
to files accessed over http(s) and ftp(s).</p>

<p style="margin-left:22%; margin-top: 1em">Syntax using a
single filename:</p>

<pre style="margin-left:26%; margin-top: 1em">&lt;protocol&gt;://[&lt;username&gt;[:&lt;password&gt;]@]&lt;host&gt;/&lt;path&gt;</pre>


<p style="margin-left:22%; margin-top: 1em">where: <b><br>
protocol</b></p>

<p style="margin-left:32%;">'http', 'https', 'ftp', or
'ftps'.</p>

<p style="margin-left:22%;"><b>username</b></p>

<p style="margin-left:32%;">Optional username for
authentication to the remote server.</p>

<p style="margin-left:22%;"><b>password</b></p>

<p style="margin-left:32%;">Optional password for
authentication to the remote server.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>host</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Address of the remote server.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>path</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Path on the remote server, including any query
string.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The following
options are also supported:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>url</b></p></td>
<td width="6%"></td>
<td width="68%">


<p style="margin-top: 1em">The full URL when passing
options to the driver explicitly.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>readahead</b></p>

<p style="margin-left:32%;">The amount of data to read
ahead with each range request to the remote server. This
value may optionally have the suffix 'T', 'G', 'M', 'K', 'k'
or 'b'. If it does not have a suffix, it will be assumed to
be in bytes. The value must be a multiple of 512 bytes. It
defaults to 256k.</p>

<p style="margin-left:22%;"><b>sslverify</b></p>

<p style="margin-left:32%;">Whether to verify the remote
server's certificate when connecting over SSL. It can have
the value 'on' or 'off'. It defaults to 'on'.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>cookie</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Send this cookie (it can also be a list of cookies
separated by ';') with each outgoing request. Only supported
when using protocols such as HTTP which support cookies,
otherwise ignored.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>timeout</b></p>

<p style="margin-left:32%;">Set the timeout in seconds of
the CURL connection. This timeout is the time that CURL
waits for a response from the remote server to get the size
of the image to be downloaded. If not set, the default
timeout of 5 seconds is used.</p>

<p style="margin-left:22%; margin-top: 1em">Note that when
passing options to qemu explicitly, <b>driver</b> is the
value of &lt;protocol&gt;.</p>

<p style="margin-left:22%; margin-top: 1em">Example: boot
from a remote Fedora 20 live ISO image</p>
<pre style="margin-left:26%; margin-top: 1em">qemu-system-x86_64 --drive media=cdrom,file=https://archives.fedoraproject.org/pub/archive/fedora/linux/releases/20/Live/x86_64/Fedora-Live-Desktop-x86_64-20-1.iso,readonly


qemu-system-x86_64 --drive media=cdrom,file.driver=http,file.url=http://archives.fedoraproject.org/pub/fedora/linux/releases/20/Live/x86_64/Fedora-Live-Desktop-x86_64-20-1.iso,readonly</pre>


<p style="margin-left:22%; margin-top: 1em">Example: boot
from a remote Fedora 20 cloud image using a local overlay
for writes, copy-on-read, and a readahead of 64k</p>

<p style="margin-left:26%; margin-top: 1em"><tt>qemu-img
create -f qcow2 -o
backing_file='json:{&quot;file.driver&quot;:&quot;http&quot;,,
&quot;file.url&quot;:&quot;</tt><i>http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/20/Images/x86_64/Fedora-x86_64-20-20131211.1-sda.qcow2</i><tt>&quot;,,
&quot;file.readahead&quot;:&quot;64k&quot;}'
/tmp/Fedora-x86_64-20-20131211.1-sda.qcow2</tt></p>


<p style="margin-left:26%; margin-top: 1em"><tt>qemu-system-x86_64
-drive
file=/tmp/Fedora-x86_64-20-20131211.1-sda.qcow2,copy-on-read=on</tt></p>

<p style="margin-left:22%; margin-top: 1em"><i>Example:
boot from an image stored on a VMware vSphere server with a
self-signed certificate using a local overlay for writes, a
readahead of 64k and a timeout of 10 seconds.</i></p>

<p style="margin-left:26%; margin-top: 1em"><tt>qemu-img
create -f qcow2 -o
backing_file='json:{&quot;file.driver&quot;:&quot;https&quot;,,
&quot;file.url&quot;:&quot;</tt><i>https://user:password@vsphere.example.com/folder/test/test-flat.vmdk?dcPath=Datacenter&amp;dsName=datastore1</i><tt>&quot;,,
&quot;file.sslverify&quot;:&quot;off&quot;,,
&quot;file.readahead&quot;:&quot;64k&quot;,,
&quot;file.timeout&quot;:10}' /tmp/test.qcow2</tt></p>


<p style="margin-left:26%; margin-top: 1em"><tt>qemu-system-x86_64
-drive file=/tmp/test.qcow2</tt></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The HTML
documentation of QEMU for more precise information and Linux
user mode emulator invocation.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Fabrice
Bellard</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">2022, The QEMU
Project Developers</p>
<hr>
</body>
</html>
